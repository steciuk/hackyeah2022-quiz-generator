var K3=Object.defineProperty,Z3=Object.defineProperties,Y3=Object.getOwnPropertyDescriptors,DF=Object.getOwnPropertySymbols,Q3=Object.prototype.hasOwnProperty,J3=Object.prototype.propertyIsEnumerable,TF=(it,Ce,V)=>Ce in it?K3(it,Ce,{enumerable:!0,configurable:!0,writable:!0,value:V}):it[Ce]=V,SF=(it,Ce)=>{for(var V in Ce||(Ce={}))Q3.call(Ce,V)&&TF(it,V,Ce[V]);if(DF)for(var V of DF(Ce))J3.call(Ce,V)&&TF(it,V,Ce[V]);return it},AF=(it,Ce)=>Z3(it,Y3(Ce));(self.webpackChunkclient=self.webpackChunkclient||[]).push([[179],{2011:(it,Ce,V)=>{"use strict";V.d(Ce,{Dh:()=>ae,GT:()=>ge,cc:()=>Ie,hO:()=>xe,on:()=>G,pX:()=>ue,xv:()=>_e});var f=V(5e3),W=V(127),P=V(5813);it=V.hmd(it);const se=["ngOnDestroy"],ue=(De,We,He,Oe={})=>new Proxy(De,{get:(Re,Se)=>He.runOutsideAngular(()=>{var qe;if(De[Se])return(null===(qe=null==Oe?void 0:Oe.spy)||void 0===qe?void 0:qe.get)&&Oe.spy.get(Se,De[Se]),De[Se];if(se.indexOf(Se)>-1)return()=>{};const ie=We.toPromise().then(ye=>{const be=ye&&ye[Se];return"function"==typeof be?be.bind(ye):be&&be.then?be.then(J=>He.run(()=>J)):He.run(()=>be)});return new Proxy(()=>{},{get:(ye,be)=>ie[be],apply:(ye,be,J)=>ie.then(re=>{var oe;const we=re&&re(...J);return(null===(oe=null==Oe?void 0:Oe.spy)||void 0===oe?void 0:oe.apply)&&Oe.spy.apply(Se,J,we),we})})})}),ge=(De,We)=>{We.forEach(He=>{Object.getOwnPropertyNames(He.prototype||He).forEach(Oe=>{Object.defineProperty(De.prototype,Oe,Object.getOwnPropertyDescriptor(He.prototype||He,Oe))})})};class he{constructor(We){return We}}const ae=new f.OlP("angularfire2.app.options"),_e=new f.OlP("angularfire2.app.name");function G(De,We,He){const Re="object"==typeof He&&He||{};Re.name=Re.name||"string"==typeof He&&He||"[DEFAULT]";const qe=W.Z.apps.filter(ie=>ie&&ie.name===Re.name)[0]||We.runOutsideAngular(()=>W.Z.initializeApp(De,Re));try{JSON.stringify(De)!==JSON.stringify(qe.options)&&$("error",`${qe.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ie){}return new he(qe)}const $=(De,...We)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[De](...We)},ee={provide:he,useFactory:G,deps:[ae,f.R0b,[new f.FiY,_e]]};let xe=(()=>{class De{constructor(He){W.Z.registerVersion("angularfire",P.q4.full,"core"),W.Z.registerVersion("angularfire",P.q4.full,"app-compat"),W.Z.registerVersion("angular",f.q4F.full,He.toString())}static initializeApp(He,Oe){return{ngModule:De,providers:[{provide:ae,useValue:He},{provide:_e,useValue:Oe}]}}}return De.\u0275fac=function(He){return new(He||De)(f.LFG(f.Lbi))},De.\u0275mod=f.oAB({type:De}),De.\u0275inj=f.cJS({providers:[ee]}),De})();function Ie(De,We,He,Oe,Re){const[,Se,qe]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===De)||[];if(Se)return function Ve(De,We){try{return De.toString()===We.toString()}catch(He){return De===We}}(Re,qe)||(me("error",`${We} was already initialized on the ${He} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Re,was:qe})),Se;{const ie=Oe();return globalThis.\u0275AngularfireInstanceCache.push([De,ie,Re]),ie}}const je=!!it.hot,me=(De,...We)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[De](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(it,Ce,V)=>{"use strict";V.d(Ce,{q4:()=>_g,iC:()=>Qu,fc:()=>jl,HU:()=>Yu,vb:()=>_d,JM:()=>Zu});var f=V(5e3),W=V(5867),P=V(5861),se=V(9681),ue=V(2090),ge=V(4859),he=V(1877),ae=V(8766);const _e="@firebase/installations",G="0.5.16",ee=`w:${G}`,xe="FIS_v2",We=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function He(b){return b instanceof ue.ZR&&b.code.includes("request-failed")}function Oe({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Re(b){return{token:b.token,requestStatus:2,expiresIn:re(b.expiresIn),creationTime:Date.now()}}function Se(b,T){return qe.apply(this,arguments)}function qe(){return(qe=(0,P.Z)(function*(b,T){const j=(yield T.json()).error;return We.create("request-failed",{requestName:b,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function ie({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function ye(b,{refreshToken:T}){const x=ie(b);return x.append("Authorization",function oe(b){return`${xe} ${b}`}(T)),x}function be(b){return J.apply(this,arguments)}function J(){return(J=(0,P.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function re(b){return Number(b.replace("s","000"))}function we(b,T){return de.apply(this,arguments)}function de(){return(de=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:x}){const j=Oe(b),Y=ie(b),te=T.getImmediate({optional:!0});if(te){const kt=yield te.getHeartbeatsHeader();kt&&Y.append("x-firebase-client",kt)}const ze={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:xe,appId:b.appId,sdkVersion:ee})},wt=yield be(()=>fetch(j,ze));if(wt.ok){const kt=yield wt.json();return{fid:kt.fid||x,registrationStatus:2,refreshToken:kt.refreshToken,authToken:Re(kt.authToken)}}throw yield Se("Create Installation",wt)})).apply(this,arguments)}function Ue(b){return new Promise(T=>{setTimeout(T,b)})}const tn=/^[cdef][\w-]{21}$/;function Ye(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function fn(b){return function gt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return tn.test(x)?x:""}catch(b){return""}}function Tn(b){return`${b.appName}!${b.appId}`}const pn=new Map;function nn(b,T){const x=Tn(b);Mn(x,T),function ei(b,T){const x=function Ln(){return!ui&&"BroadcastChannel"in self&&(ui=new BroadcastChannel("[Firebase] FID Change"),ui.onmessage=b=>{Mn(b.data.key,b.data.fid)}),ui}();x&&x.postMessage({key:b,fid:T}),function Yi(){0===pn.size&&ui&&(ui.close(),ui=null)}()}(x,T)}function Mn(b,T){const x=pn.get(b);if(x)for(const j of x)j(T)}let ui=null;const Bn="firebase-installations-store";let Qi=null;function vt(){return Qi||(Qi=(0,ae.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Bn)}})),Qi}function Mr(b,T){return bn.apply(this,arguments)}function bn(){return(bn=(0,P.Z)(function*(b,T){const x=Tn(b),Y=(yield vt()).transaction(Bn,"readwrite"),te=Y.objectStore(Bn),Me=yield te.get(x);return yield te.put(T,x),yield Y.done,(!Me||Me.fid!==T.fid)&&nn(b,T.fid),T})).apply(this,arguments)}function gn(b){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,P.Z)(function*(b){const T=Tn(b),j=(yield vt()).transaction(Bn,"readwrite");yield j.objectStore(Bn).delete(T),yield j.done})).apply(this,arguments)}function Wr(b,T){return qr.apply(this,arguments)}function qr(){return(qr=(0,P.Z)(function*(b,T){const x=Tn(b),Y=(yield vt()).transaction(Bn,"readwrite"),te=Y.objectStore(Bn),Me=yield te.get(x),ze=T(Me);return void 0===ze?yield te.delete(x):yield te.put(ze,x),yield Y.done,ze&&(!Me||Me.fid!==ze.fid)&&nn(b,ze.fid),ze})).apply(this,arguments)}function Sn(b){return lr.apply(this,arguments)}function lr(){return(lr=(0,P.Z)(function*(b){let T;const x=yield Wr(b.appConfig,j=>{const Y=vs(j),te=Kt(b,Y);return T=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function vs(b){return ji(b||{fid:Ye(),registrationStatus:0})}function Kt(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(We.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},j=function mt(b,T){return st.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:j}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Ai(b)}:{installationEntry:T}}function st(){return(st=(0,P.Z)(function*(b,T){try{const x=yield we(b,T);return Mr(b.appConfig,x)}catch(x){throw He(x)&&409===x.customData.serverCode?yield gn(b.appConfig):yield Mr(b.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Ai(b){return zr.apply(this,arguments)}function zr(){return(zr=(0,P.Z)(function*(b){let T=yield Zt(b.appConfig);for(;1===T.registrationStatus;)yield Ue(100),T=yield Zt(b.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:j}=yield Sn(b);return j||x}return T})).apply(this,arguments)}function Zt(b){return Wr(b,T=>{if(!T)throw We.create("installation-not-found");return ji(T)})}function ji(b){return function jn(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function _n(b,T){return yt.apply(this,arguments)}function yt(){return(yt=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:T},x){const j=li(b,x),Y=ye(b,x),te=T.getImmediate({optional:!0});if(te){const kt=yield te.getHeartbeatsHeader();kt&&Y.append("x-firebase-client",kt)}const ze={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:ee,appId:b.appId}})},wt=yield be(()=>fetch(j,ze));if(wt.ok)return Re(yield wt.json());throw yield Se("Generate Auth Token",wt)})).apply(this,arguments)}function li(b,{fid:T}){return`${Oe(b)}/${T}/authTokens:generate`}function Gt(b){return tr.apply(this,arguments)}function tr(){return(tr=(0,P.Z)(function*(b,T=!1){let x;const j=yield Wr(b.appConfig,te=>{if(!rn(te))throw We.create("not-registered");const Me=te.authToken;if(!T&&K(Me))return te;if(1===Me.requestStatus)return x=et(b,T),te;{if(!navigator.onLine)throw We.create("app-offline");const ze=Q(te);return x=Dt(b,ze),ze}});return x?yield x:j.authToken})).apply(this,arguments)}function et(b,T){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,P.Z)(function*(b,T){let x=yield Ke(b.appConfig);for(;1===x.authToken.requestStatus;)yield Ue(100),x=yield Ke(b.appConfig);const j=x.authToken;return 0===j.requestStatus?Gt(b,T):j})).apply(this,arguments)}function Ke(b){return Wr(b,T=>{if(!rn(T))throw We.create("not-registered");return function H(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Dt(b,T){return It.apply(this,arguments)}function It(){return(It=(0,P.Z)(function*(b,T){try{const x=yield _n(b,T),j=Object.assign(Object.assign({},T),{authToken:x});return yield Mr(b.appConfig,j),x}catch(x){if(!He(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const j=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Mr(b.appConfig,j)}else yield gn(b.appConfig);throw x}})).apply(this,arguments)}function rn(b){return void 0!==b&&2===b.registrationStatus}function K(b){return 2===b.requestStatus&&!function q(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function Q(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function B(){return(B=(0,P.Z)(function*(b){const T=b,{installationEntry:x,registrationPromise:j}=yield Sn(T);return j?j.catch(console.error):Gt(T).catch(console.error),x.fid})).apply(this,arguments)}function Le(){return(Le=(0,P.Z)(function*(b,T=!1){const x=b;return yield nt(x),(yield Gt(x,T)).token})).apply(this,arguments)}function nt(b){return ft.apply(this,arguments)}function ft(){return(ft=(0,P.Z)(function*(b){const{registrationPromise:T}=yield Sn(b);T&&(yield T)})).apply(this,arguments)}function La(b){return We.create("missing-app-config-values",{valueName:b})}const ci="installations",jt=b=>{const T=b.getProvider("app").getImmediate(),x=function vr(b){if(!b||!b.options)throw La("App Configuration");if(!b.name)throw La("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!b.options[x])throw La(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},wn=b=>{const T=b.getProvider("app").getImmediate(),x=(0,se._getProvider)(T,ci).getImmediate();return{getId:()=>function k(b){return B.apply(this,arguments)}(x),getToken:Y=>function le(b){return Le.apply(this,arguments)}(x,Y)}};(function ti(){(0,se._registerComponent)(new ge.wA(ci,jt,"PUBLIC")),(0,se._registerComponent)(new ge.wA("installations-internal",wn,"PRIVATE"))})(),(0,se.registerVersion)(_e,G),(0,se.registerVersion)(_e,G,"esm2017");const ws="@firebase/remote-config",Hn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $c{constructor(T,x,j,Y){this.client=T,this.storage=x,this.storageCache=j,this.logger=Y}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-x,Y=j<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var x=this;return(0,P.Z)(function*(){const[j,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(T.cacheMaxAgeMillis,j))return Y;T.eTag=Y&&Y.eTag;const te=yield x.client.fetch(T),Me=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&Me.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(Me),te})()}}function Ou(b=navigator){return b.languages&&b.languages[0]||b.language}class rr{constructor(T,x,j,Y,te,Me){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=j,this.projectId=Y,this.apiKey=te,this.appId=Me}fetch(T){var x=this;return(0,P.Z)(function*(){var j,Y,te;const[Me,ze]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),kt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},_t={sdk_version:x.sdkVersion,app_instance_id:Me,app_instance_id_token:ze,app_id:x.appId,language_code:Ou()},br={method:"POST",headers:Pt,body:JSON.stringify(_t)},ir=fetch(kt,br),Bo=new Promise((Ms,vi)=>{T.signal.addEventListener(()=>{const Ns=new Error("The operation was aborted.");Ns.name="AbortError",vi(Ns)})});let jo;try{yield Promise.race([ir,Bo]),jo=yield ir}catch(Ms){let vi="fetch-client-network";throw"AbortError"===(null===(j=Ms)||void 0===j?void 0:j.name)&&(vi="fetch-timeout"),Hn.create(vi,{originalErrorMessage:null===(Y=Ms)||void 0===Y?void 0:Y.message})}let os=jo.status;const fa=jo.headers.get("ETag")||void 0;let pa,so;if(200===jo.status){let Ms;try{Ms=yield jo.json()}catch(vi){throw Hn.create("fetch-client-parse",{originalErrorMessage:null===(te=vi)||void 0===te?void 0:te.message})}pa=Ms.entries,so=Ms.state}if("INSTANCE_STATE_UNSPECIFIED"===so?os=500:"NO_CHANGE"===so?os=304:("NO_TEMPLATE"===so||"EMPTY_CONFIG"===so)&&(pa={}),304!==os&&200!==os)throw Hn.create("fetch-status",{httpStatus:os});return{status:os,eTag:fa,config:pa}})()}}class Cs{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,P.Z)(function*(){const j=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,j)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:j}){var Y=this;return(0,P.Z)(function*(){yield function Gc(b,T){return new Promise((x,j)=>{const Y=Math.max(T-Date.now(),0),te=setTimeout(x,Y);b.addEventListener(()=>{clearTimeout(te),j(Hn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const te=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),te}catch(te){if(!function sg(b){if(!(b instanceof ue.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(te))throw te;const Me={throttleEndTimeMillis:Date.now()+(0,ue.$s)(j),backoffCount:j+1};return yield Y.storage.setThrottleMetadata(Me),Y.attemptFetch(T,Me)}})()}}class ag{constructor(T,x,j,Y,te){this.app=T,this._client=x,this._storageCache=j,this._storage=Y,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Va(b,T){var x;const j=b.target.error||void 0;return Hn.create(T,{originalErrorMessage:j&&(null===(x=j)||void 0===x?void 0:x.message)})}const ta="app_namespace_store";class zc{constructor(T,x,j,Y=function lg(){return new Promise((b,T)=>{var x;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=Y=>{T(Va(Y,"storage-open"))},j.onsuccess=Y=>{b(Y.target.result)},j.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(ta,{keyPath:"compositeKey"})}}catch(j){T(Hn.create("storage-open",{originalErrorMessage:null===(x=j)||void 0===x?void 0:x.message}))}})}()){this.appId=T,this.appName=x,this.namespace=j,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,P.Z)(function*(){const j=yield x.openDbPromise;return new Promise((Y,te)=>{var Me;const wt=j.transaction([ta],"readonly").objectStore(ta),kt=x.createCompositeKey(T);try{const Pt=wt.get(kt);Pt.onerror=_t=>{te(Va(_t,"storage-get"))},Pt.onsuccess=_t=>{const br=_t.target.result;Y(br?br.value:void 0)}}catch(Pt){te(Hn.create("storage-get",{originalErrorMessage:null===(Me=Pt)||void 0===Me?void 0:Me.message}))}})})()}set(T,x){var j=this;return(0,P.Z)(function*(){const Y=yield j.openDbPromise;return new Promise((te,Me)=>{var ze;const kt=Y.transaction([ta],"readwrite").objectStore(ta),Pt=j.createCompositeKey(T);try{const _t=kt.put({compositeKey:Pt,value:x});_t.onerror=br=>{Me(Va(br,"storage-set"))},_t.onsuccess=()=>{te()}}catch(_t){Me(Hn.create("storage-set",{originalErrorMessage:null===(ze=_t)||void 0===ze?void 0:ze.message}))}})})()}delete(T){var x=this;return(0,P.Z)(function*(){const j=yield x.openDbPromise;return new Promise((Y,te)=>{var Me;const wt=j.transaction([ta],"readwrite").objectStore(ta),kt=x.createCompositeKey(T);try{const Pt=wt.delete(kt);Pt.onerror=_t=>{te(Va(_t,"storage-delete"))},Pt.onsuccess=()=>{Y()}}catch(Pt){te(Hn.create("storage-delete",{originalErrorMessage:null===(Me=Pt)||void 0===Me?void 0:Me.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class na{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const x=T.storage.getLastFetchStatus(),j=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),te=yield x;te&&(T.lastFetchStatus=te);const Me=yield j;Me&&(T.lastSuccessfulFetchTimestampMillis=Me);const ze=yield Y;ze&&(T.activeConfig=ze)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function iy(){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,P.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(b){return!1}})).apply(this,arguments)}!function cg(){(0,se._registerComponent)(new ge.wA("remote-config",function b(T,{instanceIdentifier:x}){const j=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Hn.create("registration-window");if(!(0,ue.hl)())throw Hn.create("indexed-db-unavailable");const{projectId:te,apiKey:Me,appId:ze}=j.options;if(!te)throw Hn.create("registration-project-id");if(!Me)throw Hn.create("registration-api-key");if(!ze)throw Hn.create("registration-app-id");const wt=new zc(ze,j.name,x=x||"firebase"),kt=new na(wt),Pt=new he.Yd(ws);Pt.logLevel=he.in.ERROR;const _t=new rr(Y,se.SDK_VERSION,x,te,Me,ze),br=new Cs(_t,wt),ir=new $c(br,wt,kt,Pt),Bo=new ag(j,ir,kt,wt,Pt);return function yn(b){const T=(0,ue.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Bo),Bo},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(ws,"0.3.15"),(0,se.registerVersion)(ws,"0.3.15","esm2017")}();const qs="/firebase-messaging-sw.js",Mi="/firebase-cloud-messaging-push-scope",ra="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ja="google.c.a.c_id",tf="google.c.a.c_l",dg="google.c.a.ts",Io="google.c.a.e";var bs=(()=>{return(b=bs||(bs={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",bs;var b})();function $i(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zc(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(x),Y=new Uint8Array(j.length);for(let te=0;te<j.length;++te)Y[te]=j.charCodeAt(te);return Y}const Zr="fcm_token_details_db",Yc="fcm_token_object_Store";function Qc(b){return Fu.apply(this,arguments)}function Fu(){return Fu=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Zr))return null;let T=null;return(yield(0,ae.X3)(Zr,5,{upgrade:(j=(0,P.Z)(function*(Y,te,Me,ze){var wt;if(te<2||!Y.objectStoreNames.contains(Yc))return;const kt=ze.objectStore(Yc),Pt=yield kt.index("fcmSenderId").get(b);if(yield kt.clear(),Pt)if(2===te){const _t=Pt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;T={token:_t.fcmToken,createTime:null!==(wt=_t.createTime)&&void 0!==wt?wt:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:$i(_t.vapidKey)}}}else if(3===te){const _t=Pt;T={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:$i(_t.auth),p256dh:$i(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:$i(_t.vapidKey)}}}else if(4===te){const _t=Pt;T={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:$i(_t.auth),p256dh:$i(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:$i(_t.vapidKey)}}}}),function(te,Me,ze,wt){return j.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Zr),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),Lu(T)?T:null;var j}),Fu.apply(this,arguments)}function Lu(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Ds="firebase-messaging-store";let xl=null;function En(){return xl||(xl=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Ds)}})),xl}function Ha(b){return zs.apply(this,arguments)}function zs(){return(zs=(0,P.Z)(function*(b){const T=wr(b),j=yield(yield En()).transaction(Ds).objectStore(Ds).get(T);if(j)return j;{const Y=yield Qc(b.appConfig.senderId);if(Y)return yield vn(b,Y),Y}})).apply(this,arguments)}function vn(b,T){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,P.Z)(function*(b,T){const x=wr(b),Y=(yield En()).transaction(Ds,"readwrite");return yield Y.objectStore(Ds).put(T,x),yield Y.done,T})).apply(this,arguments)}function $a(b){return bo.apply(this,arguments)}function bo(){return(bo=(0,P.Z)(function*(b){const T=wr(b),j=(yield En()).transaction(Ds,"readwrite");yield j.objectStore(Ds).delete(T),yield j.done})).apply(this,arguments)}function wr({appConfig:b}){return b.appId}const $n=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ts(b,T){return Er.apply(this,arguments)}function Er(){return(Er=(0,P.Z)(function*(b,T){var x;const j=yield Zs(b),Y=Do(T),te={method:"POST",headers:j,body:JSON.stringify(Y)};let Me;try{Me=yield(yield fetch(Ks(b.appConfig),te)).json()}catch(ze){throw $n.create("token-subscribe-failed",{errorInfo:null===(x=ze)||void 0===x?void 0:x.toString()})}if(Me.error)throw $n.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw $n.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function ia(b,T){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,P.Z)(function*(b,T){var x;const j=yield Zs(b),Y=Do(T.subscriptionOptions),te={method:"PATCH",headers:j,body:JSON.stringify(Y)};let Me;try{Me=yield(yield fetch(`${Ks(b.appConfig)}/${T.token}`,te)).json()}catch(ze){throw $n.create("token-update-failed",{errorInfo:null===(x=ze)||void 0===x?void 0:x.toString()})}if(Me.error)throw $n.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw $n.create("token-update-no-token");return Me.token})).apply(this,arguments)}function Rl(b,T){return di.apply(this,arguments)}function di(){return(di=(0,P.Z)(function*(b,T){var x;const Y={method:"DELETE",headers:yield Zs(b)};try{const Me=yield(yield fetch(`${Ks(b.appConfig)}/${T}`,Y)).json();if(Me.error)throw $n.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(te){throw $n.create("token-unsubscribe-failed",{errorInfo:null===(x=te)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Ks({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Zs(b){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,P.Z)(function*({appConfig:b,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Do({p256dh:b,auth:T,endpoint:x,vapidKey:j}){const Y={web:{endpoint:x,auth:T,p256dh:b}};return j!==ra&&(Y.web.applicationPubKey=j),Y}const ju=6048e5;function Jc(b){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,P.Z)(function*(b){const T=yield Hu(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:$i(T.getKey("auth")),p256dh:$i(T.getKey("p256dh"))},j=yield Ha(b.firebaseDependencies);if(j){if(ed(j.subscriptionOptions,x))return Date.now()>=j.createTime+ju?nf(b,{token:j.token,createTime:Date.now(),subscriptionOptions:x}):j.token;try{yield Rl(b.firebaseDependencies,j.token)}catch(Y){console.warn(Y)}return Pe(b.firebaseDependencies,x)}return Pe(b.firebaseDependencies,x)})).apply(this,arguments)}function Xc(b){return sa.apply(this,arguments)}function sa(){return(sa=(0,P.Z)(function*(b){const T=yield Ha(b.firebaseDependencies);T&&(yield Rl(b.firebaseDependencies,T.token),yield $a(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function nf(b,T){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,P.Z)(function*(b,T){try{const x=yield ia(b.firebaseDependencies,T),j=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield vn(b.firebaseDependencies,j),x}catch(x){throw yield Xc(b),x}})).apply(this,arguments)}function Pe(b,T){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,P.Z)(function*(b,T){const j={token:yield Ts(b,T),createTime:Date.now(),subscriptionOptions:T};return yield vn(b,j),j.token})).apply(this,arguments)}function Hu(b,T){return An.apply(this,arguments)}function An(){return(An=(0,P.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zc(T)})})).apply(this,arguments)}function ed(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function Ss(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function es(b,T){if(!T.notification)return;b.notification={};const x=T.notification.title;x&&(b.notification.title=x);const j=T.notification.body;j&&(b.notification.body=j);const Y=T.notification.image;Y&&(b.notification.image=Y);const te=T.notification.icon;te&&(b.notification.icon=te)}(T,b),function Ml(b,T){!T.data||(b.data=T.data)}(T,b),function Wa(b,T){var x,j,Y,te,Me;if(!T.fcmOptions&&!(null===(x=T.notification)||void 0===x?void 0:x.click_action))return;b.fcmOptions={};const ze=null!==(Y=null===(j=T.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==Y?Y:null===(te=T.notification)||void 0===te?void 0:te.click_action;ze&&(b.fcmOptions.link=ze);const wt=null===(Me=T.fcmOptions)||void 0===Me?void 0:Me.analytics_label;wt&&(b.fcmOptions.analyticsLabel=wt)}(T,b),T}function rf(b){return"object"==typeof b&&!!b&&ja in b}function td(b,T){const x=[];for(let j=0;j<b.length;j++)x.push(b.charAt(j)),j<T.length&&x.push(T.charAt(j));return x.join("")}function To(b){return $n.create("missing-app-config-values",{valueName:b})}td("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),td("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Cr{constructor(T,x,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function nd(b){if(!b||!b.options)throw To("App Configuration Object");if(!b.name)throw To("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const j of T)if(!x[j])throw To(j);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:x,analyticsProvider:j}}_delete(){return Promise.resolve()}}function ts(b){return oa.apply(this,arguments)}function oa(){return(oa=(0,P.Z)(function*(b){var T;try{b.swRegistration=yield navigator.serviceWorker.register(qs,{scope:Mi}),b.swRegistration.update().catch(()=>{})}catch(x){throw $n.create("failed-service-worker-registration",{browserErrorMessage:null===(T=x)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function aa(b,T){return hi.apply(this,arguments)}function hi(){return(hi=(0,P.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield ts(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw $n.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function sf(b,T){return ua.apply(this,arguments)}function ua(){return(ua=(0,P.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=ra)})).apply(this,arguments)}function qa(){return(qa=(0,P.Z)(function*(b,T){if(!navigator)throw $n.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw $n.create("permission-blocked");return yield sf(b,null==T?void 0:T.vapidKey),yield aa(b,null==T?void 0:T.serviceWorkerRegistration),Jc(b)})).apply(this,arguments)}function Nl(b,T,x){return la.apply(this,arguments)}function la(){return(la=(0,P.Z)(function*(b,T,x){const j=id(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:x[ja],message_name:x[tf],message_time:x[dg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function id(b){switch(b){case bs.NOTIFICATION_CLICKED:return"notification_open";case bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function kl(){return(kl=(0,P.Z)(function*(b,T){const x=T.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===bs.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Ss(x)):b.onMessageHandler.next(Ss(x)));const j=x.data;rf(j)&&"1"===j[Io]&&(yield Nl(b,x.messageType,j))})).apply(this,arguments)}const za="@firebase/messaging",So=b=>{const T=new Cr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function sd(b,T){return kl.apply(this,arguments)}(T,x)),T},od=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:j=>function rd(b,T){return qa.apply(this,arguments)}(T,j)}};function $u(){return fi.apply(this,arguments)}function fi(){return(fi=(0,P.Z)(function*(){try{yield(0,ue.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function af(){(0,se._registerComponent)(new ge.wA("messaging",So,"PUBLIC")),(0,se._registerComponent)(new ge.wA("messaging-internal",od,"PRIVATE")),(0,se.registerVersion)(za,"0.11.0"),(0,se.registerVersion)(za,"0.11.0","esm2017")}();const ud="analytics",fg="firebase_id",Za="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ya="https://www.googletagmanager.com/gtag/js",hr=new he.Yd("@firebase/analytics");function cd(b){return Promise.all(b.map(T=>T.catch(x=>x)))}function pg(b,T){const x=document.createElement("script");x.src=`${Ya}?l=${b}&id=${T}`,x.async=!0,document.head.appendChild(x)}function ca(b,T,x,j,Y,te){return dd.apply(this,arguments)}function dd(){return(dd=(0,P.Z)(function*(b,T,x,j,Y,te){const Me=j[Y];try{if(Me)yield T[Me];else{const wt=(yield cd(x)).find(kt=>kt.measurementId===Y);wt&&(yield T[wt.appId])}}catch(ze){hr.error(ze)}b("config",Y,te)})).apply(this,arguments)}function Ol(b,T,x,j,Y){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,P.Z)(function*(b,T,x,j,Y){try{let te=[];if(Y&&Y.send_to){let Me=Y.send_to;Array.isArray(Me)||(Me=[Me]);const ze=yield cd(x);for(const wt of Me){const kt=ze.find(_t=>_t.measurementId===wt),Pt=kt&&T[kt.appId];if(!Pt){te=[];break}te.push(Pt)}}0===te.length&&(te=Object.values(T)),yield Promise.all(te),b("event",j,Y||{})}catch(te){hr.error(te)}})).apply(this,arguments)}function lf(b){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(Ya)&&x.src.includes(b))return x;return null}const Cn=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Pr=new class Qa{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function ln(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Js(b){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,P.Z)(function*(b){var T;const{appId:x,apiKey:j}=b,Y={method:"GET",headers:ln(j)},te=Za.replace("{app-id}",x),Me=yield fetch(te,Y);if(200!==Me.status&&304!==Me.status){let ze="";try{const wt=yield Me.json();(null===(T=wt.error)||void 0===T?void 0:T.message)&&(ze=wt.error.message)}catch(wt){}throw Cn.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:ze})}return Me.json()})).apply(this,arguments)}function sn(b){return gi.apply(this,arguments)}function gi(){return(gi=(0,P.Z)(function*(b,T=Pr,x){const{appId:j,apiKey:Y,measurementId:te}=b.options;if(!j)throw Cn.create("no-app-id");if(!Y){if(te)return{measurementId:te,appId:j};throw Cn.create("no-api-key")}const Me=T.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new Gn;return setTimeout((0,P.Z)(function*(){ze.abort()}),void 0!==x?x:6e4),Gu({appId:j,apiKey:Y,measurementId:te},Me,ze,T)})).apply(this,arguments)}function Gu(b,T,x){return ns.apply(this,arguments)}function ns(){return(ns=(0,P.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:x},j,Y=Pr){var te,Me;const{appId:ze,measurementId:wt}=b;try{yield Or(j,T)}catch(kt){if(wt)return hr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${wt} provided in the "measurementId" field in the local Firebase config. [${null===(te=kt)||void 0===te?void 0:te.message}]`),{appId:ze,measurementId:wt};throw kt}try{const kt=yield Js(b);return Y.deleteThrottleMetadata(ze),kt}catch(kt){const Pt=kt;if(!Ja(Pt)){if(Y.deleteThrottleMetadata(ze),wt)return hr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${wt} provided in the "measurementId" field in the local Firebase config. [${null==Pt?void 0:Pt.message}]`),{appId:ze,measurementId:wt};throw kt}const _t=503===Number(null===(Me=null==Pt?void 0:Pt.customData)||void 0===Me?void 0:Me.httpStatus)?(0,ue.$s)(x,Y.intervalMillis,30):(0,ue.$s)(x,Y.intervalMillis),br={throttleEndTimeMillis:Date.now()+_t,backoffCount:x+1};return Y.setThrottleMetadata(ze,br),hr.debug(`Calling attemptFetch again in ${_t} millis`),Gu(b,br,j,Y)}})).apply(this,arguments)}function Or(b,T){return new Promise((x,j)=>{const Y=Math.max(T-Date.now(),0),te=setTimeout(x,Y);b.addEventListener(()=>{clearTimeout(te),j(Cn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ja(b){if(!(b instanceof ue.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Gn{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Xa,ve;function Xs(){return(Xs=(0,P.Z)(function*(b,T,x,j,Y){if(Y&&Y.global)b("event",x,j);else{const te=yield T;b("event",x,Object.assign(Object.assign({},j),{send_to:te}))}})).apply(this,arguments)}function hd(b){ve=b}function rs(b){Xa=b}function ut(){return is.apply(this,arguments)}function is(){return(is=(0,P.Z)(function*(){var b;if(!(0,ue.hl)())return hr.warn(Cn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(T){return hr.warn(Cn.create("indexeddb-unavailable",{errorInfo:null===(b=T)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function xo(){return(xo=(0,P.Z)(function*(b,T,x,j,Y,te,Me){var ze;const wt=sn(b);wt.then(ir=>{x[ir.measurementId]=ir.appId,b.options.measurementId&&ir.measurementId!==b.options.measurementId&&hr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${ir.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ir=>hr.error(ir)),T.push(wt);const kt=ut().then(ir=>{if(ir)return j.getId()}),[Pt,_t]=yield Promise.all([wt,kt]);lf(te)||pg(te,Pt.measurementId),ve&&(Y("consent","default",ve),hd(void 0)),Y("js",new Date);const br=null!==(ze=null==Me?void 0:Me.config)&&void 0!==ze?ze:{};return br.origin="firebase",br.update=!0,null!=_t&&(br[fg]=_t),Y("config",Pt.measurementId,br),Xa&&(Y("set",Xa),rs(void 0)),Pt.measurementId})).apply(this,arguments)}class tu{constructor(T){this.app=T}_delete(){return delete Zn[this.app.options.appId],Promise.resolve()}}let Zn={},Ll=[];const Ro={};let ko,on,Mo="dataLayer",Po=!1;function fd(b,T,x){!function yi(){const b=[];if((0,ue.ru)()&&b.push("This is a browser extension environment."),(0,ue.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((j,Y)=>`(${Y+1}) ${j}`).join(" "),x=Cn.create("invalid-analytics-context",{errorInfo:T});hr.warn(x.message)}}();const j=b.options.appId;if(!j)throw Cn.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Cn.create("no-api-key");hr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zn[j])throw Cn.create("already-exists",{id:j});if(!Po){!function xs(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(Mo);const{wrappedGtag:te,gtagCore:Me}=function gg(b,T,x,j,Y){let te=function(...Me){window[j].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(te=window[Y]),window[Y]=function Fl(b,T,x,j){function te(){return(te=(0,P.Z)(function*(Me,ze,wt){try{"event"===Me?yield Ol(b,T,x,ze,wt):"config"===Me?yield ca(b,T,x,j,ze,wt):"consent"===Me?b("consent","update",wt):b("set",ze)}catch(kt){hr.error(kt)}})).apply(this,arguments)}return function Y(Me,ze,wt){return te.apply(this,arguments)}}(te,b,T,x),{gtagCore:te,wrappedGtag:window[Y]}}(Zn,Ll,Ro,Mo,"gtag");on=te,ko=Me,Po=!0}return Zn[j]=function Nt(b,T,x,j,Y,te,Me){return xo.apply(this,arguments)}(b,Ll,Ro,T,ko,Mo,x),new tu(b)}function pd(){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,P.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(b){return!1}})).apply(this,arguments)}const Vn="@firebase/analytics";!function Ni(){(0,se._registerComponent)(new ge.wA(ud,(T,{options:x})=>fd(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new ge.wA("analytics-internal",function b(T){try{const x=T.getProvider(ud).getImmediate();return{logEvent:(j,Y,te)=>function Fr(b,T,x,j){b=(0,ue.m9)(b),function bt(b,T,x,j,Y){return Xs.apply(this,arguments)}(on,Zn[b.app.options.appId],T,x,j).catch(Y=>hr.error(Y))}(x,j,Y,te)}}catch(x){throw Cn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(Vn,"0.8.4"),(0,se.registerVersion)(Vn,"0.8.4","esm2017")}();var pf=V(4408),Lr=V(7565);const Ul=new class ki extends Lr.v{}(class nu extends pf.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(T,x,j):(T.flush(this),0)}});var Oo=V(4986),ss=V(8505),da=V(5363),gf=V(9468);const _g=new f.GfV("7.4.1"),qu="__angularfire_symbol__analyticsIsSupportedValue",Fo="__angularfire_symbol__analyticsIsSupported",Vr="__angularfire_symbol__remoteConfigIsSupportedValue",Rs="__angularfire_symbol__remoteConfigIsSupported",ro="__angularfire_symbol__messagingIsSupportedValue",io="__angularfire_symbol__messagingIsSupported";function Zu(b,T,x){if(T){if(1===T.length)return T[0];const te=T.filter(Me=>Me.app===x);if(1===te.length)return te[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[Fo]||(globalThis[Fo]=pd().then(b=>globalThis[qu]=b).catch(()=>globalThis[qu]=!1)),globalThis[io]||(globalThis[io]=$u().then(b=>globalThis[ro]=b).catch(()=>globalThis[ro]=!1)),globalThis[Rs]||(globalThis[Rs]=iy().then(b=>globalThis[Vr]=b).catch(()=>globalThis[Vr]=!1));const _d=(b,T)=>{const x=T?[T]:(0,W.C6)(),j=[];return x.forEach(Y=>{Y.container.getProvider(b).instances.forEach(Me=>{j.includes(Me)||j.push(Me)})}),j};function Pi(){}class Lo{constructor(T,x=Ul){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,j){const Y=this.zone;return this.delegate.schedule(function(Me){Y.runGuarded(()=>{T.apply(this,[Me])})},x,j)}}class ha{constructor(T){this.zone=T,this.task=null}call(T,x){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pi,{},Pi,Pi)),x.pipe((0,ss.b)({next:j,complete:j,error:j})).subscribe(T).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Yu=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Lo(Zone.current)),this.insideAngular=x.run(()=>new Lo(Zone.current,Oo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Qr(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function jl(b){return b.pipe((0,da.Q)(Qr().outsideAngular))}function Qu(b){return Qr(),function Hl(b){return function(x){return(x=x.lift(new ha(b.ngZone))).pipe((0,gf.R)(b.outsideAngular),(0,da.Q)(b.insideAngular))}}(Qr())(b)}},8247:(it,Ce,V)=>{"use strict";V.d(Ce,{$:()=>Ks,A:()=>$,B:()=>Ie,G:()=>wn,H:()=>mn,J:()=>Cs,L:()=>K,M:()=>Ua,N:()=>Ba,P:()=>Oo,Q:()=>ja,R:()=>hf,T:()=>tf,U:()=>ra,V:()=>bs,W:()=>$i,X:()=>Qc,Y:()=>Bu,Z:()=>Ts,_:()=>ia,a:()=>ni,a0:()=>Jc,a1:()=>Xc,a2:()=>nf,a3:()=>Pe,a4:()=>Hu,a5:()=>ed,a6:()=>es,a7:()=>Ml,a8:()=>rf,a9:()=>td,aA:()=>q,aB:()=>wt,aC:()=>jl,aD:()=>Wi,aE:()=>$e,aI:()=>ln,aL:()=>Io,aa:()=>ts,ab:()=>aa,ac:()=>sf,af:()=>Nl,ag:()=>id,ah:()=>sd,ak:()=>Ds,al:()=>Pl,an:()=>Ya,ao:()=>dd,ap:()=>be,aq:()=>ot,ar:()=>nt,as:()=>He,at:()=>Id,au:()=>fa,av:()=>dn,aw:()=>Oe,ax:()=>ie,ay:()=>ir,az:()=>re,b:()=>Cn,c:()=>ro,d:()=>Bl,e:()=>zu,f:()=>Hl,g:()=>j,h:()=>b,i:()=>is,j:()=>Me,k:()=>Cf,l:()=>Wu,m:()=>ly,o:()=>ae,r:()=>pf,s:()=>ff,u:()=>Ul});var f=V(5861),W=V(2090),P=V(9681),se=V(1877),ue=V(655),ge=V(4859);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ie=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},je=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new se.Yd("@firebase/auth");function We(w,...g){De.logLevel<=se.in.ERROR&&De.error(`Auth (${P.SDK_VERSION}): ${w}`,...g)}function He(w,...g){throw qe(w,...g)}function Oe(w,...g){return qe(w,...g)}function Re(w,g,_){const C=Object.assign(Object.assign({},Ve()),{[g]:_});return new W.LL("auth","Firebase",C).create(g,{appName:w.name})}function Se(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&He(w,"argument-error"),Re(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(w,...g){if("string"!=typeof w){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=w.name),w._errorFactory.create(_,...C)}return je.create(w,...g)}function ie(w,g,..._){if(!w)throw qe(g,..._)}function ye(w){const g="INTERNAL ASSERTION FAILED: "+w;throw We(g),new Error(g)}function be(w,g){w||ye(g)}const J=new Map;function re(w){be(w instanceof Function,"Expected a class definition");let g=J.get(w);return g?(be(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,J.set(w,g),g)}function de(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ue(){return"http:"===gt()||"https:"===gt()}function gt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ye{constructor(g,_){this.shortDelay=g,this.longDelay=_,be(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function tn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ue()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fn(w,g){be(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Tn{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Ye(3e4,6e4);function Ht(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Yt(w,g,_,C){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,f.Z)(function*(w,g,_,C,R={}){return ei(w,R,(0,f.Z)(function*(){let L={},ne={};C&&("GET"===g?ne=C:L={body:JSON.stringify(C)});const Ne=(0,W.xO)(Object.assign({key:w.config.apiKey},ne)).slice(1),rt=yield w._getAdditionalHeaders();return rt["Content-Type"]="application/json",w.languageCode&&(rt["X-Firebase-Locale"]=w.languageCode),Tn.fetch()(Ti(w,w.config.apiHost,_,Ne),Object.assign({method:g,headers:rt,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function ei(w,g,_){return ui.apply(this,arguments)}function ui(){return(ui=(0,f.Z)(function*(w,g,_){w._canInitEmulator=!1;const C=Object.assign(Object.assign({},pn),g);try{const R=new Si(w),L=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const ne=yield L.json();if("needConfirmation"in ne)throw Bn(w,"account-exists-with-different-credential",ne);if(L.ok&&!("errorMessage"in ne))return ne;{const Ne=L.ok?ne.errorMessage:ne.error.message,[rt,lt]=Ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rt)throw Bn(w,"credential-already-in-use",ne);if("EMAIL_EXISTS"===rt)throw Bn(w,"email-already-in-use",ne);if("USER_DISABLED"===rt)throw Bn(w,"user-disabled",ne);const St=C[rt]||rt.toLowerCase().replace(/[_\s]+/g,"-");if(lt)throw Re(w,St,lt);He(w,St)}}catch(R){if(R instanceof W.ZR)throw R;He(w,"network-request-failed")}})).apply(this,arguments)}function Ln(w,g,_,C){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,f.Z)(function*(w,g,_,C,R={}){const L=yield Yt(w,g,_,C,R);return"mfaPendingCredential"in L&&He(w,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Ti(w,g,_,C){const R=`${g}${_}?${C}`;return w.config.emulator?fn(w.config,R):`${w.config.apiScheme}://${R}`}class Si{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Oe(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bn(w,g,_){const C={appName:w.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const R=Oe(w,g,C);return R.customData._tokenResponse=_,R}function vt(){return(vt=(0,f.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Mr(w,g){return bn.apply(this,arguments)}function bn(){return(bn=(0,f.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function gn(w,g){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Wr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function lr(){return(lr=(0,f.Z)(function*(w,g=!1){const _=(0,W.m9)(w),C=yield _.getIdToken(g),R=Kt(C);ie(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const L="object"==typeof R.firebase?R.firebase:void 0,ne=null==L?void 0:L.sign_in_provider;return{claims:R,token:C,authTime:Wr(vs(R.auth_time)),issuedAtTime:Wr(vs(R.iat)),expirationTime:Wr(vs(R.exp)),signInProvider:ne||null,signInSecondFactor:(null==L?void 0:L.sign_in_second_factor)||null}})).apply(this,arguments)}function vs(w){return 1e3*Number(w)}function Kt(w){var g;const[_,C,R]=w.split(".");if(void 0===_||void 0===C||void 0===R)return We("JWT malformed, contained fewer than 3 sections"),null;try{const L=(0,W.tV)(C);return L?JSON.parse(L):(We("Failed to decode base64 JWT payload"),null)}catch(L){return We("Caught error parsing JWT payload as JSON",null===(g=L)||void 0===g?void 0:g.toString()),null}}function st(w,g){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,f.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof W.ZR&&zr(C)&&w.auth.currentUser===w&&(yield w.auth.signOut()),C}})).apply(this,arguments)}function zr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Zt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,f.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(_=C)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class ji{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wr(this.lastLoginAt),this.creationTime=Wr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jn(w){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(w){var g;const _=w.auth,C=yield w.getIdToken(),R=yield st(w,gn(_,{idToken:C}));ie(null==R?void 0:R.users.length,_,"internal-error");const L=R.users[0];w._notifyReloadListener(L);const ne=(null===(g=L.providerUserInfo)||void 0===g?void 0:g.length)?tr(L.providerUserInfo):[],Ne=Gt(w.providerData,ne),St=!!w.isAnonymous&&!(w.email&&L.passwordHash||(null==Ne?void 0:Ne.length)),Pn={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Ne,metadata:new ji(L.createdAt,L.lastLoginAt),isAnonymous:St};Object.assign(w,Pn)})).apply(this,arguments)}function li(){return(li=(0,f.Z)(function*(w){const g=(0,W.m9)(w);yield jn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Gt(w,g){return[...w.filter(C=>!g.some(R=>R.providerId===C.providerId)),...g]}function tr(w){return w.map(g=>{var{providerId:_}=g,C=(0,ue._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Ae(){return(Ae=(0,f.Z)(function*(w,g){const _=yield ei(w,{},(0,f.Z)(function*(){const C=(0,W.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:L}=w.config,ne=Ti(w,R,"/v1/token",`key=${L}`),Ne=yield w._getAdditionalHeaders();return Ne["Content-Type"]="application/x-www-form-urlencoded",Tn.fetch()(ne,{method:"POST",headers:Ne,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ke{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ie(g.idToken,"internal-error"),ie(void 0!==g.idToken,"internal-error"),ie(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function mt(w){const g=Kt(w);return ie(g,"internal-error"),ie(void 0!==g.exp,"internal-error"),ie(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,f.Z)(function*(){return ie(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,f.Z)(function*(){const{accessToken:R,refreshToken:L,expiresIn:ne}=yield function et(w,g){return Ae.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(R,L,Number(ne))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:R,expirationTime:L}=_,ne=new Ke;return C&&(ie("string"==typeof C,"internal-error",{appName:g}),ne.refreshToken=C),R&&(ie("string"==typeof R,"internal-error",{appName:g}),ne.accessToken=R),L&&(ie("number"==typeof L,"internal-error",{appName:g}),ne.expirationTime=L),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ke,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Dt(w,g){ie("string"==typeof w||void 0===w,"internal-error",{appName:g})}class It{constructor(g){var{uid:_,auth:C,stsTokenManager:R}=g,L=(0,ue._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new ji(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,f.Z)(function*(){const C=yield st(_,_.stsTokenManager.getToken(_.auth,g));return ie(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function Sn(w){return lr.apply(this,arguments)}(this,g)}reload(){return function yt(w){return li.apply(this,arguments)}(this)}_assign(g){this!==g&&(ie(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new It(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,f.Z)(function*(){let R=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield jn(C)),yield C.auth._persistUserIfCurrent(C),R&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,f.Z)(function*(){const _=yield g.getIdToken();return yield st(g,function Qi(w,g){return vt.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,R,L,ne,Ne,rt,lt,St;const Pn=null!==(C=_.displayName)&&void 0!==C?C:void 0,us=null!==(R=_.email)&&void 0!==R?R:void 0,oo=null!==(L=_.phoneNumber)&&void 0!==L?L:void 0,xn=null!==(ne=_.photoURL)&&void 0!==ne?ne:void 0,zl=null!==(Ne=_.tenantId)&&void 0!==Ne?Ne:void 0,ou=null!==(rt=_._redirectEventId)&&void 0!==rt?rt:void 0,el=null!==(lt=_.createdAt)&&void 0!==lt?lt:void 0,Df=null!==(St=_.lastLoginAt)&&void 0!==St?St:void 0,{uid:au,emailVerified:Tg,isAnonymous:Dd,providerData:Tf,stsTokenManager:sr}=_;ie(au&&sr,g,"internal-error");const Kl=Ke.fromJSON(this.name,sr);ie("string"==typeof au,g,"internal-error"),Dt(Pn,g.name),Dt(us,g.name),ie("boolean"==typeof Tg,g,"internal-error"),ie("boolean"==typeof Dd,g,"internal-error"),Dt(oo,g.name),Dt(xn,g.name),Dt(zl,g.name),Dt(ou,g.name),Dt(el,g.name),Dt(Df,g.name);const ao=new It({uid:au,auth:g,email:us,emailVerified:Tg,displayName:Pn,isAnonymous:Dd,photoURL:xn,phoneNumber:oo,tenantId:zl,stsTokenManager:Kl,createdAt:el,lastLoginAt:Df});return Tf&&Array.isArray(Tf)&&(ao.providerData=Tf.map(Td=>Object.assign({},Td))),ou&&(ao._redirectEventId=ou),ao}static _fromIdTokenResponse(g,_,C=!1){return(0,f.Z)(function*(){const R=new Ke;R.updateFromServerResponse(_);const L=new It({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:C});return yield jn(L),L})()}}const K=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,C){var R=this;return(0,f.Z)(function*(){R.storage[_]=C})()}_get(_){var C=this;return(0,f.Z)(function*(){const R=C.storage[_];return void 0===R?null:R})()}_remove(_){var C=this;return(0,f.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return w.type="NONE",w})();function q(w,g,_){return`firebase:${w}:${g}:${_}`}class Q{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:R,name:L}=this.auth;this.fullUserKey=q(this.userKey,R.apiKey,L),this.fullPersistenceKey=q("persistence",R.apiKey,L),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?It._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,f.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,f.Z)(function*(){if(!_.length)return new Q(re(K),g,C);const R=(yield Promise.all(_.map(function(){var lt=(0,f.Z)(function*(St){if(yield St._isAvailable())return St});return function(St){return lt.apply(this,arguments)}}()))).filter(lt=>lt);let L=R[0]||re(K);const ne=q(C,g.config.apiKey,g.name);let Ne=null;for(const lt of _)try{const St=yield lt._get(ne);if(St){const Pn=It._fromJSON(g,St);lt!==L&&(Ne=Pn),L=lt;break}}catch(St){}const rt=R.filter(lt=>lt._shouldAllowMigration);return L._shouldAllowMigration&&rt.length?(L=rt[0],Ne&&(yield L._set(ne,Ne.toJSON())),yield Promise.all(_.map(function(){var lt=(0,f.Z)(function*(St){if(St!==L)try{yield St._remove(ne)}catch(Pn){}});return function(St){return lt.apply(this,arguments)}}())),new Q(L,g,C)):new Q(L,g,C)})()}}function H(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Le(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(k(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ft(g))return"Blackberry";if(Mt(g))return"Webos";if(B(g))return"Safari";if((g.includes("chrome/")||le(g))&&!g.includes("edge/"))return"Chrome";if(nt(g))return"Android";{const C=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function k(w=(0,W.z$)()){return/firefox\//i.test(w)}function B(w=(0,W.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function le(w=(0,W.z$)()){return/crios\//i.test(w)}function Le(w=(0,W.z$)()){return/iemobile/i.test(w)}function nt(w=(0,W.z$)()){return/android/i.test(w)}function ft(w=(0,W.z$)()){return/blackberry/i.test(w)}function Mt(w=(0,W.z$)()){return/webos/i.test(w)}function ot(w=(0,W.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function dn(w=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Kr(w=(0,W.z$)()){return ot(w)||nt(w)||Mt(w)||ft(w)||/windows phone/i.test(w)||Le(w)}function vr(w,g=[]){let _;switch(w){case"Browser":_=H((0,W.z$)());break;case"Worker":_=`${H((0,W.z$)())}-${w}`;break;default:_=w}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${P.SDK_VERSION}/${C}`}class La{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=L=>new Promise((ne,Ne)=>{try{ne(g(L))}catch(rt){Ne(rt)}});C.onAbort=_,this.queue.push(C);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,f.Z)(function*(){var C;if(_.auth.currentUser===g)return;const R=[];try{for(const L of _.queue)yield L(g),L.onAbort&&R.push(L.onAbort)}catch(L){R.reverse();for(const ne of R)try{ne()}catch(Ne){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=L)||void 0===C?void 0:C.message})}})()}}class ci{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jt(this),this.idTokenSubscription=new jt(this),this.beforeStateQueue=new La(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=je,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=re(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var R,L;if(!C._deleted&&(C.persistenceManager=yield Q.create(C,g),!C._deleted)){if(null===(R=C._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(ne){}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(L=C.currentUser)||void 0===L?void 0:L.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,f.Z)(function*(){var C;const R=yield _.assertedPersistence.getCurrentUser();let L=R,ne=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ne=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,rt=null==L?void 0:L._redirectEventId,lt=yield _.tryRedirectSignIn(g);(!Ne||Ne===rt)&&(null==lt?void 0:lt.user)&&(L=lt.user,ne=!0)}if(!L)return _.directlySetCurrentUser(null);if(!L._redirectEventId){if(ne)try{yield _.beforeStateQueue.runMiddleware(L)}catch(Ne){L=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ne))}return L?_.reloadAndSetCurrentUserOrClear(L):_.directlySetCurrentUser(null)}return ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===L._redirectEventId?_.directlySetCurrentUser(L):_.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(g){var _=this;return(0,f.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(R){yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,f.Z)(function*(){var C;try{yield jn(g)}catch(R){if("auth/network-request-failed"!==(null===(C=R)||void 0===C?void 0:C.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ut(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,f.Z)(function*(){const C=g?(0,W.m9)(g):null;return C&&ie(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,f.Z)(function*(){if(!C._deleted)return g&&ie(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,f.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(re(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new W.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,f.Z)(function*(){const R=yield C.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&re(g)||_._popupRedirectResolver;ie(C,_,"argument-error"),_.redirectPersistenceManager=yield Q.create(_,[re(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,f.Z)(function*(){var C,R;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,f.Z)(function*(){if(g===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,R){if(this._deleted)return()=>{};const L="function"==typeof _?_:_.next.bind(_),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(ne,this,"internal-error"),ne.then(()=>L(this.currentUser)),"function"==typeof _?g.addObserver(_,C,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=vr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return R&&(C["X-Firebase-Client"]=R),C})()}}function $e(w){return(0,W.m9)(w)}class jt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,W.ne)(_=>this.observer=_)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wn(w,g,_){const C=$e(w);ie(C._canInitEmulator,C,"emulator-config-failed"),ie(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const R=!!(null==_?void 0:_.disableWarnings),L=ti(g),{host:ne,port:Ne}=function ws(w){const g=ti(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(C);if(R){const L=R[1];return{host:L,port:zn(C.substr(L.length+1))}}{const[L,ne]=C.split(":");return{host:L,port:zn(ne)}}}(g);C.config.emulator={url:`${L}//${ne}${null===Ne?"":`:${Ne}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:ne,port:Ne,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function Es(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function ti(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function zn(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class mn{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return ye("not implemented")}_getIdTokenResponse(g){return ye("not implemented")}_linkToIdToken(g,_){return ye("not implemented")}_getReauthenticationResolver(g){return ye("not implemented")}}function vo(w,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:resetPassword",Ht(w,g))})).apply(this,arguments)}function Ot(w,g){return wo.apply(this,arguments)}function wo(){return(wo=(0,f.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function $s(w,g){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:update",Ht(w,g))})).apply(this,arguments)}function nr(){return(nr=(0,f.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithPassword",Ht(w,g))})).apply(this,arguments)}function Gs(w,g){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,f.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:sendOobCode",Ht(w,g))})).apply(this,arguments)}function dr(w,g){return yn.apply(this,arguments)}function yn(){return(yn=(0,f.Z)(function*(w,g){return Gs(w,g)})).apply(this,arguments)}function jc(w,g){return Co.apply(this,arguments)}function Co(){return(Co=(0,f.Z)(function*(w,g){return Gs(w,g)})).apply(this,arguments)}function Hi(w,g){return xi.apply(this,arguments)}function xi(){return(xi=(0,f.Z)(function*(w,g){return Gs(w,g)})).apply(this,arguments)}function Hc(w,g){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,f.Z)(function*(w,g){return Gs(w,g)})).apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithEmailLink",Ht(w,g))})).apply(this,arguments)}function $c(){return($c=(0,f.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithEmailLink",Ht(w,g))})).apply(this,arguments)}class Ou extends mn{constructor(g,_,C,R=null){super("password",C),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new Ou(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new Ou(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function ea(w,g){return nr.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ws(w,g){return Ri.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:He(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,f.Z)(function*(){switch(C.signInMethod){case"password":return Ot(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Xh(w,g){return $c.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:He(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function rr(w,g){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,f.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithIdp",Ht(w,g))})).apply(this,arguments)}class Cs extends mn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Cs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):He("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:R}=_,L=(0,ue._T)(_,["providerId","signInMethod"]);if(!C||!R)return null;const ne=new Cs(C,R);return ne.idToken=L.idToken||void 0,ne.accessToken=L.accessToken||void 0,ne.secret=L.secret,ne.nonce=L.nonce,ne.pendingToken=L.pendingToken||null,ne}_getIdTokenResponse(g){return rr(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,rr(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,rr(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,W.xO)(_)}return g}}function og(w,g){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,f.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:sendVerificationCode",Ht(w,g))})).apply(this,arguments)}function Va(){return(Va=(0,f.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,g))})).apply(this,arguments)}function qc(){return(qc=(0,f.Z)(function*(w,g){const _=yield Ln(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,g));if(_.temporaryProof)throw Bn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const ug={USER_NOT_FOUND:"user-not-found"};function zc(){return(zc=(0,f.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),ug)})).apply(this,arguments)}class na extends mn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new na({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new na({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function ag(w,g){return Va.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function ta(w,g){return qc.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function lg(w,g){return zc.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:R,temporaryProof:L}=g;return C||_||R||L?new na({verificationId:_,verificationCode:C,phoneNumber:R,temporaryProof:L}):null}}class Is{constructor(g){var _,C,R,L,ne,Ne;const rt=(0,W.zd)((0,W.pd)(g)),lt=null!==(_=rt.apiKey)&&void 0!==_?_:null,St=null!==(C=rt.oobCode)&&void 0!==C?C:null,Pn=function cg(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=rt.mode)&&void 0!==R?R:null);ie(lt&&St&&Pn,"argument-error"),this.apiKey=lt,this.operation=Pn,this.code=St,this.continueUrl=null!==(L=rt.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(ne=rt.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(Ne=rt.tenantId)&&void 0!==Ne?Ne:null}static parseLink(g){const _=function ef(w){const g=(0,W.zd)((0,W.pd)(w)).link,_=g?(0,W.zd)((0,W.pd)(g)).deep_link_id:null,C=(0,W.zd)((0,W.pd)(w)).deep_link_id;return(C?(0,W.zd)((0,W.pd)(C)).link:null)||C||_||g||w}(g);try{return new Is(_)}catch(C){return null}}}let Ua=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,C){return Ou._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const R=Is.parseLink(C);return ie(R,"argument-error"),Ou._fromEmailAndCode(_,R.code,R.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class qs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Mi extends qs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ra extends Mi{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ie("providerId"in _&&"signInMethod"in _,"argument-error"),Cs._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ie(g.idToken||g.accessToken,"argument-error"),Cs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ra.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ra.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:R,pendingToken:L,nonce:ne,providerId:Ne}=g;if(!C&&!R&&!_&&!L||!Ne)return null;try{return new ra(Ne)._credential({idToken:_,accessToken:C,nonce:ne,pendingToken:L})}catch(rt){return null}}}let Ba=(()=>{class w extends Mi{constructor(){super("facebook.com")}static credential(_){return Cs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(C){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ja=(()=>{class w extends Mi{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Cs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:R}=_;if(!C&&!R)return null;try{return w.credential(C,R)}catch(L){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),tf=(()=>{class w extends Mi{constructor(){super("github.com")}static credential(_){return Cs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(C){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Io extends mn{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return rr(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,rr(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,rr(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:R,pendingToken:L}=_;return C&&R&&L&&C===R?new Io(C,L):null}static _create(g,_){return new Io(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bs extends qs{constructor(g){ie(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return bs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return bs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Io.fromJSON(g);return ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return Io._create(C,_)}catch(R){return null}}}let $i=(()=>{class w extends Mi{constructor(){super("twitter.com")}static credential(_,C){return Cs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:R}=_;if(!C||!R)return null;try{return w.credential(C,R)}catch(L){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Zc(w,g){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,f.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signUp",Ht(w,g))})).apply(this,arguments)}class Yr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,R=!1){return(0,f.Z)(function*(){const L=yield It._fromIdTokenResponse(g,C,R),ne=Yc(C);return new Yr({user:L,providerId:ne,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const R=Yc(C);return new Yr({user:g,providerId:R,_tokenResponse:C,operationType:_})})()}}function Yc(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Qc(w){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,f.Z)(function*(w){var g;const _=$e(w);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new Yr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Zc(_,{returnSecureToken:!0}),R=yield Yr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Lu extends W.ZR{constructor(g,_,C,R){var L;super(_.code,_.message),this.operationType=C,this.user=R,Object.setPrototypeOf(this,Lu.prototype),this.customData={appName:g.name,tenantId:null!==(L=g.tenantId)&&void 0!==L?L:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,R){return new Lu(g,_,C,R)}}function Vu(w,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?Lu._fromErrorAndOperation(w,L,g,C):L})}function Al(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Ds(w,g){return xl.apply(this,arguments)}function xl(){return(xl=(0,f.Z)(function*(w,g){const _=(0,W.m9)(w);yield zs(!0,_,g);const{providerUserInfo:C}=yield Mr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=Al(C||[]);return _.providerData=_.providerData.filter(L=>R.has(L.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function En(w,g){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,f.Z)(function*(w,g,_=!1){const C=yield st(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Yr._forOperation(w,"link",C)})).apply(this,arguments)}function zs(w,g,_){return vn.apply(this,arguments)}function vn(){return(vn=(0,f.Z)(function*(w,g,_){yield jn(g);const R=!1===w?"provider-already-linked":"no-such-provider";ie(Al(g.providerData).has(_)===w,g.auth,R)})).apply(this,arguments)}function Uu(w,g){return $a.apply(this,arguments)}function $a(){return($a=(0,f.Z)(function*(w,g,_=!1){var C;const{auth:R}=w,L="reauthenticate";try{const ne=yield st(w,Vu(R,L,g,w),_);ie(ne.idToken,R,"internal-error");const Ne=Kt(ne.idToken);ie(Ne,R,"internal-error");const{sub:rt}=Ne;return ie(w.uid===rt,R,"user-mismatch"),Yr._forOperation(w,L,ne)}catch(ne){throw"auth/user-not-found"===(null===(C=ne)||void 0===C?void 0:C.code)&&He(R,"user-mismatch"),ne}})).apply(this,arguments)}function bo(w,g){return wr.apply(this,arguments)}function wr(){return(wr=(0,f.Z)(function*(w,g,_=!1){const C="signIn",R=yield Vu(w,C,g),L=yield Yr._fromIdTokenResponse(w,C,R);return _||(yield w._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Bu(w,g){return $n.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(w,g){return bo($e(w),g)})).apply(this,arguments)}function Ts(w,g){return Er.apply(this,arguments)}function Er(){return(Er=(0,f.Z)(function*(w,g){const _=(0,W.m9)(w);return yield zs(!1,_,g.providerId),En(_,g)})).apply(this,arguments)}function ia(w,g){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,f.Z)(function*(w,g){return Uu((0,W.m9)(w),g)})).apply(this,arguments)}function Rl(w,g){return di.apply(this,arguments)}function di(){return(di=(0,f.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithCustomToken",Ht(w,g))})).apply(this,arguments)}function Ks(w,g){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(w,g){const _=$e(w),C=yield Rl(_,{token:g,returnSecureToken:!0}),R=yield Yr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Tt{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Do._fromServerResponse(g,_):He(g,"internal-error")}}class Do extends Tt{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Do(_)}}function ju(w,g,_){var C;ie((null===(C=_.url)||void 0===C?void 0:C.length)>0,w,"invalid-continue-uri"),ie(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ie(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ie(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Jc(w,g,_){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,f.Z)(function*(w,g,_){const C=(0,W.m9)(w),R={requestType:"PASSWORD_RESET",email:g};_&&ju(C,R,_),yield jc(C,R)})).apply(this,arguments)}function Xc(w,g,_){return sa.apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(w,g,_){yield vo((0,W.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function nf(w,g){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(w,g){yield $s((0,W.m9)(w),{oobCode:g})})).apply(this,arguments)}function Pe(w,g){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,f.Z)(function*(w,g){const _=(0,W.m9)(w),C=yield vo(_,{oobCode:g}),R=C.requestType;switch(ie(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(C.mfaInfo,_,"internal-error");default:ie(C.email,_,"internal-error")}let L=null;return C.mfaInfo&&(L=Tt._fromServerResponse($e(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:L},operation:R}})).apply(this,arguments)}function Hu(w,g){return An.apply(this,arguments)}function An(){return(An=(0,f.Z)(function*(w,g){const{data:_}=yield Pe((0,W.m9)(w),g);return _.email})).apply(this,arguments)}function ed(w,g,_){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,f.Z)(function*(w,g,_){const C=$e(w),R=yield Zc(C,{returnSecureToken:!0,email:g,password:_}),L=yield Yr._fromIdTokenResponse(C,"signIn",R);return yield C._updateCurrentUser(L.user),L})).apply(this,arguments)}function es(w,g,_){return Bu((0,W.m9)(w),Ua.credential(g,_))}function Ml(w,g,_){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,f.Z)(function*(w,g,_){const C=(0,W.m9)(w),R={requestType:"EMAIL_SIGNIN",email:g};ie(_.handleCodeInApp,C,"argument-error"),_&&ju(C,R,_),yield Hi(C,R)})).apply(this,arguments)}function rf(w,g){const _=Is.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function td(w,g,_){return nd.apply(this,arguments)}function nd(){return(nd=(0,f.Z)(function*(w,g,_){const C=(0,W.m9)(w),R=Ua.credentialWithLink(g,_||de());return ie(R._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Bu(C,R)})).apply(this,arguments)}function To(w,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,f.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:createAuthUri",Ht(w,g))})).apply(this,arguments)}function ts(w,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,f.Z)(function*(w,g){const C={identifier:g,continueUri:Ue()?de():"http://localhost"},{signinMethods:R}=yield To((0,W.m9)(w),C);return R||[]})).apply(this,arguments)}function aa(w,g){return hi.apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(w,g){const _=(0,W.m9)(w),R={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&ju(_.auth,R,g);const{email:L}=yield dr(_.auth,R);L!==w.email&&(yield w.reload())})).apply(this,arguments)}function sf(w,g,_){return ua.apply(this,arguments)}function ua(){return(ua=(0,f.Z)(function*(w,g,_){const C=(0,W.m9)(w),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&ju(C.auth,L,_);const{email:ne}=yield Hc(C.auth,L);ne!==w.email&&(yield w.reload())})).apply(this,arguments)}function rd(w,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,f.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Nl(w,g){return la.apply(this,arguments)}function la(){return(la=(0,f.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,W.m9)(w),L={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},ne=yield st(C,rd(C.auth,L));C.displayName=ne.displayName||null,C.photoURL=ne.photoUrl||null;const Ne=C.providerData.find(({providerId:rt})=>"password"===rt);Ne&&(Ne.displayName=C.displayName,Ne.photoURL=C.photoURL),yield C._updateTokensIfNecessary(ne)})).apply(this,arguments)}function id(w,g){return kl((0,W.m9)(w),g,null)}function sd(w,g){return kl((0,W.m9)(w),null,g)}function kl(w,g,_){return za.apply(this,arguments)}function za(){return(za=(0,f.Z)(function*(w,g,_){const{auth:C}=w,L={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(L.email=g),_&&(L.password=_);const ne=yield st(w,Ot(C,L));yield w._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class So{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class od extends So{constructor(g,_,C,R){super(g,_,C),this.username=R}}class af extends So{constructor(g,_){super(g,"facebook.com",_)}}class $u extends od{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class fi extends So{constructor(g,_){super(g,"google.com",_)}}class uf extends od{constructor(g,_,C){super(g,"twitter.com",_,C)}}function Pl(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ka(w){var g,_;if(!w)return null;const{providerId:C}=w,R=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},L=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!C&&(null==w?void 0:w.idToken)){const ne=null===(_=null===(g=Kt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(ne)return new So(L,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!C)return null;switch(C){case"facebook.com":return new af(L,R);case"github.com":return new $u(L,R);case"google.com":return new fi(L,R);case"twitter.com":return new uf(L,R,w.screenName||null);case"custom":case"anonymous":return new So(L,null);default:return new So(L,C,R)}}(_)}class As{constructor(g,_,C){this.type=g,this.credential=_,this.auth=C}static _fromIdtoken(g,_){return new As("enroll",g,_)}static _fromMfaPendingCredential(g){return new As("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return As._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(C=g.multiFactorSession)||void 0===C?void 0:C.idToken)return As._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Za{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=$e(g),R=_.customData._serverResponse,L=(R.mfaInfo||[]).map(Ne=>Tt._fromServerResponse(C,Ne));ie(R.mfaPendingCredential,C,"internal-error");const ne=As._fromMfaPendingCredential(R.mfaPendingCredential);return new Za(ne,L,function(){var Ne=(0,f.Z)(function*(rt){const lt=yield rt._process(C,ne);delete R.mfaInfo,delete R.mfaPendingCredential;const St=Object.assign(Object.assign({},R),{idToken:lt.idToken,refreshToken:lt.refreshToken});switch(_.operationType){case"signIn":const Pn=yield Yr._fromIdTokenResponse(C,_.operationType,St);return yield C._updateCurrentUser(Pn.user),Pn;case"reauthenticate":return ie(_.user,C,"internal-error"),Yr._forOperation(_.user,_.operationType,St);default:He(C,"internal-error")}});return function(rt){return Ne.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,f.Z)(function*(){return _.signInResolver(g)})()}}function Ya(w,g){var _;const C=(0,W.m9)(w),R=g;return ie(g.customData.operationType,C,"argument-error"),ie(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Za._fromError(C,R)}function hr(w,g){return Yt(w,"POST","/v2/accounts/mfaEnrollment:start",Ht(w,g))}class xs{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Tt._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new xs(g)}getSession(){var g=this;return(0,f.Z)(function*(){return As._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var C=this;return(0,f.Z)(function*(){const R=g,L=yield C.getSession(),ne=yield st(C.user,R._process(C.user.auth,L,_));return yield C.user._updateTokensIfNecessary(ne),C.user.reload()})()}unenroll(g){var _=this;return(0,f.Z)(function*(){var C;const R="string"==typeof g?g:g.uid,L=yield _.user.getIdToken(),ne=yield st(_.user,function pg(w,g){return Yt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(w,g))}(_.user.auth,{idToken:L,mfaEnrollmentId:R}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Ne})=>Ne!==R),yield _.user._updateTokensIfNecessary(ne);try{yield _.user.reload()}catch(Ne){if("auth/user-token-expired"!==(null===(C=Ne)||void 0===C?void 0:C.code))throw Ne}})()}}const ca=new WeakMap;function dd(w){const g=(0,W.m9)(w);return ca.has(g)||ca.set(g,xs._fromUser(g)),ca.get(g)}const Ol="__sak";class Ao{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ol,"1"),this.storage.removeItem(Ol),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Cn=(()=>{class w extends Ao{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fl(){const w=(0,W.z$)();return B(w)||ot(w)}()&&function Ji(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Kr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const R=this.storage.getItem(C),L=this.localCache[C];R!==L&&_(C,L,R)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((Ne,rt,lt)=>{this.notifyListeners(Ne,lt)});const R=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ne=this.storage.getItem(R);if(_.newValue!==Ne)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!C)return}const L=()=>{const Ne=this.storage.getItem(R);!C&&this.localCache[R]===Ne||this.notifyListeners(R,Ne)},ne=this.storage.getItem(R);!function Bt(){return(0,W.w1)()&&10===document.documentMode}()||ne===_.newValue||_.newValue===_.oldValue?L():setTimeout(L,10)}notifyListeners(_,C){this.localCache[_]=C;const R=this.listeners[_];if(R)for(const L of Array.from(R))L(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var R=()=>super._set,L=this;return(0,f.Z)(function*(){yield R().call(L,_,C),L.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,R=this;return(0,f.Z)(function*(){const L=yield C().call(R,_);return R.localCache[_]=JSON.stringify(L),L})()}_remove(_){var C=()=>super._remove,R=this;return(0,f.Z)(function*(){yield C().call(R,_),delete R.localCache[_]})()}}return w.type="LOCAL",w})(),ni=(()=>{class w extends Ao{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return w.type="SESSION",w})();let Pr=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(L=>L.isListeningto(_));if(C)return C;const R=new w(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,f.Z)(function*(){const R=_,{eventId:L,eventType:ne,data:Ne}=R.data,rt=C.handlersMap[ne];if(!(null==rt?void 0:rt.size))return;R.ports[0].postMessage({status:"ack",eventId:L,eventType:ne});const lt=Array.from(rt).map(function(){var Pn=(0,f.Z)(function*(us){return us(R.origin,Ne)});return function(us){return Pn.apply(this,arguments)}}()),St=yield function Qa(w){return Promise.all(w.map(function(){var g=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(lt);R.ports[0].postMessage({status:"done",eventId:L,eventType:ne,response:St})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ln(w="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return w+_}class Js{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var R=this;return(0,f.Z)(function*(){const L="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let ne,Ne;return new Promise((rt,lt)=>{const St=ln("",20);L.port1.start();const Pn=setTimeout(()=>{lt(new Error("unsupported_event"))},C);Ne={messageChannel:L,onMessage(us){const oo=us;if(oo.data.eventId===St)switch(oo.data.status){case"ack":clearTimeout(Pn),ne=setTimeout(()=>{lt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),rt(oo.data.response);break;default:clearTimeout(Pn),clearTimeout(ne),lt(new Error("invalid_response"))}}},R.handlers.add(Ne),L.port1.addEventListener("message",Ne.onMessage),R.target.postMessage({eventType:g,eventId:St,data:_},[L.port2])}).finally(()=>{Ne&&R.removeMessageHandler(Ne)})})()}}function Qe(){return window}function gi(){return void 0!==Qe().WorkerGlobalScope&&"function"==typeof Qe().importScripts}function ns(){return(ns=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Gn="firebaseLocalStorageDb",bt="firebaseLocalStorage",Xs="fbase_key";class mi{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function _i(w,g){return w.transaction([bt],g?"readwrite":"readonly").objectStore(bt)}function eo(){const w=indexedDB.open(Gn,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const C=w.result;try{C.createObjectStore(bt,{keyPath:Xs})}catch(R){_(R)}}),w.addEventListener("success",(0,f.Z)(function*(){const C=w.result;C.objectStoreNames.contains(bt)?g(C):(C.close(),yield function eu(){const w=indexedDB.deleteDatabase(Gn);return new mi(w).toPromise()}(),g(yield eo()))}))})}function Gi(w,g,_){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(w,g,_){const C=_i(w,!0).put({[Xs]:g,value:_});return new mi(C).toPromise()})).apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(w,g){const _=_i(w,!1).get(g),C=yield new mi(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function ve(w,g){const _=_i(w,!0).delete(g);return new mi(_).toPromise()}const is=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield eo()),_.db})()}_withRetries(_){var C=this;return(0,f.Z)(function*(){let R=0;for(;;)try{const L=yield C._openDb();return yield _(L)}catch(L){if(R++>3)throw L;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return gi()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=Pr._getInstance(function Ja(){return gi()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,f.Z)(function*(R,L){return{keyProcessed:(yield _._poll()).includes(L.key)}});return function(R,L){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,f.Z)(function*(R,L){return["keyChanged"]});return function(R,L){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var C,R;if(_.activeServiceWorker=yield function Gu(){return ns.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Js(_.activeServiceWorker);const L=yield _.sender._send("ping",{},800);!L||(null===(C=L[0])||void 0===C?void 0:C.fulfilled)&&(null===(R=L[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,f.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Or(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield eo();return yield Gi(_,Ol,"1"),yield ve(_,Ol),!0}catch(_){}return!1})()}_withPendingWrite(_){var C=this;return(0,f.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var R=this;return(0,f.Z)(function*(){return R._withPendingWrite((0,f.Z)(function*(){return yield R._withRetries(L=>Gi(L,_,C)),R.localCache[_]=C,R.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,f.Z)(function*(){const R=yield C._withRetries(L=>function cf(w,g){return to.apply(this,arguments)}(L,_));return C.localCache[_]=R,R})()}_remove(_){var C=this;return(0,f.Z)(function*(){return C._withPendingWrite((0,f.Z)(function*(){return yield C._withRetries(R=>ve(R,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const C=yield _._withRetries(ne=>{const Ne=_i(ne,!1).getAll();return new mi(Ne).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const R=[],L=new Set;for(const{fbase_key:ne,value:Ne}of C)L.add(ne),JSON.stringify(_.localCache[ne])!==JSON.stringify(Ne)&&(_.notifyListeners(ne,Ne),R.push(ne));for(const ne of Object.keys(_.localCache))_.localCache[ne]&&!L.has(ne)&&(_.notifyListeners(ne,null),R.push(ne));return R})()}notifyListeners(_,C){this.localCache[_]=C;const R=this.listeners[_];if(R)for(const L of Array.from(R))L(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Nt(w,g){return Yt(w,"POST","/v2/accounts/mfaSignIn:start",Ht(w,g))}function Zn(){return(Zn=(0,f.Z)(function*(w){return(yield Yt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ro(w){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",w),C.onload=g,C.onerror=R=>{const L=Oe("internal-error");L.customData=R,_(L)},C.type="text/javascript",C.charset="UTF-8",function Ll(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(C)})}function Mo(w){return`__${w}${Math.floor(1e6*Math.random())}`}const on=1e12;class Po{constructor(g){this.auth=g,this.counter=on,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new fr(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||on;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||on))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,f.Z)(function*(){var C;return null===(C=_._widgets.get(g||on))||void 0===C||C.execute(),""})()}}class fr{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;ie(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yi(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<w;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fd=Mo("rcb"),df=new Ye(3e4,6e4);class pd{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=Qe().grecaptcha)||void 0===g?void 0:g.render)}load(g,_=""){return ie(function Ir(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Qe().grecaptcha):new Promise((C,R)=>{const L=Qe().setTimeout(()=>{R(Oe(g,"network-request-failed"))},df.get());Qe()[fd]=()=>{Qe().clearTimeout(L),delete Qe()[fd];const Ne=Qe().grecaptcha;if(!Ne)return void R(Oe(g,"internal-error"));const rt=Ne.render;Ne.render=(lt,St)=>{const Pn=rt(lt,St);return this.counter++,Pn},this.hostLanguage=_,C(Ne)},Ro(`https://www.google.com/recaptcha/api.js??${(0,W.xO)({onload:fd,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(L),R(Oe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!!(null===(_=Qe().grecaptcha)||void 0===_?void 0:_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sy{load(g){return(0,f.Z)(function*(){return new Po(g)})()}clearedOneInstance(){}}const Vl="recaptcha",mg={theme:"light",type:"image"};class hf{constructor(g,_=Object.assign({},mg),C){this.parameters=_,this.type=Vl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$e(C),this.isInvisible="invisible"===this.parameters.size,ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;ie(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sy:new pd,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(L=>{const ne=Ne=>{!Ne||(g.tokenChangeListeners.delete(ne),L(Ne))};g.tokenChangeListeners.add(ne),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=Qe()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){ie(Ue()&&!gi(),g.auth,"internal-error"),yield function gd(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function tu(w){return Zn.apply(this,arguments)}(g.auth);ie(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fr{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=na._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function ff(w,g,_){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,f.Z)(function*(w,g,_){const C=$e(w),R=yield Lr(C,g,(0,W.m9)(_));return new Fr(R,L=>Bu(C,L))})).apply(this,arguments)}function Wu(w,g,_){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(w,g,_){const C=(0,W.m9)(w);yield zs(!1,C,"phone");const R=yield Lr(C.auth,g,(0,W.m9)(_));return new Fr(R,L=>Ts(C,L))})).apply(this,arguments)}function pf(w,g,_){return nu.apply(this,arguments)}function nu(){return(nu=(0,f.Z)(function*(w,g,_){const C=(0,W.m9)(w),R=yield Lr(C.auth,g,(0,W.m9)(_));return new Fr(R,L=>ia(C,L))})).apply(this,arguments)}function Lr(w,g,_){return ki.apply(this,arguments)}function ki(){return(ki=(0,f.Z)(function*(w,g,_){var C;const R=yield _.verify();try{let L;if(ie("string"==typeof R,w,"argument-error"),ie(_.type===Vl,w,"argument-error"),L="string"==typeof g?{phoneNumber:g}:g,"session"in L){const ne=L.session;if("phoneNumber"in L)return ie("enroll"===ne.type,w,"internal-error"),(yield hr(w,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ie("signin"===ne.type,w,"internal-error");const Ne=(null===(C=L.multiFactorHint)||void 0===C?void 0:C.uid)||L.multiFactorUid;return ie(Ne,w,"missing-multi-factor-info"),(yield Nt(w,{mfaPendingCredential:ne.credential,mfaEnrollmentId:Ne,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield og(w,{phoneNumber:L.phoneNumber,recaptchaToken:R});return ne}}finally{_._reset()}})).apply(this,arguments)}function Ul(w,g){return no.apply(this,arguments)}function no(){return(no=(0,f.Z)(function*(w,g){yield En((0,W.m9)(w),g)})).apply(this,arguments)}let Oo=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=$e(_)}verifyPhoneNumber(_,C){return Lr(this.auth,_,(0,W.m9)(C))}static credential(_,C){return na._fromVerification(_,C)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:R}=_;return C&&R?na._fromTokenResponse(C,R):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ss(w,g){return g?re(g):(ie(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class da extends mn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return rr(g,this._buildIdpRequest())}_linkToIdToken(g,_){return rr(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return rr(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function gf(w){return bo(w.auth,new da(w),w.bypassAuthState)}function _g(w){const{auth:g,user:_}=w;return ie(_,g,"internal-error"),Uu(_,new da(w),w.bypassAuthState)}function qu(w){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,f.Z)(function*(w){const{auth:g,user:_}=w;return ie(_,g,"internal-error"),En(_,new da(w),w.bypassAuthState)})).apply(this,arguments)}class Vr{constructor(g,_,C,R,L=!1){this.auth=g,this.resolver=C,this.user=R,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,f.Z)(function*(C,R){g.pendingPromise={resolve:C,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(L){g.reject(L)}});return function(C,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,f.Z)(function*(){const{urlResponse:C,sessionId:R,postBody:L,tenantId:ne,error:Ne,type:rt}=g;if(Ne)return void _.reject(Ne);const lt={auth:_.auth,requestUri:C,sessionId:R,tenantId:ne||void 0,postBody:L||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(rt)(lt))}catch(St){_.reject(St)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return gf;case"linkViaPopup":case"linkViaRedirect":return qu;case"reauthViaPopup":case"reauthViaRedirect":return _g;default:He(this.auth,"internal-error")}}resolve(g){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rs=new Ye(2e3,1e4);function ro(w,g,_){return io.apply(this,arguments)}function io(){return(io=(0,f.Z)(function*(w,g,_){const C=$e(w);Se(w,g,qs);const R=ss(C,_);return new Zu(C,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function zu(w,g,_){return md.apply(this,arguments)}function md(){return(md=(0,f.Z)(function*(w,g,_){const C=(0,W.m9)(w);Se(C.auth,g,qs);const R=ss(C.auth,_);return new Zu(C.auth,"reauthViaPopup",g,R,C).executeNotNull()})).apply(this,arguments)}function Bl(w,g,_){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,f.Z)(function*(w,g,_){const C=(0,W.m9)(w);Se(C.auth,g,qs);const R=ss(C.auth,_);return new Zu(C.auth,"linkViaPopup",g,R,C).executeNotNull()})).apply(this,arguments)}let Zu=(()=>{class w extends Vr{constructor(_,C,R,L,ne){super(_,C,L,ne),this.provider=R,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const C=yield _.execute();return ie(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,f.Z)(function*(){be(1===_.filter.length,"Popup operations only handle one event");const C=ln();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(Oe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Oe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,R;this.pollId=(null===(R=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Oe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Rs.get())};_()}}return w.currentPopupAction=null,w})();const Pi=new Map;class Lo extends Vr{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,f.Z)(function*(){let C=Pi.get(_.auth._key());if(!C){try{const L=(yield function ha(w,g){return Yu.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(L)}catch(R){C=()=>Promise.reject(R)}Pi.set(_.auth._key(),C)}return _.bypassAuthState||Pi.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const R=yield C.auth._redirectUserForId(g.eventId);if(R)return C.user=R,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Yu(){return(Yu=(0,f.Z)(function*(w,g){const _=Qu(g),C=mf(w);if(!(yield C._isAvailable()))return!1;const R="true"===(yield C._get(_));return yield C._remove(_),R})).apply(this,arguments)}function Qr(w,g){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,f.Z)(function*(w,g){return mf(w)._set(Qu(g),"true")})).apply(this,arguments)}function Wi(){Pi.clear()}function jl(w,g){Pi.set(w._key(),g)}function mf(w){return re(w._redirectPersistence)}function Qu(w){return q("pendingRedirect",w.config.apiKey,w.name)}function Hl(w,g,_){return function $l(w,g,_){return Uo.apply(this,arguments)}(w,g,_)}function Uo(){return(Uo=(0,f.Z)(function*(w,g,_){const C=$e(w);Se(w,g,qs);const R=ss(C,_);return yield Qr(R,C),R._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function b(w,g,_){return function T(w,g,_){return x.apply(this,arguments)}(w,g,_)}function x(){return(x=(0,f.Z)(function*(w,g,_){const C=(0,W.m9)(w);Se(C.auth,g,qs);const R=ss(C.auth,_);yield Qr(R,C.auth);const L=yield Pt(C);return R._openRedirect(C.auth,g,"reauthViaRedirect",L)})).apply(this,arguments)}function j(w,g,_){return function Y(w,g,_){return te.apply(this,arguments)}(w,g,_)}function te(){return(te=(0,f.Z)(function*(w,g,_){const C=(0,W.m9)(w);Se(C.auth,g,qs);const R=ss(C.auth,_);yield zs(!1,C,g.providerId),yield Qr(R,C.auth);const L=yield Pt(C);return R._openRedirect(C.auth,g,"linkViaRedirect",L)})).apply(this,arguments)}function Me(w,g){return ze.apply(this,arguments)}function ze(){return(ze=(0,f.Z)(function*(w,g){return yield $e(w)._initializationPromise,wt(w,g,!1)})).apply(this,arguments)}function wt(w,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,f.Z)(function*(w,g,_=!1){const C=$e(w),R=ss(C,g),ne=yield new Lo(C,R,_).execute();return ne&&!_&&(delete ne.user._redirectEventId,yield C._persistUserIfCurrent(ne.user),yield C._setRedirectUser(null,g)),ne})).apply(this,arguments)}function Pt(w){return _t.apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(w){const g=ln(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class ir{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function os(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jo(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!jo(g)){const R=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Oe(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bo(g))}saveEventToCache(g){this.cachedEventUids.add(Bo(g)),this.lastProcessedEventTime=Date.now()}}function Bo(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function jo({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function fa(w){return pa.apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(w,g={}){return Yt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const so=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ms=/^https?/;function Ns(){return(Ns=(0,f.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield fa(w);for(const _ of g)try{if(oy(_))return}catch(C){}He(w,"unauthorized-domain")})).apply(this,arguments)}function oy(w){const g=de(),{protocol:_,hostname:C}=new URL(g);if(w.startsWith("chrome-extension://")){const ne=new URL(w);return""===ne.hostname&&""===C?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&ne.hostname===C}if(!Ms.test(_))return!1;if(so.test(w))return C===w;const R=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(C)}const yd=new Ye(3e4,6e4);function vd(){const w=Qe().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let wd=null;function Ed(w){return wd=wd||function yg(w){return new Promise((g,_)=>{var C,R,L;function ne(){vd(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{vd(),_(Oe(w,"network-request-failed"))},timeout:yd.get()})}if(null===(R=null===(C=Qe().gapi)||void 0===C?void 0:C.iframes)||void 0===R?void 0:R.Iframe)g(gapi.iframes.getContext());else{if(!(null===(L=Qe().gapi)||void 0===L?void 0:L.load)){const Ne=Mo("iframefcb");return Qe()[Ne]=()=>{gapi.load?ne():_(Oe(w,"network-request-failed"))},Ro(`https://apis.google.com/js/api.js?onload=${Ne}`).catch(rt=>_(rt))}ne()}}).catch(g=>{throw wd=null,g})}(w),wd}const ay=new Ye(5e3,15e3),_f={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ju=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ru(w){const g=w.config;ie(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?fn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:w.name,v:P.SDK_VERSION},R=Ju.get(w.config.apiHost);R&&(C.eid=R);const L=w._getFrameworks();return L.length&&(C.fw=L.join(",")),`${_}?${(0,W.xO)(C).slice(1)}`}function Gl(){return Gl=(0,f.Z)(function*(w){const g=yield Ed(w),_=Qe().gapi;return ie(_,w,"internal-error"),g.open({where:document.body,url:ru(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_f,dontclear:!0},C=>new Promise(function(){var R=(0,f.Z)(function*(L,ne){yield C.restyle({setHideOnLeave:!1});const Ne=Oe(w,"network-request-failed"),rt=Qe().setTimeout(()=>{ne(Ne)},ay.get());function lt(){Qe().clearTimeout(rt),L(C)}C.ping(lt).then(lt,()=>{ne(Ne)})});return function(L,ne){return R.apply(this,arguments)}}()))}),Gl.apply(this,arguments)}const Wl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class su{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Id(w,g,_,C,R,L){ie(w.config.authDomain,w,"auth-domain-config-required"),ie(w.config.apiKey,w,"invalid-api-key");const ne={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:C,v:P.SDK_VERSION,eventId:R};if(g instanceof qs){g.setDefaultLanguage(w.languageCode),ne.providerId=g.providerId||"",(0,W.xb)(g.getCustomParameters())||(ne.customParameters=JSON.stringify(g.getCustomParameters()));for(const[rt,lt]of Object.entries(L||{}))ne[rt]=lt}if(g instanceof Mi){const rt=g.getScopes().filter(lt=>""!==lt);rt.length>0&&(ne.scopes=rt.join(","))}w.tenantId&&(ne.tid=w.tenantId);const Ne=ne;for(const rt of Object.keys(Ne))void 0===Ne[rt]&&delete Ne[rt];return`${function as({config:w}){return w.emulator?fn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,W.xO)(Ne).slice(1)}`}const $o="webStorageSupport",Cf=class Ef{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ni,this._completeRedirectFn=wt,this._overrideRedirectResult=jl}_openPopup(g,_,C,R){var L=this;return(0,f.Z)(function*(){var ne;be(null===(ne=L.eventManagers[g._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const Ne=Id(g,_,C,de(),R);return function Cd(w,g,_,C=500,R=600){const L=Math.max((window.screen.availHeight-R)/2,0).toString(),ne=Math.max((window.screen.availWidth-C)/2,0).toString();let Ne="";const rt=Object.assign(Object.assign({},Wl),{width:C.toString(),height:R.toString(),top:L,left:ne}),lt=(0,W.z$)().toLowerCase();_&&(Ne=le(lt)?"_blank":_),k(lt)&&(g=g||"http://localhost",rt.scrollbars="yes");const St=Object.entries(rt).reduce((us,[oo,xn])=>`${us}${oo}=${xn},`,"");if(function cr(w=(0,W.z$)()){var g;return ot(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(lt)&&"_self"!==Ne)return function wg(w,g){const _=document.createElement("a");_.href=w,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",Ne),new su(null);const Pn=window.open(g||"",Ne,St);ie(Pn,w,"popup-blocked");try{Pn.focus()}catch(us){}return new su(Pn)}(g,Ne,ln())})()}_openRedirect(g,_,C,R){var L=this;return(0,f.Z)(function*(){return yield L._originValidation(g),function sn(w){Qe().location.href=w}(Id(g,_,C,de(),R)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:L}=this.eventManagers[_];return R?Promise.resolve(R):(be(L,"If manager is not set, promise should be"),L)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,f.Z)(function*(){const C=yield function vg(w){return Gl.apply(this,arguments)}(g),R=new ir(g);return C.register("authEvent",L=>(ie(null==L?void 0:L.authEvent,g,"invalid-auth-event"),{status:R.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=C,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send($o,{type:$o},R=>{var L;const ne=null===(L=null==R?void 0:R[0])||void 0===L?void 0:L[$o];void 0!==ne&&_(!!ne),He(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function vi(w){return Ns.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Kr()||B()||ot()}};class Xu extends class If{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Xu(g)}_finalizeEnroll(g,_,C){return function cd(w,g){return Yt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(w,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function xo(w,g){return Yt(w,"POST","/v2/accounts/mfaSignIn:finalize",Ht(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ly=(()=>{class w{constructor(){}static assertion(_){return Xu._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var cy="@firebase/auth",ql="0.20.11";class bd{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var R;g((null===(R=C)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,W.Pz)("authIdTokenMaxAge"),function Cg(w){(0,P._registerComponent)(new ge.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),{apiKey:L,authDomain:ne}=C.options;return((Ne,rt)=>{ie(L&&!L.includes(":"),"invalid-api-key",{appName:Ne.name}),ie(!(null==ne?void 0:ne.includes(":")),"argument-error",{appName:Ne.name});const lt={apiKey:L,authDomain:ne,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vr(w)},St=new ci(Ne,rt,lt);return function we(w,g){const _=(null==g?void 0:g.persistence)||[],C=(Array.isArray(_)?_:[_]).map(re);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(C,null==g?void 0:g.popupRedirectResolver)}(St,_),St})(C,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new ge.wA("auth-internal",g=>{const _=$e(g.getProvider("auth").getImmediate());return new bd(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(cy,ql,function bf(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,P.registerVersion)(cy,ql,"esm2017")}("Browser")},2090:(it,Ce,V)=>{"use strict";V.d(Ce,{$s:()=>Ke,BH:()=>Ut,DV:()=>Bn,Dv:()=>Ai,G6:()=>Se,GJ:()=>Ti,L:()=>ae,LL:()=>pn,Pz:()=>tn,Sg:()=>Ye,UG:()=>Ve,UI:()=>vt,US:()=>ge,Wj:()=>ji,Wl:()=>Mn,Yr:()=>Re,ZB:()=>$,ZR:()=>Tn,aH:()=>gt,b$:()=>De,cI:()=>Yt,dS:()=>_n,eu:()=>ie,g5:()=>P,gK:()=>zr,gQ:()=>Sn,h$:()=>he,hl:()=>qe,hu:()=>W,jU:()=>je,lb:()=>jn,m9:()=>rn,ne:()=>lr,p$:()=>G,pd:()=>qr,r3:()=>Si,ru:()=>me,tV:()=>_e,uI:()=>Ie,ug:()=>yt,vZ:()=>Mr,w1:()=>He,w9:()=>Yi,xO:()=>Nr,xb:()=>Qi,z$:()=>xe,zI:()=>ye,zd:()=>Wr});const W=function(K,q){if(!K)throw P(q)},P=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},se=function(K){const q=[];let Q=0;for(let H=0;H<K.length;H++){let k=K.charCodeAt(H);k<128?q[Q++]=k:k<2048?(q[Q++]=k>>6|192,q[Q++]=63&k|128):55296==(64512&k)&&H+1<K.length&&56320==(64512&K.charCodeAt(H+1))?(k=65536+((1023&k)<<10)+(1023&K.charCodeAt(++H)),q[Q++]=k>>18|240,q[Q++]=k>>12&63|128,q[Q++]=k>>6&63|128,q[Q++]=63&k|128):(q[Q++]=k>>12|224,q[Q++]=k>>6&63|128,q[Q++]=63&k|128)}return q},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,q){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let k=0;k<K.length;k+=3){const B=K[k],le=k+1<K.length,Le=le?K[k+1]:0,nt=k+2<K.length,ft=nt?K[k+2]:0;let dn=(15&Le)<<2|ft>>6,cr=63&ft;nt||(cr=64,le||(dn=64)),H.push(Q[B>>2],Q[(3&B)<<4|Le>>4],Q[dn],Q[cr])}return H.join("")},encodeString(K,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(K):this.encodeByteArray(se(K),q)},decodeString(K,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(K):function(K){const q=[];let Q=0,H=0;for(;Q<K.length;){const k=K[Q++];if(k<128)q[H++]=String.fromCharCode(k);else if(k>191&&k<224){const B=K[Q++];q[H++]=String.fromCharCode((31&k)<<6|63&B)}else if(k>239&&k<365){const nt=((7&k)<<18|(63&K[Q++])<<12|(63&K[Q++])<<6|63&K[Q++])-65536;q[H++]=String.fromCharCode(55296+(nt>>10)),q[H++]=String.fromCharCode(56320+(1023&nt))}else{const B=K[Q++],le=K[Q++];q[H++]=String.fromCharCode((15&k)<<12|(63&B)<<6|63&le)}}return q.join("")}(this.decodeStringToByteArray(K,q))},decodeStringToByteArray(K,q){this.init_();const Q=q?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let k=0;k<K.length;){const B=Q[K.charAt(k++)],Le=k<K.length?Q[K.charAt(k)]:0;++k;const ft=k<K.length?Q[K.charAt(k)]:64;++k;const ot=k<K.length?Q[K.charAt(k)]:64;if(++k,null==B||null==Le||null==ft||null==ot)throw Error();H.push(B<<2|Le>>4),64!==ft&&(H.push(Le<<4&240|ft>>2),64!==ot&&H.push(ft<<6&192|ot))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},he=function(K){const q=se(K);return ge.encodeByteArray(q,!0)},ae=function(K){return he(K).replace(/\./g,"")},_e=function(K){try{return ge.decodeString(K,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function G(K){return $(void 0,K)}function $(K,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return q}for(const Q in q)!q.hasOwnProperty(Q)||!ee(Q)||(K[Q]=$(K[Q],q[Q]));return K}function ee(K){return"__proto__"!==K}function xe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ie(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function Ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(K){return!1}}function je(){return"object"==typeof self&&self.self===self}function me(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function He(){const K=xe();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Re(){return!1}function Se(){return!Ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){return"object"==typeof indexedDB}function ie(){return new Promise((K,q)=>{try{let Q=!0;const H="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(H);k.onsuccess=()=>{k.result.close(),Q||self.indexedDB.deleteDatabase(H),K(!0)},k.onupgradeneeded=()=>{Q=!1},k.onerror=()=>{var B;q((null===(B=k.error)||void 0===B?void 0:B.message)||"")}}catch(Q){q(Q)}})}function ye(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const we=()=>{try{return function be(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const K=process.env.__FIREBASE_DEFAULTS__;return K?JSON.parse(K):void 0})()||(()=>{if("undefined"==typeof document)return;let K;try{K=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Q){return}const q=K&&_e(K[1]);return q&&JSON.parse(q)})()}catch(K){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${K}`)}},gt=()=>{var K;return null===(K=we())||void 0===K?void 0:K.config},tn=K=>{var q;return null===(q=we())||void 0===q?void 0:q[`_${K}`]};class Ut{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,Q)=>{this.resolve=q,this.reject=Q})}wrapCallback(q){return(Q,H)=>{Q?this.reject(Q):this.resolve(H),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(Q):q(Q,H))}}}function Ye(K,q){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=q||"demo-project",k=K.iat||0,B=K.sub||K.user_id;if(!B)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const le=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:k,exp:k+3600,auth_time:k,sub:B,user_id:B,firebase:{sign_in_provider:"custom",identities:{}}},K);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(le)),""].join(".")}class Tn extends Error{constructor(q,Q,H){super(Q),this.code=q,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,Tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pn.prototype.create)}}class pn{constructor(q,Q,H){this.service=q,this.serviceName=Q,this.errors=H}create(q,...Q){const H=Q[0]||{},k=`${this.service}/${q}`,B=this.errors[q],le=B?function nn(K,q){return K.replace(Ht,(Q,H)=>{const k=q[H];return null!=k?String(k):`<${H}?>`})}(B,H):"Error";return new Tn(k,`${this.serviceName}: ${le} (${k}).`,H)}}const Ht=/\{\$([^}]+)}/g;function Yt(K){return JSON.parse(K)}function Mn(K){return JSON.stringify(K)}const ei=function(K){let q={},Q={},H={},k="";try{const B=K.split(".");q=Yt(_e(B[0])||""),Q=Yt(_e(B[1])||""),k=B[2],H=Q.d||{},delete Q.d}catch(B){}return{header:q,claims:Q,data:H,signature:k}},Yi=function(K){const Q=ei(K).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Ti=function(K){const q=ei(K).claims;return"object"==typeof q&&!0===q.admin};function Si(K,q){return Object.prototype.hasOwnProperty.call(K,q)}function Bn(K,q){if(Object.prototype.hasOwnProperty.call(K,q))return K[q]}function Qi(K){for(const q in K)if(Object.prototype.hasOwnProperty.call(K,q))return!1;return!0}function vt(K,q,Q){const H={};for(const k in K)Object.prototype.hasOwnProperty.call(K,k)&&(H[k]=q.call(Q,K[k],k,K));return H}function Mr(K,q){if(K===q)return!0;const Q=Object.keys(K),H=Object.keys(q);for(const k of Q){if(!H.includes(k))return!1;const B=K[k],le=q[k];if(bn(B)&&bn(le)){if(!Mr(B,le))return!1}else if(B!==le)return!1}for(const k of H)if(!Q.includes(k))return!1;return!0}function bn(K){return null!==K&&"object"==typeof K}function Nr(K){const q=[];for(const[Q,H]of Object.entries(K))Array.isArray(H)?H.forEach(k=>{q.push(encodeURIComponent(Q)+"="+encodeURIComponent(k))}):q.push(encodeURIComponent(Q)+"="+encodeURIComponent(H));return q.length?"&"+q.join("&"):""}function Wr(K){const q={};return K.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[k,B]=H.split("=");q[decodeURIComponent(k)]=decodeURIComponent(B)}}),q}function qr(K){const q=K.indexOf("?");if(!q)return"";const Q=K.indexOf("#",q);return K.substring(q,Q>0?Q:void 0)}class Sn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,Q){Q||(Q=0);const H=this.W_;if("string"==typeof q)for(let ot=0;ot<16;ot++)H[ot]=q.charCodeAt(Q)<<24|q.charCodeAt(Q+1)<<16|q.charCodeAt(Q+2)<<8|q.charCodeAt(Q+3),Q+=4;else for(let ot=0;ot<16;ot++)H[ot]=q[Q]<<24|q[Q+1]<<16|q[Q+2]<<8|q[Q+3],Q+=4;for(let ot=16;ot<80;ot++){const dn=H[ot-3]^H[ot-8]^H[ot-14]^H[ot-16];H[ot]=4294967295&(dn<<1|dn>>>31)}let ft,Mt,k=this.chain_[0],B=this.chain_[1],le=this.chain_[2],Le=this.chain_[3],nt=this.chain_[4];for(let ot=0;ot<80;ot++){ot<40?ot<20?(ft=Le^B&(le^Le),Mt=1518500249):(ft=B^le^Le,Mt=1859775393):ot<60?(ft=B&le|Le&(B|le),Mt=2400959708):(ft=B^le^Le,Mt=3395469782);const dn=(k<<5|k>>>27)+ft+nt+Mt+H[ot]&4294967295;nt=Le,Le=le,le=4294967295&(B<<30|B>>>2),B=k,k=dn}this.chain_[0]=this.chain_[0]+k&4294967295,this.chain_[1]=this.chain_[1]+B&4294967295,this.chain_[2]=this.chain_[2]+le&4294967295,this.chain_[3]=this.chain_[3]+Le&4294967295,this.chain_[4]=this.chain_[4]+nt&4294967295}update(q,Q){if(null==q)return;void 0===Q&&(Q=q.length);const H=Q-this.blockSize;let k=0;const B=this.buf_;let le=this.inbuf_;for(;k<Q;){if(0===le)for(;k<=H;)this.compress_(q,k),k+=this.blockSize;if("string"==typeof q){for(;k<Q;)if(B[le]=q.charCodeAt(k),++le,++k,le===this.blockSize){this.compress_(B),le=0;break}}else for(;k<Q;)if(B[le]=q[k],++le,++k,le===this.blockSize){this.compress_(B),le=0;break}}this.inbuf_=le,this.total_+=Q}digest(){const q=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let k=this.blockSize-1;k>=56;k--)this.buf_[k]=255&Q,Q/=256;this.compress_(this.buf_);let H=0;for(let k=0;k<5;k++)for(let B=24;B>=0;B-=8)q[H]=this.chain_[k]>>B&255,++H;return q}}function lr(K,q){const Q=new vs(K,q);return Q.subscribe.bind(Q)}class vs{constructor(q,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{q(this)}).catch(H=>{this.error(H)})}next(q){this.forEachObserver(Q=>{Q.next(q)})}error(q){this.forEachObserver(Q=>{Q.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,Q,H){let k;if(void 0===q&&void 0===Q&&void 0===H)throw new Error("Missing Observer.");k=function mt(K,q){if("object"!=typeof K||null===K)return!1;for(const Q of q)if(Q in K&&"function"==typeof K[Q])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:Q,complete:H},void 0===k.next&&(k.next=st),void 0===k.error&&(k.error=st),void 0===k.complete&&(k.complete=st);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch(le){}}),this.observers.push(k),B}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,q)}sendOne(q,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{Q(this.observers[q])}catch(H){"undefined"!=typeof console&&console.error&&console.error(H)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function st(){}const Ai=function(K,q,Q,H){let k;if(H<q?k="at least "+q:H>Q&&(k=0===Q?"none":"no more than "+Q),k)throw new Error(K+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+k+".")};function zr(K,q){return`${K} failed: ${q} argument `}function ji(K,q,Q,H){if((!H||Q)&&"function"!=typeof Q)throw new Error(zr(K,q)+"must be a valid function.")}function jn(K,q,Q,H){if((!H||Q)&&("object"!=typeof Q||null===Q))throw new Error(zr(K,q)+"must be a valid context object.")}const _n=function(K){const q=[];let Q=0;for(let H=0;H<K.length;H++){let k=K.charCodeAt(H);if(k>=55296&&k<=56319){const B=k-55296;H++,W(H<K.length,"Surrogate pair missing trail surrogate."),k=65536+(B<<10)+(K.charCodeAt(H)-56320)}k<128?q[Q++]=k:k<2048?(q[Q++]=k>>6|192,q[Q++]=63&k|128):k<65536?(q[Q++]=k>>12|224,q[Q++]=k>>6&63|128,q[Q++]=63&k|128):(q[Q++]=k>>18|240,q[Q++]=k>>12&63|128,q[Q++]=k>>6&63|128,q[Q++]=63&k|128)}return q},yt=function(K){let q=0;for(let Q=0;Q<K.length;Q++){const H=K.charCodeAt(Q);H<128?q++:H<2048?q+=2:H>=55296&&H<=56319?(q+=4,Q++):q+=3}return q};function Ke(K,q=1e3,Q=2){const H=q*Math.pow(Q,K),k=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+k)}function rn(K){return K&&K._delegate?K._delegate:K}},9092:(it,Ce,V)=>{"use strict";var f=V(5e3);let W=null;function P(){return W}const he=new f.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function _e(){return(0,f.LFG)($)}()},providedIn:"platform"}),n})();const G=new f.OlP("Location Initialized");let $=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ee()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ee()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function xe(){return new $((0,f.LFG)(he))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Ie(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function De(n){const e=(0,f.LFG)(he).location;return new He((0,f.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new f.OlP("appBaseHref");let He=(()=>{class n extends me{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ie(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+je(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+je(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae),f.LFG(We,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ie(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+je(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+je(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae),f.LFG(We,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ve(ie(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ie(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=je,n.joinWithSlash=Ie,n.stripTrailingSlash=Ve,n.\u0275fac=function(t){return new(t||n)(f.LFG(me),f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Se(){return new Re((0,f.LFG)(me),(0,f.LFG)(ae))}()},providedIn:"root"}),n})();function ie(n){return n.replace(/\/index.html$/,"")}function wo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let $s=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ea{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ea(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),Gs(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Gs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Gs(n,e){n.context.$implicit=e.item}let dr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new yn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){jc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){jc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class yn{constructor(){this.$implicit=null,this.ngIf=null}}function jc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Yr(n){return"server"===n}let Lu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Vu((0,f.LFG)(he),window)}),n})();class Vu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ds(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Al(this.window.history)||Al(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Al(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class En{}class zs extends class Ha extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ue(n){W||(W=n)}(new zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Uu(){return vn=vn||document.querySelector("base"),vn?vn.getAttribute("href"):null}();return null==t?null:function bo(n){$a=$a||document.createElement("a"),$a.setAttribute("href",n);const e=$a.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wo(document.cookie,e)}}let $a,vn=null;const wr=new f.OlP("TRANSITION_ID"),$n=[{provide:f.ip1,useFactory:function Bu(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[wr,he,f.zs3],multi:!0}];class Ts{static init(){(0,f.VLi)(new Ts)}addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Er=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ia=new f.OlP("EventManagerPlugins");let Xi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ia),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Rl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let di=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ks=(()=>{class n extends di{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zs))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Zs(n){P().remove(n)}const Tt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Do=/%COMP%/g;function Ys(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ys(n,i,t):(i=i.replace(Do,n),t.push(i))}return t}function Pe(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Hu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new An(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new es(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new Ml(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ys(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xi),f.LFG(Ks),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class An{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Tt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Tt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Tt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Pe(r)):this.eventManager.addEventListener(e,t,Pe(r))}}class es extends An{constructor(e,t,r,i){super(e),this.component=r;const a=Ys(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function sa(n){return"_ngcontent-%COMP%".replace(Do,n)}(i+"-"+r.id),this.hostAttr=function nf(n){return"_nghost-%COMP%".replace(Do,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ml extends An{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ys(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Wa=(()=>{class n extends Rl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const rf=["alt","control","meta","shift"],nd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},To={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ts=(()=>{class n extends Rl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(rf.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),l+=m+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function oa(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&To.hasOwnProperty(e)&&(e=To[e]))}return nd[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),rf.forEach(a=>{a!=i&&Cr[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const rd=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function aa(){zs.makeCurrent(),Ts.init()},multi:!0},{provide:he,useFactory:function sf(){return(0,f.RDi)(document),document},deps:[]}]),qa=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function hi(){return new f.qLn},deps:[]},{provide:ia,useClass:Wa,multi:!0,deps:[he,f.R0b,f.Lbi]},{provide:ia,useClass:ts,multi:!0,deps:[he]},{provide:Hu,useClass:Hu,deps:[Xi,Ks,f.AFp]},{provide:f.FYo,useExisting:Hu},{provide:di,useExisting:Ks},{provide:Ks,useClass:Ks,deps:[he]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Xi,useClass:Xi,deps:[ia,f.R0b]},{provide:En,useClass:Er,deps:[]}];let Nl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:wr,useExisting:f.AFp},$n]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:qa,imports:[Io,f.hGG]}),n})();"undefined"!=typeof window&&window;var lf=V(8247),F=V(2090),Cn=V(9681),pi=V(1877),ni=V(4859),Qa=V(4986),Pr=V(8306),ln=V(8996),Js=V(7669);function Qe(...n){const e=(0,Js.yG)(n);return(0,ln.D)(n,e)}var sn=V(5813),gi=V(8189);function ns(...n){return function Gu(){return(0,gi.J)(1)}()((0,ln.D)(n,(0,Js.yG)(n)))}var Or=V(4482);function Ja(...n){const e=(0,Js.yG)(n);return(0,Or.e)((t,r)=>{(e?ns(n,t,e):ns(n,t)).subscribe(r)})}var Gn=V(5403);function Xa(){return(0,Or.e)((n,e)=>{let t,r=!1;n.subscribe((0,Gn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var bt=V(4004);function Xs(n,e,t,r,i){return(a,l)=>{let h=t,m=e,v=0;a.subscribe((0,Gn.x)(l,D=>{const S=v++;m=h?n(m,D,S):(h=!0,D),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}function mi(n,e){return(0,Or.e)(Xs(n,e,arguments.length>=2,!0))}var _i=V(4671);function eu(n,e=_i.y){return n=null!=n?n:eo,(0,Or.e)((t,r)=>{let i,a=!0;t.subscribe((0,Gn.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function eo(n,e){return n===e}function Gi(n,e){return(0,Or.e)((t,r)=>{let i=0;t.subscribe((0,Gn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var ut,Nn=V(2011),to=(V(5881),V(3942)),ve=V(5861),hd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},rs={},is=is||{},Nt=hd||self;function xo(){}function tu(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Zn(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ro="closure_uid_"+(1e9*Math.random()>>>0),Mo=0;function No(n,e,t){return n.call.apply(n.bind,arguments)}function ko(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function on(n,e,t){return(on=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?No:ko).apply(null,arguments)}function Po(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function fr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function yi(){this.s=this.s,this.o=this.o}yi.prototype.s=!1,yi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ll(n){Object.prototype.hasOwnProperty.call(n,Ro)&&n[Ro]||(n[Ro]=++Mo)}(this)},yi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const df=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function kn(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function pd(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(tu(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Ir(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ir.prototype.h=function(){this.defaultPrevented=!0};var sy=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",xo,e),Nt.removeEventListener("test",xo,e)}catch(t){}return n}();function Vl(n){return/^[\s\xa0]*$/.test(n)}var mg=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function hf(n,e){return n<e?-1:n>e?1:0}function gd(){var n=Nt.navigator;return n&&(n=n.userAgent)?n:""}function Fr(n){return-1!=gd().indexOf(n)}function ff(n){return ff[" "](n),n}ff[" "]=xo;var no,n,Wu=Fr("Opera"),Ni=Fr("Trident")||Fr("MSIE"),pf=Fr("Edge"),nu=pf||Ni,Lr=Fr("Gecko")&&!(-1!=gd().toLowerCase().indexOf("webkit")&&!Fr("Edge"))&&!(Fr("Trident")||Fr("MSIE"))&&!Fr("Edge"),ki=-1!=gd().toLowerCase().indexOf("webkit")&&!Fr("Edge");function Ul(){var n=Nt.document;return n?n.documentMode:void 0}e:{var Oo="",ss=(n=gd(),Lr?/rv:([^\);]+)(\)|;)/.exec(n):pf?/Edge\/([\d\.]+)/.exec(n):Ni?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ki?/WebKit\/(\S+)/.exec(n):Wu?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ss&&(Oo=ss?ss[1]:""),Ni){var da=Ul();if(null!=da&&da>parseFloat(Oo)){no=String(da);break e}}no=Oo}var gf={};var Vr=Nt.document&&Ni&&(Ul()||parseInt(no,10))||void 0;function Rs(n,e){if(Ir.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Lr){e:{try{ff(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ro[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Rs.X.h.call(this)}}fr(Rs,Ir);var ro={2:"touch",3:"pen",4:"mouse"};Rs.prototype.h=function(){Rs.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var io="closure_listenable_"+(1e6*Math.random()|0),zu=0;function md(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++zu,this.ba=this.ea=!1}function Bl(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Ku(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Zu(n){const e={};for(const t in n)e[t]=n[t];return e}const _d="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pi(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<_d.length;a++)t=_d[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Lo(n){this.src=n,this.g={},this.h=0}function ha(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=df(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Bl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Yu(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Lo.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Yu(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new md(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Qr="closure_lm_"+(1e6*Math.random()|0),Vo={};function Wi(n,e,t,r,i){if(r&&r.once)return Qu(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Wi(n,e[a],t,r,i);return null}return t=j(t),n&&n[io]?n.N(e,t,Zn(r)?!!r.capture:!!r,i):jl(n,e,t,!1,r,i)}function jl(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Zn(i)?!!i.capture:!!i,h=T(n);if(h||(n[Qr]=h=new Lo(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function mf(){const e=b;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)sy||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Uo(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Qu(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Qu(n,e[a],t,r,i);return null}return t=j(t),n&&n[io]?n.O(e,t,Zn(r)?!!r.capture:!!r,i):jl(n,e,t,!0,r,i)}function Hl(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Hl(n,e[a],t,r,i);else r=Zn(r)?!!r.capture:!!r,t=j(t),n&&n[io]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Yu(a=n.g[e],t,r,i))&&(Bl(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=T(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Yu(e,t,r,i)),(t=-1<n?e[n]:null)&&$l(t))}function $l(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[io])ha(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Uo(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=T(e))?(ha(t,n),0==t.h&&(t.src=null,e[Qr]=null)):Bl(n)}}}function Uo(n){return n in Vo?Vo[n]:Vo[n]="on"+n}function b(n,e){if(n.ba)n=!0;else{e=new Rs(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&$l(n),n=t.call(r,e)}return n}function T(n){return(n=n[Qr])instanceof Lo?n:null}var x="__closure_events_fn_"+(1e9*Math.random()>>>0);function j(n){return"function"==typeof n?n:(n[x]||(n[x]=function(e){return n.handleEvent(e)}),n[x])}function Y(){yi.call(this),this.i=new Lo(this),this.P=this,this.I=null}function te(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ir(e,n);else if(e instanceof Ir)e.target=e.target||n;else{var i=e;Pi(e=new Ir(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Me(l,r,!0,e)&&i}if(i=Me(l=e.g=n,r,!0,e)&&i,i=Me(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Me(l=e.g=t[a],r,!1,e)&&i}function Me(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var h=l.listener,m=l.ha||l.src;l.ea&&ha(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}fr(Y,yi),Y.prototype[io]=!0,Y.prototype.removeEventListener=function(n,e,t,r){Hl(this,n,e,t,r)},Y.prototype.M=function(){if(Y.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Bl(t[r]);delete n.g[e],n.h--}}this.I=null},Y.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Y.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ze=Nt.JSON.stringify;function wt(){var n=fa;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Bo,Pt=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new _t,n=>n.reset());class _t{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function br(n){Nt.setTimeout(()=>{throw n},0)}function ir(n,e){Bo||function jo(){var n=Nt.Promise.resolve(void 0);Bo=function(){n.then(pa)}}(),os||(Bo(),os=!0),fa.add(n,e)}var os=!1,fa=new class kt{constructor(){this.h=this.g=null}add(e,t){const r=Pt.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function pa(){for(var n;n=wt();){try{n.h.call(n.g)}catch(t){br(t)}var e=Pt;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}os=!1}function so(n,e){Y.call(this),this.h=n||1,this.g=e||Nt,this.j=on(this.lb,this),this.l=Date.now()}function Ms(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function vi(n,e,t){if("function"==typeof n)t&&(n=on(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=on(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function Ns(n){n.g=vi(()=>{n.g=null,n.i&&(n.i=!1,Ns(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}fr(so,Y),(ut=so.prototype).ca=!1,ut.R=null,ut.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),te(this,"tick"),this.ca&&(Ms(this),this.start()))}},ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){so.X.M.call(this),Ms(this),delete this.g};class oy extends yi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ns(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yd(n){yi.call(this),this.h=n,this.g={}}fr(yd,yi);var vd=[];function yg(n,e,t,r){Array.isArray(t)||(t&&(vd[0]=t.toString()),t=vd);for(var i=0;i<t.length;i++){var a=Wi(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function wd(n){Ku(n.g,function(e,t){this.g.hasOwnProperty(t)&&$l(e)},n),n.g={}}function Ed(){this.g=!0}function Ho(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ju(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return ze(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}yd.prototype.M=function(){yd.X.M.call(this),wd(this)},yd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ed.prototype.Aa=function(){this.g=!1},Ed.prototype.info=function(){};var ru={},vg=null;function Gl(){return vg=vg||new Y}function Wl(n){Ir.call(this,ru.Pa,n)}function iu(n){const e=Gl();te(e,new Wl(e))}function yf(n,e){Ir.call(this,ru.STAT_EVENT,n),this.stat=e}function ri(n){const e=Gl();te(e,new yf(e,n))}function vf(n,e){Ir.call(this,ru.Qa,n),this.size=e}function su(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}ru.Pa="serverreachability",fr(Wl,Ir),ru.STAT_EVENT="statevent",fr(yf,Ir),ru.Qa="timingevent",fr(vf,Ir);var Cd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},wg={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function wf(){}function Id(){}wf.prototype.h=null;var Cf,as={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function $o(){Ir.call(this,"d")}function Ef(){Ir.call(this,"c")}function If(){}function Xu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new yd(this),this.O=cy,this.T=new so(n=nu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ly}function ly(){this.i=null,this.g="",this.h=!1}fr($o,Ir),fr(Ef,Ir),fr(If,wf),If.prototype.g=function(){return new XMLHttpRequest},If.prototype.i=function(){return{}},Cf=new If;var cy=45e3,ql={},bd={};function bf(n,e,t){n.K=1,n.v=zl(St(e)),n.s=t,n.P=!0,Cg(n,null)}function Cg(n,e){n.F=Date.now(),ga(n),n.A=St(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),zw(t.i,"t",r),n.C=0,t=n.l.H,n.h=new ly,n.g=Ey(n.l,t?e:null,!n.s),0<n.N&&(n.L=new oy(on(n.La,n,n.g),n.N)),yg(n.S,n.g,"readystatechange",n.ib),e=n.H?Zu(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),iu(),function ay(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),m=0;m<h.length;m++){var v=h[m].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+v+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Ig(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function dy(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=bg(n,t),i==bd){4==e&&(n.o=4,ri(14),r=!1),Ho(n.j,n.m,null,"[Incomplete Response]");break}if(i==ql){n.o=4,ri(15),Ho(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ho(n.j,n.m,i,null),C(n,i)}Ig(n)&&i!=bd&&i!=ql&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ri(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),rE(e),e.K=!0,ri(11))):(Ho(n.j,n.m,t,"[Invalid Chunked Response]"),_(n),g(n))}function bg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?bd:(t=Number(e.substring(t,r)),isNaN(t)?ql:(r+=1)+t>e.length?bd:(e=e.substr(r,t),n.C=r+t,e))}function ga(n){n.V=Date.now()+n.O,Dg(n,n.O)}function Dg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=su(on(n.gb,n),e)}function w(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function g(n){0==n.l.G||n.I||Pg(n.l,n)}function _(n){w(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ms(n.T),wd(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function C(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||wi(t.h,n)))if(!n.J&&wi(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=su(on(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Md(t),Mg(t)}kg(t),ri(18)}if(1>=Ad(t.h)&&t.ja){try{t.ja()}catch(v){}t.ja=void 0}}else tl(t,11)}else if((n.J||t.g==n)&&Md(t),!Vl(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const D=v[3];null!=D&&(t.ma=D,t.j.info("VER="+t.ma));const S=v[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const N=v[5];null!=N&&"number"==typeof N&&0<N&&(t.J=r=1.5*N,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const O=n.g;if(O){const z=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var a=r.h;a.g||-1==z.indexOf("spdy")&&-1==z.indexOf("quic")&&-1==z.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Sf(a,a.h),a.h=null))}if(r.D){const fe=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(r.za=fe,xn(r.F,r.D,fe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=wy(r,r.H?r.ka:null,r.V),l.J){fy(r.h,l);var h=l,m=r.J;m&&h.setTimeout(m),h.B&&(w(h),ga(h)),r.g=l}else YD(r);0<t.i.length&&Ng(t)}else"stop"!=v[0]&&"close"!=v[0]||tl(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?tl(t,7):vy(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}iu()}catch(v){}}function ne(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tu(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function L(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(tu(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function R(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(tu(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(ut=Xu.prototype).setTimeout=function(n){this.O=n},ut.ib=function(n){n=n.target;const e=this.L;e&&3==uu(n)?e.l():this.La(n)},ut.La=function(n){try{if(n==this.g)e:{const D=uu(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>D)&&(3!=D||nu||this.g&&(this.h.h||this.g.fa()||eE(this.g)))){this.I||4!=D||7==e||iu(),w(this);var t=this.g.aa();this.Y=t;t:if(Ig(this)){var r=eE(this.g);n="";var i=r.length,a=4==uu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_(this),g(this);var l="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function uy(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,D,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vl(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,ri(12),_(this),g(this);break e}Ho(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,C(this,t)}this.P?(dy(this,D,l),nu&&this.i&&3==D&&(yg(this.S,this.T,"tick",this.hb),this.T.start())):(Ho(this.j,this.m,l,null),C(this,l)),4==D&&_(this),this.i&&!this.I&&(4==D?Pg(this.l,this):(this.i=!1,ga(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ri(12)):(this.o=0,ri(13)),_(this),g(this)}}}catch(D){}},ut.hb=function(){if(this.g){var n=uu(this.g),e=this.g.fa();this.C<e.length&&(w(this),dy(this,n,e),this.i&&4!=n&&ga(this))}},ut.cancel=function(){this.I=!0,_(this)},ut.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function _f(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(iu(),ri(17)),_(this),this.o=2,g(this)):Dg(this,this.V-n)};var Ne=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lt(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof lt){this.h=void 0!==e?e:n.h,Pn(this,n.j),this.s=n.s,this.g=n.g,us(this,n.m),this.l=n.l,e=n.i;var t=new Kl;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),oo(this,t),this.o=n.o}else n&&(t=String(n).match(Ne))?(this.h=!!e,Pn(this,t[1]||"",!0),this.s=ou(t[2]||""),this.g=ou(t[3]||"",!0),us(this,t[4]),this.l=ou(t[5]||"",!0),oo(this,t[6]||"",!0),this.o=ou(t[7]||"")):(this.h=!!e,this.i=new Kl(null,this.h))}function St(n){return new lt(n)}function Pn(n,e,t){n.j=t?ou(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function us(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function oo(n,e,t){e instanceof Kl?(n.i=e,function jD(n,e){e&&!n.j&&(ao(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Td(this,r),zw(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=el(e,Tf)),n.i=new Kl(e,n.h))}function xn(n,e,t){n.i.set(e,t)}function zl(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ou(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function el(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Df),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Df(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lt.prototype.toString=function(){var n=[],e=this.j;e&&n.push(el(e,au,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(el(e,au,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(el(t,"/"==t.charAt(0)?Dd:Tg,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",el(t,sr)),n.join("")};var au=/[#\/\?@]/g,Tg=/[#\?:]/g,Dd=/[#\?]/g,Tf=/[#\?@]/g,sr=/#/g;function Kl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ao(n){n.g||(n.g=new Map,n.h=0,n.i&&function rt(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Td(n,e){ao(n),e=Sd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function hy(n,e){return ao(n),e=Sd(n,e),n.g.has(e)}function zw(n,e,t){Td(n,e),0<t.length&&(n.i=null,n.g.set(Sd(n,e),kn(t)),n.h+=t.length)}function Sd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Kw(n){this.l=n||YR,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ga&&Nt.g.Ga()&&Nt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=Kl.prototype).add=function(n,e){ao(this),this.i=null,n=Sd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){ao(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ut.oa=function(){ao(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},ut.W=function(n){ao(this);let e=[];if("string"==typeof n)hy(this,n)&&(e=e.concat(this.g.get(Sd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return ao(this),this.i=null,hy(this,n=Sd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var YR=10;function $D(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Ad(n){return n.h?1:n.g?n.g.size:0}function wi(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Sf(n,e){n.g?n.g.add(e):n.h=e}function fy(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function py(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return kn(n.i)}function ii(){}function Af(){this.g=new ii}function gy(n,e,t){const r=t||"";try{ne(n,function(i,a){let l=i;Zn(i)&&(l=ze(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Sg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function xd(n){this.l=n.ac||null,this.j=n.jb||!1}function Ag(n,e){Y.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=xg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Kw.prototype.cancel=function(){if(this.i=py(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ii.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},ii.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},fr(xd,wf),xd.prototype.g=function(){return new Ag(this.l,this.j)},xd.prototype.i=function(n){return function(){return n}}({}),fr(Ag,Y);var xg=0;function Zw(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Rd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,xf(n)}function xf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=Ag.prototype).open=function(n,e){if(this.readyState!=xg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,xf(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rd(this)),this.readyState=xg},ut.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,xf(this)),this.g&&(this.readyState=3,xf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zw(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ut.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Rd(this):xf(this),3==this.readyState&&Zw(this)}},ut.Va=function(n){this.g&&(this.response=this.responseText=n,Rd(this))},ut.Ua=function(n){this.g&&(this.response=n,Rd(this))},ut.ga=function(){this.g&&Rd(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ag.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var WD=Nt.JSON.parse;function Yn(n){Y.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yw,this.K=this.L=!1}fr(Yn,Y);var Yw="",qD=/^https?$/i,my=["POST","PUT"];function Qw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Rf(n),Rg(n)}function Rf(n){n.D||(n.D=!0,te(n,"complete"),te(n,"error"))}function Jw(n){if(n.h&&void 0!==is&&(!n.C[1]||4!=uu(n)||2!=n.aa()))if(n.v&&4==uu(n))vi(n.Ha,0,n);else if(te(n,"readystatechange"),4==uu(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Ne)[1]||null;if(!i&&Nt.self&&Nt.self.location){var a=Nt.self.location.protocol;i=a.substr(0,a.length-1)}r=!qD.test(i?i.toLowerCase():"")}t=r}if(t)te(n,"complete"),te(n,"success");else{n.m=6;try{var l=2<uu(n)?n.g.statusText:""}catch(m){l=""}n.j=l+" ["+n.aa()+"]",Rf(n)}}finally{Rg(n)}}}function Rg(n,e){if(n.g){Xw(n);const t=n.g,r=n.C[0]?xo:null;n.g=null,n.C=null,e||te(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Xw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function uu(n){return n.g?n.g.readyState:0}function eE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Yw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _y(n){let e="";return Ku(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function yy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=_y(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function Mf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function tE(n){this.Ca=0,this.i=[],this.j=new Ed,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Mf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Mf("baseRetryDelayMs",5e3,n),this.bb=Mf("retryDelaySeedMs",1e4,n),this.$a=Mf("forwardChannelMaxRetries",2,n),this.ta=Mf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Kw(n&&n.concurrentRequestLimit),this.Fa=new Af,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function vy(n){if(nE(n),3==n.G){var e=n.U++,t=St(n.F);xn(t,"SID",n.I),xn(t,"RID",e),xn(t,"TYPE","terminate"),ls(n,t),(e=new Xu(n,n.j,e,void 0)).K=2,e.v=zl(St(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ey(e.l,null),e.g.da(e.v)),e.F=Date.now(),ga(e)}Nd(n)}function Mg(n){n.g&&(rE(n),n.g.cancel(),n.g=null)}function nE(n){Mg(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),Md(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function Ng(n){$D(n.h)||n.m||(n.m=!0,ir(n.Ja,n),n.C=0)}function Zl(n,e){var t;t=e?e.m:n.U++;const r=St(n.F);xn(r,"SID",n.I),xn(r,"RID",t),xn(r,"AID",n.T),ls(n,r),n.o&&n.s&&yy(r,n.o,n.s),t=new Xu(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=ZD(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Sf(n.h,t),bf(t,r,e)}function ls(n,e){n.ia&&Ku(n.ia,function(t,r){xn(e,r,t)}),n.l&&ne({},function(t,r){xn(e,r,t)})}function ZD(n,e,t){t=Math.min(n.i.length,t);var r=n.l?on(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let v=i[m].h;const D=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),h=!1;else try{gy(D,l,"req"+v+"_")}catch(S){r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function YD(n){n.g||n.u||(n.Z=1,ir(n.Ia,n),n.A=0)}function kg(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=su(on(n.Ia,n),iE(n,n.A)),n.A++,0))}function rE(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function Go(n){n.g=new Xu(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=St(n.sa);xn(e,"RID","rpc"),xn(e,"SID",n.I),xn(e,"CI",n.L?"0":"1"),xn(e,"AID",n.T),xn(e,"TYPE","xmlhttp"),ls(n,e),n.o&&n.s&&yy(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=zl(St(e)),t.s=null,t.P=!0,Cg(t,n)}function Md(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function Pg(n,e){var t=null;if(n.g==e){Md(n),rE(n),n.g=null;var r=2}else{if(!wi(n.h,e))return;t=e.D,fy(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;te(r=Gl(),new vf(r,t)),Ng(n)}else YD(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function KD(n,e){return!(Ad(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=su(on(n.Ja,n,e),iE(n,n.C)),n.C++,0)))}(n,e)||2==r&&kg(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:tl(n,5);break;case 4:tl(n,10);break;case 3:tl(n,6);break;default:tl(n,2)}}function iE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function tl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=on(n.kb,n);t||(t=new lt("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||Pn(t,"https"),zl(t)),function GD(n,e){const t=new Ed;if(Nt.Image){const r=new Image;r.onload=Po(Sg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Po(Sg,t,r,"TestLoadImage: error",!1,e),r.onabort=Po(Sg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Po(Sg,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ri(2);n.G=0,n.l&&n.l.va(e),Nd(n),nE(n)}function Nd(n){if(n.G=0,n.la=[],n.l){const e=py(n.h);(0!=e.length||0!=n.i.length)&&(pd(n.la,e),pd(n.la,n.i),n.h.i.length=0,kn(n.i),n.i.length=0),n.l.ua()}}function wy(n,e,t){var r=t instanceof lt?St(t):new lt(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),us(r,r.m);else{var i=Nt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new lt(null,void 0);r&&Pn(a,r),e&&(a.g=e),i&&us(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&xn(r,t,e),xn(r,"VER",n.ma),ls(n,r),r}function Ey(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yn(t&&n.Da&&!n.ra?new xd({jb:!0}):n.ra)).Ka(n.H),e}function Og(){}function kd(){if(Ni&&!(10<=Number(Vr)))throw Error("Environmental error: no available transport.")}function cs(n,e){Y.call(this),this.g=new tE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Vl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vl(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new nl(this)}function QD(n){$o.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Yl(){Ef.call(this),this.status=1}function nl(n){this.g=n}(ut=Yn.prototype).Ka=function(n){this.L=n},ut.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Cf.g(),this.C=function Eg(n){return n.h||(n.h=n.i())}(this.u?this.u:Cf),this.g.onreadystatechange=on(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Qw(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Nt.FormData&&n instanceof Nt.FormData,!(0<=df(my,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xw(this),0<this.B&&((this.K=function zD(n){return Ni&&function _g(){return function Vn(n){var e=gf;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=mg(String(no)).split("."),t=mg("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=hf(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||hf(0==i[2].length,0==a[2].length)||hf(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=on(this.qa,this)):this.A=vi(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Qw(this,a)}},ut.qa=function(){void 0!==is&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,te(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,te(this,"complete"),te(this,"abort"),Rg(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rg(this,!0)),Yn.X.M.call(this)},ut.Ha=function(){this.s||(this.F||this.v||this.l?Jw(this):this.fb())},ut.fb=function(){Jw(this)},ut.aa=function(){try{return 2<uu(this)?this.g.status:-1}catch(n){return-1}},ut.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ut.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),WD(e)}},ut.Ea=function(){return this.m},ut.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=tE.prototype).ma=8,ut.G=1,ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Xu(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=Zu(a),Pi(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ZD(this,i,e),xn(t=St(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),ls(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(_y(a)))+"&"+e:this.o&&yy(t,this.o,a)),Sf(this.h,i),this.Ya&&xn(t,"TYPE","init"),this.O?(xn(t,"$req",e),xn(t,"SID","null"),i.Z=!0,bf(i,t,null)):bf(i,t,e),this.G=2}}else 3==this.G&&(n?Zl(this,n):0==this.i.length||$D(this.h)||Zl(this))},ut.Ia=function(){if(this.u=null,Go(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=su(on(this.eb,this),n)}},ut.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ri(10),Mg(this),Go(this))},ut.cb=function(){null!=this.v&&(this.v=null,Mg(this),kg(this),ri(19))},ut.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ri(2)):(this.j.info("Failed to ping google.com"),ri(1))},(ut=Og.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Ra=function(){},kd.prototype.g=function(n,e){return new cs(n,e)},fr(cs,Y),cs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ri(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=wy(n,null,n.V),Ng(n)},cs.prototype.close=function(){vy(this.g)},cs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ze(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Ng(e)},cs.prototype.M=function(){this.g.l=null,delete this.j,vy(this.g),delete this.g,cs.X.M.call(this)},fr(QD,$o),fr(Yl,Ef),fr(nl,Og),nl.prototype.xa=function(){te(this.g,"a")},nl.prototype.wa=function(n){te(this.g,new QD(n))},nl.prototype.va=function(n){te(this.g,new Yl)},nl.prototype.ua=function(){te(this.g,"b")},kd.prototype.createWebChannel=kd.prototype.g,cs.prototype.send=cs.prototype.u,cs.prototype.open=cs.prototype.m,cs.prototype.close=cs.prototype.close,Cd.NO_ERROR=0,Cd.TIMEOUT=8,Cd.HTTP_ERROR=6,wg.COMPLETE="complete",Id.EventType=as,as.OPEN="a",as.CLOSE="b",as.ERROR="c",as.MESSAGE="d",Y.prototype.listen=Y.prototype.N,Yn.prototype.listenOnce=Yn.prototype.O,Yn.prototype.getLastError=Yn.prototype.Oa,Yn.prototype.getLastErrorCode=Yn.prototype.Ea,Yn.prototype.getStatus=Yn.prototype.aa,Yn.prototype.getResponseJson=Yn.prototype.Sa,Yn.prototype.getResponseText=Yn.prototype.fa,Yn.prototype.send=Yn.prototype.da,Yn.prototype.setWithCredentials=Yn.prototype.Ka;var sE=rs.createWebChannelTransport=function(){return new kd},JD=rs.getStatEventTarget=function(){return Gl()},Nf=rs.ErrorCode=Cd,XD=rs.EventType=wg,eT=rs.Event=ru,oE=rs.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},tT=rs.FetchXmlHttpFactory=xd,Fg=rs.WebChannel=Id,nT=rs.XhrIo=Yn;const Cy="@firebase/firestore";class Ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");let Ql="9.14.0";const ma=new pi.Yd("@firebase/firestore");function Iy(){return ma.logLevel}function Be(n,...e){if(ma.logLevel<=pi.in.DEBUG){const t=e.map(Lg);ma.debug(`Firestore (${Ql}): ${n}`,...t)}}function pr(n,...e){if(ma.logLevel<=pi.in.ERROR){const t=e.map(Lg);ma.error(`Firestore (${Ql}): ${n}`,...t)}}function ks(n,...e){if(ma.logLevel<=pi.in.WARN){const t=e.map(Lg);ma.warn(`Firestore (${Ql}): ${n}`,...t)}}function Lg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Ql}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function Rt(n,e){n||ct()}function tt(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ug{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ur.UNAUTHENTICATED))}shutdown(){}}class Bg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jg{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Br,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,ve.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Br)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new Ug(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Ur(e)}}class uE{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Rt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class by{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new uE(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ty{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.A=t.token,new Dy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function iT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Sy{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=iT(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function Pd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ay(n){return n+"\0"}class Un{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Un.fromMillis(Date.now())}static fromDate(e){return Un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Un(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new Un(0,0))}static max(){return new At(new Un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $g{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===$g.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $g?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends $g{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const sT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends $g{construct(e,t,r){return new or(e,t,r)}static isValidIdentifier(e){return sT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new or(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Fe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Fe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Fe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(t)}static emptyPath(){return new or([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(cn.fromString(e))}static fromName(e){return new Xe(cn.fromString(e).popFirst(5))}static empty(){return new Xe(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new cn(e.slice()))}}class Gg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ps(n){return n.fields.find(e=>2===e.kind)}function Jl(n){return n.fields.filter(e=>2!==e.kind)}Gg.UNKNOWN_ID=-1;class Wg{constructor(e,t){this.fieldPath=e,this.kind=t}}class kf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kf(0,Os.min())}}function cE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new Un(t+1,0):new Un(t,r));return new Os(i,Xe.empty(),e)}function xy(n){return new Os(n.readTime,n.key,-1)}class Os{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Os(At.min(),Xe.empty(),-1)}static max(){return new Os(At.max(),Xe.empty(),-1)}}function Ry(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}const dE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function lu(n){return qg.apply(this,arguments)}function qg(){return qg=(0,ve.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==dE)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),qg.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(D=>{l[v]=D,++h,h===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new ce((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Xl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Br,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Pf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Of(r.target.error);this.P.reject(new Pf(e,i))}}static open(e,t,r,i){try{return new Xl(t,e.transaction(i,r))}catch(a){throw new Pf(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cu(t)}}class Dr{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Dr.D((0,F.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),du(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,F.hl)())return!1;if(Dr.N())return!0;const e=(0,F.z$)(),t=Dr.D(e),r=0<t&&t<10,i=Dr.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Pf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Fe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Fe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Pf(e,h))},a.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ve.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const m=Xl.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(D=>(m.V(),D)).catch(D=>(m.abort(D),ce.reject(D))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,D="FirebaseError"!==v.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",v.message,"Retrying:",D),a.close(),!D)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class hE{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return du(this.U.delete())}}class Pf extends Fe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _a(n){return"IndexedDbTransactionError"===n.name}class cu{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),du(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),du(this.store.add(e))}get(e){return du(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),du(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),du(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ce((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=a=>{const l=Of(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new ce((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new hE(h),v=t(h.primaryKey,h.value,m);if(v instanceof ce){const D=v.catch(S=>(m.done(),ce.reject(S)));r.push(D)}m.isDone?i():null===m.G?h.continue():h.continue(m.G)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function du(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Of(r.target.error);t(i)}})}let My=!1;function Of(n){const e=Dr.D((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return My||(My=!0,setTimeout(()=>{throw r},0)),r}}return n}class QR{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){_a(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield lu(r)}yield t.nt(6e4)}))}}class fE{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ce.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Be("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(h=>(Be("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=xy(a);Ry(l,r)>0&&(r=l)}),new Os(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Ff(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ya(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Fs.at=-1;class Qn{constructor(e,t){this.comparator=e,this.root=t||Oi.EMPTY}insert(e,t){return new Qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Oi.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Od(this.root,e,this.comparator,!1)}getReverseIterator(){return new Od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Od(this.root,e,this.comparator,!0)}}class Od{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Oi.RED,this.left=null!=i?i:Oi.EMPTY,this.right=null!=a?a:Oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Oi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Oi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Oi.EMPTY=null,Oi.RED=!0,Oi.BLACK=!1,Oi.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Oi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class On{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pE(this.data.getIterator())}getIteratorFrom(e){return new pE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new On(this.comparator);return t.data=e,t}}class pE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fd(n){return n.hasNext()?n.getNext():void 0}class Ls{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new Ls([])}unionWith(e){let t=new On(or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new si(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}si.EMPTY_BYTE_STRING=new si("");const aT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ec(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=aT.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function rl(n){return"string"==typeof n?si.fromBase64String(n):si.fromUint8Array(n)}function Ny(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Kg(n){const e=n.mapValue.fields.__previous_value__;return Ny(e)?Kg(e):e}function Zg(n){const e=ec(n.mapValue.fields.__local_write_time__.timestampValue);return new Un(e.seconds,e.nanos)}class JR{constructor(e,t,r,i,a,l,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class tc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new tc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof tc&&e.projectId===this.projectId&&e.database===this.database}}function Yg(n){return null==n}function Qg(n){return 0===n&&1/n==-1/0}function uT(n){return"number"==typeof n&&Number.isInteger(n)&&!Qg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const nc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ky={nullValue:"NULL_VALUE"};function Ld(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ny(n)?4:_E(n)?9007199254740991:10:ct()}function hu(n,e){if(n===e)return!0;const t=Ld(n);if(t!==Ld(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zg(n).isEqual(Zg(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ec(r.timestampValue),l=ec(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,rl(n.bytesValue).isEqual(rl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ar(r.geoPointValue.latitude)===ar(i.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ar(r.integerValue)===ar(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=ar(r.doubleValue),l=ar(i.doubleValue);return a===l?Qg(a)===Qg(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Pd(n.arrayValue.values||[],e.arrayValue.values||[],hu);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Ff(a)!==Ff(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!hu(a[h],l[h])))return!1;return!0}(n,e);default:return ct()}var i}function uo(n,e){return void 0!==(n.values||[]).find(t=>hu(t,e))}function va(n,e){if(n===e)return 0;const t=Ld(n),r=Ld(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=ar(i.integerValue||i.doubleValue),h=ar(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return mE(n.timestampValue,e.timestampValue);case 4:return mE(Zg(n),Zg(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(i,a){const l=rl(i),h=rl(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let m=0;m<l.length&&m<h.length;m++){const v=Ft(l[m],h[m]);if(0!==v)return v}return Ft(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ft(ar(i.latitude),ar(a.latitude));return 0!==l?l:Ft(ar(i.longitude),ar(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let m=0;m<l.length&&m<h.length;++m){const v=va(l[m],h[m]);if(v)return v}return Ft(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===nc.mapValue&&a===nc.mapValue)return 0;if(i===nc.mapValue)return 1;if(a===nc.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),m=a.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let D=0;D<h.length&&D<v.length;++D){const S=Ft(h[D],v[D]);if(0!==S)return S;const N=va(l[h[D]],m[v[D]]);if(0!==N)return N}return Ft(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ct()}}function mE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=ec(n),r=ec(e),i=Ft(t.seconds,r.seconds);return 0!==i?i:Ft(t.nanos,r.nanos)}function rc(n){return Lf(n)}function Lf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ec(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?rl(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Lf(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Lf(r.fields[h])}`;return a+"}"}(n.mapValue):ct();var e}function il(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vf(n){return!!n&&"integerValue"in n}function Uf(n){return!!n&&"arrayValue"in n}function fu(n){return!!n&&"nullValue"in n}function Py(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jg(n){return!!n&&"mapValue"in n}function ic(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ya(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ic(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ic(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _E(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function yE(n){return"nullValue"in n?ky:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?il(tc.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function lT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?il(tc.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?nc:ct()}function vE(n,e){const t=va(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Vd(n,e){const t=va(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(t)}setAll(e){let t=or.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=ic(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Jg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ya(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new gr(ic(this.value))}}function Xg(n){const e=[];return ya(n.fields,(t,r)=>{const i=new or([t]);if(Jg(r)){const a=Xg(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ls(e)}class In{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new In(e,0,At.min(),At.min(),gr.empty(),0)}static newFoundDocument(e,t,r){return new In(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new In(e,2,t,At.min(),gr.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,At.min(),gr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bf{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ht=null}}function sc(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Bf(n,e,t,r,i,a,l)}function oc(n){const e=tt(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+rc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Yg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rc(r)).join(",")),e.ht=t}return e.ht}function Ud(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!fT(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!hu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gT(n.startAt,e.startAt)&&gT(n.endAt,e.endAt)}function Bd(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jd(n,e){return n.filters.filter(t=>t instanceof Ei&&t.field.isEqual(e))}function Oy(n,e,t){let r=ky,i=!0;for(const a of jd(n,e)){let l=ky,h=!0;switch(a.op){case"<":case"<=":l=yE(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=ky}vE({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];vE({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function jf(n,e,t){let r=nc,i=!0;for(const a of jd(n,e)){let l=nc,h=!0;switch(a.op){case">=":case">":l=lT(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=nc}Vd({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Vd({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Ei extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new EE(e,t,r):"array-contains"===t?new cT(e,r):"in"===t?new IE(e,r):"not-in"===t?new dT(e,r):"array-contains-any"===t?new hT(e,r):new Ei(e,t,r)}static lt(e,t,r){return"in"===t?new XR(e,r):new CE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(va(t,this.value)):null!==t&&Ld(this.value)===Ld(t)&&this.ft(va(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class EE extends Ei{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.ft(t)}}class XR extends Ei{constructor(e,t){super(e,"in",t),this.keys=Fy(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class CE extends Ei{constructor(e,t){super(e,"not-in",t),this.keys=Fy(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fy(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class cT extends Ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uf(t)&&uo(t.arrayValue,this.value)}}class IE extends Ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uo(this.value.arrayValue,t)}}class dT extends Ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!uo(this.value.arrayValue,t)}}class hT extends Ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uo(this.value.arrayValue,r))}}class jr{constructor(e,t){this.position=e,this.inclusive=t}}class Hd{constructor(e,t="asc"){this.field=e,this.dir=t}}function fT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function pT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):va(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function gT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hu(n.position[t],e.position[t]))return!1;return!0}class wa{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=m,this._t=null,this.wt=null}}function mT(n,e,t,r,i,a,l,h){return new wa(n,e,t,r,i,a,l,h)}function $d(n){return new wa(n)}function em(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function tm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ly(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Vy(n){return null!==n.collectionGroup}function Gd(n){const e=tt(n);if(null===e._t){e._t=[];const t=Ly(e),r=tm(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Hd(t)),e._t.push(new Hd(or.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Hd(or.keyField(),a))}}}return e._t}function Fi(n){const e=tt(n);if(!e.wt)if("F"===e.limitType)e.wt=sc(e.path,e.collectionGroup,Gd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Gd(e))t.push(new Hd(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new jr(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new jr(e.startAt.position,e.startAt.inclusive):null;e.wt=sc(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function nm(n,e,t){return new wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wd(n,e){return Ud(Fi(n),Fi(e))&&n.limitType===e.limitType}function bE(n){return`${oc(Fi(n))}|lt:${n.limitType}`}function Uy(n){return`Query(target=${function wE(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${rc(r.value)}`;var r}).join(", ")}]`),Yg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>rc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>rc(t)).join(",")),`Target(${e})`}(Fi(n))}; limitType=${n.limitType})`}function rm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=pT(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Gd(t),r)||t.endAt&&!function(i,a,l){const h=pT(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Gd(t),r)));var t,r}function By(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DE(n){return(e,t)=>{let r=!1;for(const i of Gd(n)){const a=Ea(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Ea(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),m=l.data.field(i);return null!==h&&null!==m?va(h,m):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function im(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qg(e)?"-0":e}}function TE(n){return{integerValue:""+n}}function SE(n,e){return uT(e)?TE(e):im(n,e)}class jy{constructor(){this._=void 0}}function AE(n,e,t){return n instanceof qd?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof pu?RE(n,e):n instanceof ac?Hf(n,e):function(r,i){const a=xE(r,i),l=ME(a)+ME(r.yt);return Vf(a)&&Vf(r.yt)?TE(l):im(r.It,l)}(n,e)}function _T(n,e,t){return n instanceof pu?RE(n,e):n instanceof ac?Hf(n,e):t}function xE(n,e){return n instanceof sl?Vf(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class qd extends jy{}class pu extends jy{constructor(e){super(),this.elements=e}}function RE(n,e){const t=sm(e);for(const r of n.elements)t.some(i=>hu(i,r))||t.push(r);return{arrayValue:{values:t}}}class ac extends jy{constructor(e){super(),this.elements=e}}function Hf(n,e){let t=sm(e);for(const r of n.elements)t=t.filter(i=>!hu(i,r));return{arrayValue:{values:t}}}class sl extends jy{constructor(e,t){super(),this.It=e,this.yt=t}}function ME(n){return ar(n.integerValue||n.doubleValue)}function sm(n){return Uf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class uc{constructor(e,t){this.field=e,this.transform=t}}class eM{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Hy{}function kE(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Gf(n.key,ur.none()):new lc(n.key,n.data,ur.none());{const t=n.data,r=gr.empty();let i=new On(or.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Ci(n.key,r,new Ls(i.toArray()),ur.none())}}function PE(n,e,t){n instanceof lc?function(r,i,a){const l=r.value.clone(),h=FE(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ci?function(r,i,a){if(!zd(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=FE(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll($f(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Kd(n,e,t,r){return n instanceof lc?function(i,a,l,h){if(!zd(i.precondition,a))return l;const m=i.value.clone(),v=LE(i.fieldTransforms,h,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ci?function(i,a,l,h){if(!zd(i.precondition,a))return l;const m=LE(i.fieldTransforms,h,a),v=a.data;return v.setAll($f(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,zd(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function OE(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=xE(r.transform,i||null);null!=a&&(null===t&&(t=gr.empty()),t.set(r.field,a))}return t||null}function $y(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Pd(t,r,(i,a)=>function NE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof pu&&r instanceof pu||t instanceof ac&&r instanceof ac?Pd(t.elements,r.elements,hu):t instanceof sl&&r instanceof sl?hu(t.yt,r.yt):t instanceof qd&&r instanceof qd);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class lc extends Hy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ci extends Hy{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $f(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function FE(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,_T(l,h,t[i]))}return r}function LE(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,AE(a,l,e))}return r}class Gf extends Hy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wf extends Hy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VE{constructor(e){this.count=e}}var mr,Qt;function UE(n){switch(n){default:return ct();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function om(n){if(void 0===n)return pr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case mr.OK:return pe.OK;case mr.CANCELLED:return pe.CANCELLED;case mr.UNKNOWN:return pe.UNKNOWN;case mr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case mr.INTERNAL:return pe.INTERNAL;case mr.UNAVAILABLE:return pe.UNAVAILABLE;case mr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case mr.NOT_FOUND:return pe.NOT_FOUND;case mr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case mr.ABORTED:return pe.ABORTED;case mr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case mr.DATA_LOSS:return pe.DATA_LOSS;default:return ct()}}(Qt=mr||(mr={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class gu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return zg(this.inner)}size(){return this.innerSize}}const BE=new Qn(Xe.comparator);function qi(){return BE}const jE=new Qn(Xe.comparator);function cc(...n){let e=jE;for(const t of n)e=e.insert(t.key,t);return e}function HE(n){let e=jE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ca(){return Ia()}function Gy(){return Ia()}function Ia(){return new gu(n=>n.toString(),(n,e)=>n.isEqual(e))}const $E=new Qn(Xe.comparator),yT=new On(Xe.comparator);function $t(...n){let e=yT;for(const t of n)e=e.add(t);return e}const Zd=new On(Ft);function am(){return Zd}class qf{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,zf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qf(At.min(),i,am(),qi(),$t())}}class zf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zf(r,t,$t(),$t(),$t())}}class um{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class Wo{constructor(e,t){this.targetId=e,this.At=t}}class lm{constructor(e,t,r=si.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Wy{constructor(){this.Rt=0,this.bt=zy(),this.Pt=si.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=$t(),t=$t(),r=$t();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new zf(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=zy()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class GE{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=qi(),this.qt=qy(),this.Kt=new On(Ft)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(Bd(a))if(0===r){const l=new Xe(a.path);this.jt(t,l,In.newNoDocument(l,At.min()))}else Rt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const h=this.Xt(l);if(h){if(a.current&&Bd(h.target)){const m=new Xe(h.target.path);null!==this.Ut.get(m)||this.ee(l,m)||this.jt(l,m,In.newNoDocument(m,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=$t();this.qt.forEach((a,l)=>{let h=!0;l.forEachWhile(m=>{const v=this.Xt(m);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new qf(e,t,this.Kt,this.Ut,r);return this.Ut=qi(),this.qt=qy(),this.Kt=new On(Ft),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Wy,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new On(Ft),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Wy),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function qy(){return new Qn(Xe.comparator)}function zy(){return new Qn(Xe.comparator)}const vT={asc:"ASCENDING",desc:"DESCENDING"},wT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ET{constructor(e,t){this.databaseId=e,this.gt=t}}function Kf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ky(n,e){return n.gt?e.toBase64():e.toUint8Array()}function tM(n,e){return Kf(n,e.toTimestamp())}function Jr(n){return Rt(!!n),At.fromTimestamp(function(e){const t=ec(e);return new Un(t.seconds,t.nanos)}(n))}function Zy(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function WE(n){const e=cn.fromString(n);return Rt(Yf(e)),e}function cm(n,e){return Zy(n.databaseId,e.path)}function mu(n,e){const t=WE(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(Yy(t))}function Zf(n,e){return Zy(n.databaseId,e)}function qE(n){const e=WE(n);return 4===e.length?cn.emptyPath():Yy(e)}function Yd(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Yy(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function CT(n,e,t){return{name:cm(n,e),fields:t.value.mapValue.fields}}function lo(n,e,t){const r=mu(n,e.name),i=Jr(e.updateTime),a=new gr({mapValue:{fields:e.fields}}),l=In.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Qd(n,e){let t;if(e instanceof lc)t={update:CT(n,e.key,e.value)};else if(e instanceof Gf)t={delete:cm(n,e.key)};else if(e instanceof Ci)t={update:CT(n,e.key,e.data),updateMask:TT(e.fieldMask)};else{if(!(e instanceof Wf))return ct();t={verify:cm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof qd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof pu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ac)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sl)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:tM(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function dm(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ur.updateTime(Jr(i.updateTime)):void 0!==i.exists?ur.exists(i.exists):ur.none():ur.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Rt("REQUEST_TIME"===l.setToServerValue),h=new qd):"appendMissingElements"in l?h=new pu(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new ac(l.removeAllFromArray.values||[]):"increment"in l?h=new sl(a,l.increment):ct();const m=or.fromServerFormat(l.fieldPath);return new uc(m,h)}(n,i)):[];var i;if(e.update){const i=mu(n,e.update.name),a=new gr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ls((e.updateMask.fieldPaths||[]).map(v=>or.fromServerFormat(v)));return new Ci(i,a,l,t,r)}return new lc(i,a,t,r)}if(e.delete){const i=mu(n,e.delete);return new Gf(i,t)}if(e.verify){const i=mu(n,e.verify);return new Wf(i,t)}return ct()}function KE(n,e){return{documents:[Zf(n,e.path)]}}function ZE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Zf(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Zf(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(D=>function(S){if("=="===S.op){if(Py(S.value))return{unaryFilter:{field:Jd(S.field),op:"IS_NAN"}};if(fu(S.value))return{unaryFilter:{field:Jd(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(Py(S.value))return{unaryFilter:{field:Jd(S.field),op:"IS_NOT_NAN"}};if(fu(S.value))return{unaryFilter:{field:Jd(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jd(S.field),op:IT(S.op),value:S.value}}}(D));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Jd((D=v).field),direction:Xy(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.gt||Yg(v)?v:{value:v});var v,h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Qy(n){let e=qE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=YE(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new Hd(Xd((S=D).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Yg(S)?null:S}(t.limit));let m=null;var D;t.startAt&&(m=new jr((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new jr(D.values||[],!D.before)}(t.endAt)),mT(e,i,l,a,h,"F",m,v)}function YE(n){return n?void 0!==n.unaryFilter?[DT(n)]:void 0!==n.fieldFilter?[bT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>YE(e)).reduce((e,t)=>e.concat(t)):ct():[]}function Xy(n){return vT[n]}function IT(n){return wT[n]}function Jd(n){return{fieldPath:n.canonicalString()}}function Xd(n){return or.fromServerFormat(n.fieldPath)}function bT(n){return Ei.create(Xd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function DT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Xd(n.unaryFilter.field);return Ei.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Xd(n.unaryFilter.field);return Ei.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Xd(n.unaryFilter.field);return Ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Xd(n.unaryFilter.field);return Ei.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function TT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yf(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Hr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=eh(e)),e=ST(n.get(t),e);return eh(e)}function ST(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function eh(n){return n+"\x01\x01"}function ba(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ct(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ct()}a=l+2}return new cn(r)}const QE=["userId","batchId"];function th(n,e){return[n,Hr(e)]}function qo(n,e,t){return[n,Hr(e),t]}const Qf={},Li=["prefixPath","collectionGroup","readTime","documentId"],dc=["prefixPath","collectionGroup","documentId"],hm=["collectionGroup","readTime","prefixPath","documentId"],co=["canonicalId","targetId"],ev=["targetId","path"],nh=["path","targetId"],rh=["collectionId","parent"],ih=["indexId","uid"],sh=["uid","sequenceNumber"],oh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ah=["indexId","uid","orderedDocumentKey"],uh=["userId","collectionPath","documentId"],lh=["userId","collectionPath","largestBatchId"],ch=["userId","collectionGroup","largestBatchId"],tv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],JE=[...tv,"documentOverlays"],nv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rv=nv,XE=[...rv,"indexConfiguration","indexState","indexEntries"];class fm extends Lt{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Xr(n,e){const t=tt(n);return Dr.M(t.ie,e)}class pm{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&PE(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Kd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Gy();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const m=kE(l,h);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$t())}isEqual(e){return this.batchId===e.batchId&&Pd(this.mutations,e.mutations,(t,r)=>$y(t,r))&&Pd(this.baseMutations,e.baseMutations,(t,r)=>$y(t,r))}}class gm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=$E;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new gm(e,t,r,i)}}class iv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _u{constructor(e,t,r,i,a=At.min(),l=At.min(),h=si.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new _u(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new _u(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new _u(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class eC{constructor(e){this.re=e}}function sv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:cm(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Kf(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:hc(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:hc(e.version)}}var i,a;return r}function mm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function hc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ol(n){const e=new Un(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function fc(n,e){const t=(e.baseMutations||[]).map(a=>dm(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>dm(n.re,a)),i=Un.fromMillis(e.localWriteTimeMs);return new pm(e.batchId,i,t,r)}function dh(n){const e=ol(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ol(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=Fi($d(qE(i.documents[0])))):r=Fi(Qy(n.query)),new _u(r,n.targetId,0,n.lastListenSequenceNumber,e,t,si.fromBase64String(n.resumeToken))}function nC(n,e){const t=hc(e.snapshotVersion),r=hc(e.lastLimboFreeSnapshotVersion);let i;i=Bd(e.target)?KE(n.re,e.target):ZE(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ov(n){const e=Qy({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?nm(e,e.limit,"L"):e}function rC(n,e){return new iv(e.largestBatchId,dm(n.re,e.overlayMutation))}function iC(n,e){const t=e.path.lastSegment();return[n,Hr(e.path.popLast()),t]}function _m(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:hc(r.readTime),documentKey:Hr(r.documentKey.path),largestBatchId:r.largestBatchId}}class av{getBundleMetadata(e,t){return sC(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ol(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return sC(e).put({bundleId:(r=t).id,createTime:hc(Jr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return AT(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:ov(i.bundledQuery),readTime:ol(i.readTime)};var i})}saveNamedQuery(e,t){return AT(e).put({name:(r=t).name,readTime:hc(Jr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function sC(n){return Xr(n,"bundles")}function AT(n){return Xr(n,"namedQueries")}class uv{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new uv(e,t.uid||"")}getOverlay(e,t){return ym(e).get(iC(this.userId,t)).next(r=>r?rC(this.It,r):null)}getOverlays(e,t){const r=Ca();return ce.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new iv(t,l);i.push(this.ue(e,h))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Hr(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(ym(e).Y("collectionPathOverlayIndex",h))}),ce.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ca(),a=Hr(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ym(e).W("collectionPathOverlayIndex",l).next(h=>{for(const m of h){const v=rC(this.It,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Ca();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ym(e).Z({index:"collectionGroupOverlayIndex",range:h},(m,v,D)=>{const S=rC(this.It,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}ue(e,t){return ym(e).put(function(r,i,a){const[l,h,m]=iC(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Qd(r.re,a.mutation)}}(this.It,this.userId,t))}}function ym(n){return Xr(n,"documentOverlays")}class pc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Qg(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(rl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?_E(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ct()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Xe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function oC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xT(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=oC(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}pc.Te=new pc;class RT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=xT(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=xT(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class hh{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class MT{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class fh{constructor(){this.Be=new RT,this.Le=new hh(this.Be),this.Ue=new MT(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class gc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gc(this.indexId,this.documentKey,this.arrayValue,r)}}function al(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Jf(n.arrayValue,e.arrayValue),0!==t?t:(t=Jf(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function Jf(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class NT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Ps(e);if(void 0!==t&&!this.ze(t))return!1;const r=Jl(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class aC{constructor(){this.Ye=new lv}addToCollectionParentIndex(e,t){return this.Ye.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Os.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class lv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new On(cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new On(cn.comparator)).toArray()}}const vm=new Uint8Array(0);class kT{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new lv,this.Ze=new gu(r=>oc(r),(r,i)=>Ud(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Hr(i)};return uC(e).put(a)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ay(t),""],!1,!0);return uC(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(ba(l.parent))}return r})}addFieldIndex(e,t){const r=ep(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=tp(e);return a.next(h=>{l.put(_m(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=ep(e),i=tp(e),a=Xf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Xf(e);let i=!0;const a=new Map;return ce.forEach(this.tn(t),l=>this.en(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=$t();const h=[];return ce.forEach(a,(m,v)=>{var D;Be("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(at=>`${at.fieldPath}:${at.kind}`).join(",")}`} to execute ${oc(t)}`);const S=function(at,pt){const xt=Ps(pt);if(void 0===xt)return null;for(const Vt of jd(at,xt.fieldPath))switch(Vt.op){case"array-contains-any":return Vt.value.arrayValue.values||[];case"array-contains":return[Vt.value]}return null}(v,m),N=function(at,pt){const xt=new Map;for(const Vt of Jl(pt))for(const Rr of jd(at,Vt.fieldPath))switch(Rr.op){case"==":case"in":xt.set(Vt.fieldPath.canonicalString(),Rr.value);break;case"not-in":case"!=":return xt.set(Vt.fieldPath.canonicalString(),Rr.value),Array.from(xt.values())}return null}(v,m),O=function(at,pt){const xt=[];let Vt=!0;for(const Rr of Jl(pt)){const ku=0===Rr.kind?Oy(at,Rr.fieldPath,at.startAt):jf(at,Rr.fieldPath,at.startAt);xt.push(ku.value),Vt&&(Vt=ku.inclusive)}return new jr(xt,Vt)}(v,m),z=function(at,pt){const xt=[];let Vt=!0;for(const Rr of Jl(pt)){const ku=0===Rr.kind?jf(at,Rr.fieldPath,at.endAt):Oy(at,Rr.fieldPath,at.endAt);xt.push(ku.value),Vt&&(Vt=ku.inclusive)}return new jr(xt,Vt)}(v,m),fe=this.nn(m,v,O),Ee=this.nn(m,v,z),Je=this.sn(m,v,N),ht=this.rn(m.indexId,S,fe,O.inclusive,Ee,z.inclusive,Je);return ce.forEach(ht,at=>r.J(at,t.limit).next(pt=>{pt.forEach(xt=>{const Vt=Xe.fromSegments(xt.documentKey);l.has(Vt)||(l=l.add(Vt),h.push(Vt))})}))}).next(()=>h)}return ce.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,h){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),D=[];for(let S=0;S<m;++S){const N=t?this.on(t[S/v]):vm,O=this.un(e,N,r[S%v],i),z=this.cn(e,N,a[S%v],l),fe=h.map(Ee=>this.un(e,N,Ee,!0));D.push(...this.createRange(O,z,fe))}return D}un(e,t,r,i){const a=new gc(e,Xe.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new gc(e,Xe.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new NT(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.We(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return ce.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new On(or.comparator),m=!1;for(const v of l.filters){const D=v;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?m=!0:h=h.add(D.field))}for(const v of l.orderBy)v.field.isKeyField()||(h=h.add(v.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new fh;for(const i of Jl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);pc.Te.ce(a,l)}return r.$e()}on(e){const t=new fh;return pc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new fh;return pc.Te.ce(il(this.databaseId,t),r.qe(function(i){const a=Jl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new fh);let a=0;for(const l of Jl(e)){const h=r[a++];for(const m of i)if(this.ln(t,l.fieldPath)&&Uf(h))i=this.fn(i,l,h);else{const v=m.qe(l.kind);pc.Te.ce(h,v)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const m=new fh;m.seed(h.$e()),pc.Te.ce(l,m.qe(t.kind)),a.push(m)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Ei&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ep(e),i=tp(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return ce.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(v,D){const S=D?new kf(D.sequenceNumber,new Os(ol(D.readTime),new Xe(ba(D.documentKey)),D.largestBatchId)):kf.empty(),N=v.fields.map(([O,z])=>new Wg(or.fromServerFormat(O),z));return new Gg(v.indexId,v.collectionGroup,N,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Ft(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ep(e),a=tp(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ce.forEach(h,m=>a.put(_m(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ce.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ce.forEach(h,m=>this.wn(e,i,m).next(v=>{const D=this.mn(a,m);return v.isEqual(D)?ce.resolve():this.gn(e,a,m,v,D)}))))})}yn(e,t,r,i){return Xf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Xf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Xf(e);let a=new On(al);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,h)=>{a=a.add(new gc(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}mn(e,t){let r=new On(al);const i=this.an(t,e);if(null==i)return r;const a=Ps(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Uf(l))for(const h of l.arrayValue.values||[])r=r.add(new gc(t.indexId,e.key,this.on(h),i))}else r=r.add(new gc(t.indexId,e.key,vm,i));return r}gn(e,t,r,i,a){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,v,D,S){const N=h.getIterator(),O=m.getIterator();let z=Fd(N),fe=Fd(O);for(;z||fe;){let Ee=!1,Je=!1;if(z&&fe){const ht=v(z,fe);ht<0?Je=!0:ht>0&&(Ee=!0)}else null!=z?Je=!0:Ee=!0;Ee?(D(fe),fe=Fd(O)):Je?(S(z),z=Fd(N)):(z=Fd(N),fe=Fd(O))}}(i,a,al,h=>{l.push(this.yn(e,t,r,h))},h=>{l.push(this.pn(e,t,r,h))}),ce.waitFor(l)}_n(e){let t=1;return tp(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>al(l,h)).filter((l,h,m)=>!h||0!==al(l,m[h-1]));const i=[];i.push(e);for(const l of r){const h=al(l,e),m=al(l,t);if(0===h)i[0]=e.Ke();else if(h>0&&m<0)i.push(l),i.push(l.Ke());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,vm,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,vm,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cv)}getMinOffset(e,t){return ce.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ct())).next(cv)}}function uC(n){return Xr(n,"collectionParents")}function Xf(n){return Xr(n,"indexEntries")}function ep(n){return Xr(n,"indexConfiguration")}function tp(n){return Xr(n,"indexState")}function cv(n){Rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Ry(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Os(e.readTime,e.documentKey,t)}const dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vi(e,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function PT(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.Z({range:l},(D,S,N)=>(h++,N.delete()));a.push(m.next(()=>{Rt(1===h)}));const v=[];for(const D of t.mutations){const S=qo(e,D.key.path,t.batchId);a.push(i.delete(S)),v.push(D.key)}return ce.waitFor(a).next(()=>v)}function ph(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(41943040,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);class wm{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Rt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new wm(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ho(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=mc(e),l=ho(e);return l.add({}).next(h=>{Rt("number"==typeof h);const m=new pm(h,t,r,i),v=function(N,O,z){const fe=z.baseMutations.map(Je=>Qd(N.re,Je)),Ee=z.mutations.map(Je=>Qd(N.re,Je));return{userId:O,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:fe,mutations:Ee}}(this.It,this.userId,m),D=[];let S=new On((N,O)=>Ft(N.canonicalString(),O.canonicalString()));for(const N of i){const O=qo(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),D.push(l.put(v)),D.push(a.put(O,Qf))}return S.forEach(N=>{D.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.In[h]=m.keys()}),ce.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return ho(e).get(t).next(r=>r?(Rt(r.userId===this.userId),fc(this.It,r)):null)}Tn(e,t){return this.In[t]?ce.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ho(e).Z({index:"userMutationsIndex",range:i},(l,h,m)=>{h.userId===this.userId&&(Rt(h.batchId>=r),a=fc(this.It,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ho(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ho(e).W("userMutationsIndex",t).next(r=>r.map(i=>fc(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=th(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return mc(e).Z({range:i},(l,h,m)=>{const[v,D,S]=l,N=ba(D);if(v===this.userId&&t.path.isEqual(N))return ho(e).get(S).next(O=>{if(!O)throw ct();Rt(O.userId===this.userId),a.push(fc(this.It,O))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Ft);const i=[];return t.forEach(a=>{const l=th(this.userId,a.path),h=IDBKeyRange.lowerBound(l),m=mc(e).Z({range:h},(v,D,S)=>{const[N,O,z]=v,fe=ba(O);N===this.userId&&a.path.isEqual(fe)?r=r.add(z):S.done()});i.push(m)}),ce.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=th(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new On(Ft);return mc(e).Z({range:l},(m,v,D)=>{const[S,N,O]=m,z=ba(N);S===this.userId&&r.isPrefixOf(z)?z.length===i&&(h=h.add(O)):D.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(ho(e).get(a).next(l=>{if(null===l)throw ct();Rt(l.userId===this.userId),r.push(fc(this.It,l))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return PT(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return mc(e).Z({range:r},(a,l,h)=>{if(a[0]===this.userId){const m=ba(a[1]);i.push(m)}else h.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return OT(e,this.userId,t)}Rn(e){return Em(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function OT(n,e,t){const r=th(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return mc(n).Z({range:a,X:!0},(h,m,v)=>{const[D,S,N]=h;D===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function ho(n){return Xr(n,"mutations")}function mc(n){return Xr(n,"documentMutations")}function Em(n){return Xr(n,"mutationQueues")}class yu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new yu(0)}static vn(){return new yu(-1)}}class FT{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new yu(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>At.fromTimestamp(new Un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vu(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return vu(e).Z((l,h)=>{const m=dh(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>ce.waitFor(a)).next(()=>i)}forEachTarget(e,t){return vu(e).Z((r,i)=>{const a=dh(i);t(a)})}Vn(e){return np(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}Sn(e,t){return np(e).put("targetGlobalKey",t)}Dn(e,t){return vu(e).put(nC(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=oc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return vu(e).Z({range:i,index:"queryTargetsIndex"},(l,h,m)=>{const v=dh(h);Ud(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Da(e);return t.forEach(l=>{const h=Hr(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=Da(e);return ce.forEach(t,a=>{const l=Hr(a.path);return ce.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Da(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Da(e);let a=$t();return i.Z({range:r,X:!0},(l,h,m)=>{const v=ba(l[1]),D=new Xe(v);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Hr(t.path),i=IDBKeyRange.bound([r],[Ay(r)],!1,!0);let a=0;return Da(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}se(e,t){return vu(e).get(t).next(r=>r?dh(r):null)}}function vu(n){return Xr(n,"targets")}function np(n){return Xr(n,"targetGlobal")}function Da(n){return Xr(n,"targetDocuments")}function LT([n,e],[t,r]){const i=Ft(n,t);return 0===i?Ft(e,r):i}class VT{constructor(e){this.xn=e,this.buffer=new On(LT),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();LT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cm{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){_a(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield lu(r)}yield t.Fn(3e5)}))}}class Im{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Fs.at);const r=new VT(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(dv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dv):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,h,m,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),Iy()<=pi.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-D}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class lC{constructor(e,t){this.db=e,this.garbageCollector=new Im(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return rp(e,r)}removeReference(e,t,r){return rp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return rp(e,t)}Gn(e,t){return function(r,i){let a=!1;return Em(r).tt(l=>OT(r,l,i).next(h=>(h&&(a=!0),ce.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,h)=>{if(h<=t){const m=this.Gn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,At.min()),Da(e).delete([0,Hr(l.path)])))});i.push(m)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return rp(e,t)}Kn(e,t){const r=Da(e);let i,a=Fs.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:m,sequenceNumber:v})=>{0===l?(a!==Fs.at&&t(new Xe(ba(i)),a),a=v,i=m):a=Fs.at}).next(()=>{a!==Fs.at&&t(new Xe(ba(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rp(n,e){return Da(n).put((r=n.currentSequenceNumber,{targetId:0,path:Hr(e.path),sequenceNumber:r}));var r}class bm{constructor(){this.changes=new gu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cC{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _c(e).put(r)}removeEntry(e,t,r){return _c(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],mm(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=In.newInvalidDocument(t);return _c(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(gh(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:In.newInvalidDocument(t)};return _c(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(gh(t))},(i,a)=>{r={document:this.jn(t,a),size:ph(a)}}).next(()=>r)}getEntries(e,t){let r=qi();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=qi(),i=new Qn(Xe.comparator);return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h),i=i.insert(a,ph(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ce.resolve();let i=new On(Dm);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(gh(i.first()),gh(i.last())),l=i.getIterator();let h=l.getNext();return _c(e).Z({index:"documentKeyIndex",range:a},(m,v,D)=>{const S=Xe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&Dm(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,v),h=l.hasNext()?l.getNext():null),h?D.j(gh(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),mm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _c(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=qi();for(const m of l){const v=this.jn(Xe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(v.key,v)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=qi();const l=gv(t,r),h=gv(t,Os.max());return _c(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(m,v,D)=>{const S=this.jn(Xe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new fv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return pv(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}Qn(e,t){return pv(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function tC(n,e){let t;if(e.document)t=lo(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=ol(e.noDocument.readTime);t=In.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Xe.fromSegments(e.unknownDocument.path),i=ol(e.unknownDocument.version);t=In.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Un(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return In.newInvalidDocument(e)}}function hv(n){return new cC(n)}class fv extends bm{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new gu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new On((a,l)=>Ft(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const m=sv(this.Yn.It,l);i=i.add(a.path.popLast()),r+=ph(m)-h.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=h.size,this.trackRemovals){const m=sv(this.Yn.It,l.convertToNoDocument(At.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function pv(n){return Xr(n,"remoteDocumentGlobal")}function _c(n){return Xr(n,"remoteDocumentsV14")}function gh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gv(n,e){const t=e.documentKey.path.toArray();return[n,mm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Dm(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Ft(t[a],r[a]),i)return i;return i=Ft(t.length,r.length),i||(i=Ft(t[t.length-2],r[r.length-2]),i||Ft(t[t.length-1],r[r.length-1]))}class dC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hC{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Kd(r.mutation,i,Ls.empty(),Un.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$t()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$t()){const i=Ca();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=cc();return a.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ca();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$t()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=qi();const l=Ia(),h=Ia();return t.forEach((m,v)=>{const D=r.get(v.key);i.has(v.key)&&(void 0===D||D.mutation instanceof Ci)?a=a.insert(v.key,v):void 0!==D&&(l.set(v.key,D.mutation.getFieldMask()),Kd(D.mutation,v,D.mutation.getFieldMask(),Un.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,D)=>l.set(v,D)),t.forEach((v,D)=>{var S;return h.set(v,new dC(D,null!==(S=l.get(v))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Ia();let i=new Qn((l,h)=>l-h),a=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let D=r.get(m)||Ls.empty();D=h.applyToLocalView(v,D),r.set(m,D);const S=(i.get(h.batchId)||$t()).add(m);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),v=m.key,D=m.value,S=Gy();D.forEach(N=>{if(!a.has(N)){const O=kE(t.get(N),r.get(N));null!==O&&S.set(N,O),a=a.add(N)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ce.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Vy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ce.resolve(Ca());let h=-1,m=a;return l.next(v=>ce.forEach(v,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(D)?ce.resolve():this.getBaseDocument(e,D,S).next(N=>{m=m.insert(D,N)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,$t())).next(D=>({batchId:h,changes:HE(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=cc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=cc();return this.indexManager.getCollectionParents(e,i).next(l=>ce.forEach(l,h=>{const m=(v=t,D=h.child(i),new wa(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,m)=>{const v=m.getKey();null===i.get(v)&&(i=i.insert(v,In.newInvalidDocument(v)))});let l=cc();return i.forEach((h,m)=>{const v=a.get(h);void 0!==v&&Kd(v.mutation,m,Ls.empty(),Un.now()),rm(t,m)&&(l=l.insert(h,m))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(In.newInvalidDocument(t))}}class fC{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ce.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Jr(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:ov(r.bundledQuery),readTime:Jr(r.readTime)}),ce.resolve();var r}}class pC{constructor(){this.overlays=new Qn(Xe.comparator),this.es=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ca();return ce.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=Ca(),a=t.length+1,l=new Xe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Qn((v,D)=>v-D);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=a.get(v.largestBatchId);null===D&&(D=Ca(),a=a.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const h=Ca(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,D)=>h.set(v,D)),!(h.size()>=i)););return ce.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new iv(t,r));let a=this.es.get(t);void 0===a&&(a=$t(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class ip{constructor(){this.ns=new On($r.ss),this.rs=new On($r.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new $r(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new $r(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Xe(new cn([])),r=new $r(t,e),i=new $r(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Xe(new cn([])),r=new $r(t,e),i=new $r(t,e+1);let a=$t();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new $r(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class $r{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Xe.comparator(e.key,t.key)||Ft(e._s,t._s)}static os(e,t){return Ft(e._s,t._s)||Xe.comparator(e.key,t.key)}}class gC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new On($r.ss)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new pm(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new $r(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ce.resolve(l)}lookupMutationBatch(e,t){return ce.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return ce.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $r(t,0),i=new $r(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);a.push(h)}),ce.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Ft);return t.forEach(i=>{const a=new $r(i,0),l=new $r(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],h=>{r=r.add(h._s)})}),ce.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const l=new $r(new Xe(a),0);let h=new On(Ft);return this.gs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(m._s)),!0)},l),ce.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ce.forEach(t.mutations,i=>{const a=new $r(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new $r(t,0),i=this.gs.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mC{constructor(e){this.Es=e,this.docs=new Qn(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let r=qi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():In.newInvalidDocument(i))}),ce.resolve(r)}getAllFromCollection(e,t,r){let i=qi();const a=new Xe(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:m}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||Ry(xy(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ct()}As(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _C(this)}getSize(e){return ce.resolve(this.size)}}class _C extends bm{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class yC{constructor(e){this.persistence=e,this.Rs=new gu(t=>oc(t),Ud),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ip,this.targetCount=0,this.vs=yu.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ce.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new yu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Dn(t),ce.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ce.waitFor(a).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ce.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.Ps.containsKey(t))}}class mv{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new yC(this),this.indexManager=new aC,this.remoteDocumentCache=new mC(r=>this.referenceDelegate.xs(r)),this.It=new eC(t),this.Ns=new fC(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new gC(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new vC(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return ce.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class vC extends Lt{constructor(e){super(),this.currentSequenceNumber=e}}class sp{constructor(e){this.persistence=e,this.Fs=new ip,this.$s=null}static Bs(e){return new sp(e)}get Ls(){if(this.$s)return this.$s;throw ct()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ls,r=>{const i=Xe.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ce.or([()=>ce.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class wC{constructor(e){this.It=e}$(e,t,r,i){const a=new Xl("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QE,{unique:!0}),h.createObjectStore("documentMutations"),UT(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),UT(e)),l=l.next(()=>function(h){const m=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store("mutations").W().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QE,{unique:!0});const D=m.store("mutations"),S=v.map(N=>D.put(N));return ce.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:uh});m.createIndex("collectionPathOverlayIndex",lh,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",ch,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:Li});m.createIndex("documentKeyIndex",dc),m.createIndex("collectionGroupIndex",hm)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:ih}).createIndex("sequenceNumberIndex",sh,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:oh}).createIndex("documentKeyIndex",ah,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=ph(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ce.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>ce.forEach(h,m=>{Rt(m.userId===a.userId);const v=fc(this.It,m);return PT(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,h)=>{const m=new cn(l),v=[0,Hr(m)];a.push(t.get(v).next(D=>D?ce.resolve():t.put({targetId:0,path:Hr(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:rh});const r=t.store("collectionParents"),i=new lv,a=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:Hr(m)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const m=new cn(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,m],v)=>{const D=ba(h);return a(D.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=dh(i),l=nC(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const h=t.store("remoteDocumentsV14"),m=(v=l,v.document?new Xe(cn.fromString(v.document.name).popFirst(5)):v.noDocument?Xe.fromSegments(v.noDocument.path):v.unknownDocument?Xe.fromSegments(v.unknownDocument.path):ct()).path.toArray();var v;const D={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>ce.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=hv(this.It),a=new mv(sp.Bs,this.It.re);return r.W().next(l=>{const h=new Map;return l.forEach(m=>{var v;let D=null!==(v=h.get(m.userId))&&void 0!==v?v:$t();fc(this.It,m).keys().forEach(S=>D=D.add(S)),h.set(m.userId,D)}),ce.forEach(h,(m,v)=>{const D=new Ur(v),S=uv.oe(this.It,D),N=a.getIndexManager(D),O=wm.oe(D,this.It,N,a.referenceDelegate);return new hC(i,O,S,N).recalculateAndSaveOverlaysForDocumentKeys(new fm(t,Fs.at),m).next()})})}}function UT(n){n.createObjectStore("targetDocuments",{keyPath:ev}).createIndex("documentTargetsIndex",nh,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",co,{unique:!0}),n.createObjectStore("targetGlobal")}const _v="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yv{constructor(e,t,r,i,a,l,h,m,v,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=h,this.Js=v,this.Ys=D,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=N=>Promise.resolve(),!yv.C())throw new Fe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lC(this,i),this.ii=t+"main",this.It=new eC(m),this.ri=new Dr(this.ii,this.Xs,new wC(this.It)),this.Cs=new FT(this.referenceDelegate,this.It),this.remoteDocumentCache=hv(this.It),this.Ns=new av,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===D&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,_v);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Fs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(_a(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return mh(e).get("owner").next(t=>ce.resolve(this.mi(t)))}gi(e){return Tm(e).delete(this.clientId)}yi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Xr(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),h=a.filter(m=>-1===l.indexOf(m));return ce.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ce.resolve(!0):mh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,_v);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tm(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new fm(t,Fs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Tm(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return wm.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kT(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return uv.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?XE:14===l?rv:13===l?nv:12===l?JE:11===l?tv:void ct();var l;let h;return this.ri.runTransaction(e,i,a,m=>(h=new fm(m,this.Ss?this.Ss.next():Fs.at),"readwrite-primary"===t?this.fi(h).next(v=>!!v||this.di(h)).next(v=>{if(!v)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(pe.FAILED_PRECONDITION,dE);return r(h)}).next(v=>this.wi(h).next(()=>v)):this.Vi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Vi(e){return mh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(pe.FAILED_PRECONDITION,_v)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mh(e).put("owner",t)}static C(){return Dr.C()}_i(e){const t=mh(e);return t.get("owner").next(r=>this.mi(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mh(n){return Xr(n,"owner")}function Tm(n){return Xr(n,"clientMetadata")}function Tr(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Sm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=$t(),i=$t();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Sm(e,t.fromCache,r,i)}}class EC{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(em(t))return ce.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=nm(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=$t(...a);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Fi(t,h);return this.$i(t,v,l,m.readTime)?this.ki(e,nm(t,null,"F")):this.Bi(e,v,t,m)}))})))}Oi(e,t,r,i){return em(t)||i.isEqual(At.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(Iy()<=pi.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Uy(t)),this.Bi(e,l,t,cE(i,-1)))})}Fi(e,t){let r=new On(DE(e));return t.forEach((i,a)=>{rm(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return Iy()<=pi.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Uy(t)),this.Ni.getDocumentsMatchingQuery(e,t,Os.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class BT{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Qn(Ft),this.qi=new gu(a=>oc(a),Ud),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hC(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function vv(n,e,t,r){return new BT(n,e,t,r)}function CC(n,e){return Am.apply(this,arguments)}function Am(){return Am=(0,ve.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let m=$t();for(const v of i){l.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}for(const v of a){h.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}return t.localDocuments.getDocuments(r,m).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:h}))})})}),Am.apply(this,arguments)}function IC(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,m,v){const D=m.batch,S=D.keys();let N=ce.resolve();return S.forEach(O=>{N=N.next(()=>v.getEntry(h,O)).next(z=>{const fe=m.docVersions.get(O);Rt(null!==fe),z.version.compareTo(fe)<0&&(D.applyToRemoteDocument(z,m),z.isValidDocument()&&(z.setReadTime(m.commitVersion),v.addEntry(z)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=$t();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(h=h.add(l.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function yc(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function jT(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((D,S)=>{const N=i.get(S);if(!N)return;h.push(t.Cs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,D.addedDocuments,S)));let O=N.withSequenceNumber(a.currentSequenceNumber);var z,fe,Ee;e.targetMismatches.has(S)?O=O.withResumeToken(si.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):D.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(D.resumeToken,r)),i=i.insert(S,O),fe=O,Ee=D,(0===(z=N).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,O))});let m=qi(),v=$t();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),h.push(bC(a,l,e.documentUpdates).next(D=>{m=D.Wi,v=D.zi})),!r.isEqual(At.min())){const D=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(D)}return ce.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ui=i,a))}function bC(n,e,t){let r=$t(),i=$t();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=qi();return t.forEach((h,m)=>{const v=a.get(h);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(At.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):Be("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",m.version)}),{Wi:l,zi:i}})}function DC(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _h(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,ce.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new _u(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function vc(n,e,t){return TC.apply(this,arguments)}function TC(){return TC=(0,ve.Z)(function*(n,e,t){const r=tt(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!_a(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),TC.apply(this,arguments)}function op(n,e,t){const r=tt(n);let i=At.min(),a=$t();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,v){const D=tt(h),S=D.qi.get(v);return void 0!==S?ce.resolve(D.Ui.get(S)):D.Cs.getTargetData(m,v)}(r,l,Fi(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:At.min(),t?a:$t())).next(h=>(SC(r,By(e),h),{documents:h,Hi:a})))}function xm(n,e){const t=tt(n),r=tt(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function zo(n,e){const t=tt(n),r=t.Ki.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,cE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(SC(t,e,i),i))}function SC(n,e,t){let r=n.Ki.get(e)||At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function fo(){return fo=(0,ve.Z)(function*(n,e,t,r){const i=tt(n);let a=$t(),l=qi();for(const v of t){const D=e.Ji(v.metadata.name);v.document&&(a=a.add(D));const S=e.Yi(v);S.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(D,S)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield _h(i,(v=r,Fi($d(cn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>bC(v,h,l).next(D=>(h.apply(v),D)).next(D=>i.Cs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Cs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,D.Wi,D.zi)).next(()=>D.Wi)))}),fo.apply(this,arguments)}function Ko(n,e){return Vs.apply(this,arguments)}function Vs(){return Vs=(0,ve.Z)(function*(n,e,t=$t()){const r=yield _h(n,Fi(ov(e.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Jr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(si.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),Vs.apply(this,arguments)}function wv(n,e){return`firestore_clients_${n}_${e}`}function Ev(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Cv(n,e){return`firestore_targets_${n}_${e}`}class Rm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Fe(i.error.code,i.error.message))),l?new Rm(e,t,i.state,a):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ap{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new ap(e,r.state,i):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=am();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=uT(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Mm(e,a):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class up{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new up(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wc{constructor(){this.activeTargetIds=am()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Iv{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Qn(Ft),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=wv(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new wc),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(wv(e.persistenceKey,i));if(a){const l=Mm.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Cv(this.persistenceKey,e));if(r){const i=ap.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Fs.at;if(null!=a)try{const h=JSON.parse(a);Rt("number"==typeof h),l=h}catch(h){pr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Fs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Rm(this.currentUser,e,t,r),a=Ev(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=Ev(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Cv(this.persistenceKey,e),a=new ap(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Mm.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Rm.Zi(new Ur(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return ap.Zi(i,t)}yr(e){return up.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],h=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=am();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class bv{constructor(){this.Lr=new wc,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new wc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $T{qr(e){}shutdown(){}}class Dv{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const AC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nm{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class GT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);Be("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(m=>(Be("RestConnection","Received: ",m),m),m=>{throw ks("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ql,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${AC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new nT;h.setWithCredentials(!0),h.listenOnce(XD.COMPLETE,()=>{var v;try{switch(h.getLastErrorCode()){case Nf.NO_ERROR:const D=h.getResponseJson();Be("Connection","XHR received:",JSON.stringify(D)),a(D);break;case Nf.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),l(new Fe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Nf.HTTP_ERROR:const S=h.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',S,"response text:",h.getResponseText()),S>0){let N=h.getResponseJson();Array.isArray(N)&&(N=N[0]);const O=null===(v=N)||void 0===v?void 0:v.error;if(O&&O.status&&O.message){const z=function(fe){const Ee=fe.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(Ee)>=0?Ee:pe.UNKNOWN}(O.status);l(new Fe(z,O.message))}else l(new Fe(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Fe(pe.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=sE(),l=JD(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new tT({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=i.join("");Be("Connection","Creating WebChannel: "+m,h);const v=a.createWebChannel(m,h);let D=!1,S=!1;const N=new Nm({Hr:z=>{S?Be("Connection","Not sending because WebChannel is closed:",z):(D||(Be("Connection","Opening WebChannel transport."),v.open(),D=!0),Be("Connection","WebChannel sending:",z),v.send(z))},Jr:()=>v.close()}),O=(z,fe,Ee)=>{z.listen(fe,Je=>{try{Ee(Je)}catch(ht){setTimeout(()=>{throw ht},0)}})};return O(v,Fg.EventType.OPEN,()=>{S||Be("Connection","WebChannel transport opened.")}),O(v,Fg.EventType.CLOSE,()=>{S||(S=!0,Be("Connection","WebChannel transport closed"),N.io())}),O(v,Fg.EventType.ERROR,z=>{S||(S=!0,ks("Connection","WebChannel transport errored:",z),N.io(new Fe(pe.UNAVAILABLE,"The operation could not be completed")))}),O(v,Fg.EventType.MESSAGE,z=>{var fe;if(!S){const Ee=z.data[0];Rt(!!Ee);const Je=Ee,ht=Je.error||(null===(fe=Je[0])||void 0===fe?void 0:fe.error);if(ht){Be("Connection","WebChannel received error:",ht);const at=ht.status;let pt=function(Vt){const Rr=mr[Vt];if(void 0!==Rr)return om(Rr)}(at),xt=ht.message;void 0===pt&&(pt=pe.INTERNAL,xt="Unknown error status: "+at+" with message "+ht.message),S=!0,N.io(new Fe(pt,xt)),v.close()}else Be("Connection","WebChannel received:",Ee),N.ro(Ee)}}),O(l,eT.STAT_EVENT,z=>{z.stat===oE.PROXY?Be("Connection","Detected buffering proxy"):z.stat===oE.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.so()},0),N}}function Tv(){return"undefined"!=typeof window?window:null}function lp(){return"undefined"!=typeof document?document:null}function Ec(n){return new ET(n,!0)}class cp{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Sv{constructor(e,t,r,i,a,l,h,m){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new cp(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ve.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ve.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Fe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ve.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xC extends Sv{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function rM(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ct(),i=e.targetChange.targetIds||[],a=function(m,v){return m.gt?(Rt(void 0===v||"string"==typeof v),si.fromBase64String(v||"")):(Rt(void 0===v||v instanceof Uint8Array),si.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=void 0===m.code?pe.UNKNOWN:om(m.code);return new Fe(v,m.message||"")}(l);t=new lm(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=mu(n,r.document.name),a=Jr(r.document.updateTime),l=new gr({mapValue:{fields:r.document.fields}}),h=In.newFoundDocument(i,a,l);t=new um(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=mu(n,r.document),a=r.readTime?Jr(r.readTime):At.min(),l=In.newNoDocument(i,a);t=new um([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=mu(n,r.document);t=new um([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,a=new VE(r.count||0);t=new Wo(r.targetId,a)}}var m;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?Jr(a.readTime):At.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Yd(this.It),t.addTarget=function(i,a){let l;const h=a.target;return l=Bd(h)?{documents:KE(i,h)}:{query:ZE(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=Ky(i,a.resumeToken):a.snapshotVersion.compareTo(At.min())>0&&(l.readTime=Kf(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function Jy(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Yd(this.It),t.removeTarget=e,this.Bo(t)}}class RC extends Sv{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function zE(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let a=Jr(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=Jr(i)),new eM(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.Zo(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Yd(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qd(this.It,r))};this.Bo(t)}}class MC extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(pe.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(pe.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class kC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(pr(t),this.ou=!1):Be("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class PC{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(h=>{r.enqueueAndForget((0,ve.Z)(function*(){var m;wu(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ve.Z)(function*(v){const D=tt(v);D._u.add(4),yield yh(D),D.gu.set("Unknown"),D._u.delete(4),yield dp(D)}),function(v){return m.apply(this,arguments)})(l))}))}),this.gu=new kC(r,i)}}function dp(n){return Av.apply(this,arguments)}function Av(){return Av=(0,ve.Z)(function*(n){if(wu(n))for(const e of n.wu)yield e(!0)}),Av.apply(this,arguments)}function yh(n){return xv.apply(this,arguments)}function xv(){return xv=(0,ve.Z)(function*(n){for(const e of n.wu)yield e(!1)}),xv.apply(this,arguments)}function Pm(n,e){const t=tt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Nv(t)?Mv(t):Et(t).ko()&&Rv(t,e))}function hp(n,e){const t=tt(n),r=Et(t);t.du.delete(e),r.ko()&&OC(t,e),0===t.du.size&&(r.ko()?r.Fo():wu(t)&&t.gu.set("Unknown"))}function Rv(n,e){n.yu.Mt(e.targetId),Et(n).zo(e)}function OC(n,e){n.yu.Mt(e),Et(n).Ho(e)}function Mv(n){n.yu=new GE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Et(n).start(),n.gu.uu()}function Nv(n){return wu(n)&&!Et(n).No()&&n.du.size>0}function wu(n){return 0===tt(n)._u.size}function FC(n){n.yu=void 0}function WT(n){return kv.apply(this,arguments)}function kv(){return kv=(0,ve.Z)(function*(n){n.du.forEach((e,t)=>{Rv(n,e)})}),kv.apply(this,arguments)}function qT(n,e){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,ve.Z)(function*(n,e){FC(n),Nv(n)?(n.gu.hu(e),Mv(n)):n.gu.set("Unknown")}),Pv.apply(this,arguments)}function zT(n,e,t){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,ve.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof lm&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.du.delete(h),i.yu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fp(n,r)}else if(e instanceof um?n.yu.Gt(e):e instanceof Wo?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(At.min()))try{const r=yield yc(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.du.get(m);v&&i.du.set(m,v.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const m=i.du.get(h);if(!m)return;i.du.set(h,m.withResumeToken(si.EMPTY_BYTE_STRING,m.snapshotVersion)),OC(i,h);const v=new _u(m.target,h,1,m.sequenceNumber);Rv(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield fp(n,r)}var r}),Ov.apply(this,arguments)}function fp(n,e,t){return Om.apply(this,arguments)}function Om(){return Om=(0,ve.Z)(function*(n,e,t){if(!_a(e))throw e;n._u.add(1),yield yh(n),n.gu.set("Offline"),t||(t=()=>yc(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield dp(n)}))}),Om.apply(this,arguments)}function Fv(n,e){return e().catch(t=>fp(n,t,e))}function Cc(n){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,ve.Z)(function*(n){const e=tt(n),t=ll(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;LC(e);)try{const i=yield DC(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,VC(e,i)}catch(i){yield fp(e,i)}Lv(e)&&Vv(e)}),Fm.apply(this,arguments)}function LC(n){return wu(n)&&n.fu.length<10}function VC(n,e){n.fu.push(e);const t=ll(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Lv(n){return wu(n)&&!ll(n).No()&&n.fu.length>0}function Vv(n){ll(n).start()}function UC(n){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,ve.Z)(function*(n){ll(n).eu()}),Lm.apply(this,arguments)}function Ic(n){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,ve.Z)(function*(n){const e=ll(n);for(const t of n.fu)e.Xo(t.mutations)}),Uv.apply(this,arguments)}function KT(n,e,t){return ul.apply(this,arguments)}function ul(){return ul=(0,ve.Z)(function*(n,e,t){const r=n.fu.shift(),i=gm.from(r,e,t);yield Fv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Cc(n)}),ul.apply(this,arguments)}function iM(n,e){return pp.apply(this,arguments)}function pp(){return pp=(0,ve.Z)(function*(n,e){var t;e&&ll(n).Yo&&(yield(t=(0,ve.Z)(function*(r,i){if(UE(a=i.code)&&a!==pe.ABORTED){const l=r.fu.shift();ll(r).Mo(),yield Fv(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Cc(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),Lv(n)&&Vv(n)}),pp.apply(this,arguments)}function ZT(n,e){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,ve.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=wu(t);t._u.add(3),yield yh(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield dp(t)}),Vm.apply(this,arguments)}function Um(n,e){return BC.apply(this,arguments)}function BC(){return BC=(0,ve.Z)(function*(n,e){const t=tt(n);e?(t._u.delete(2),yield dp(t)):e||(t._u.add(2),yield yh(t),t.gu.set("Unknown"))}),BC.apply(this,arguments)}function Et(n){return n.pu||(n.pu=function(e,t,r){const i=tt(e);return i.su(),new xC(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:WT.bind(null,n),Zr:qT.bind(null,n),Wo:zT.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.pu.Mo(),Nv(n)?Mv(n):n.gu.set("Unknown")):(yield n.pu.stop(),FC(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function ll(n){return n.Iu||(n.Iu=function(e,t,r){const i=tt(e);return i.su(),new RC(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:UC.bind(null,n),Zr:iM.bind(null,n),tu:Ic.bind(null,n),Zo:KT.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Iu.Mo(),yield Cc(n)):(yield n.Iu.stop(),n.fu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Bv{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new Bv(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vh(n,e){if(pr("AsyncQueue",`${e}: ${n}`),_a(n))return new Fe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Eu{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=cc(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new Eu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Eu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jC{constructor(){this.Tu=new Qn(Xe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ct():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Cu{constructor(e,t,r,i,a,l,h,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new Cu(e,t,Eu.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Bm{constructor(){this.Au=void 0,this.listeners=[]}}class _r{constructor(){this.queries=new gu(e=>bE(e),Wd),this.onlineState="Unknown",this.Ru=new Set}}function HC(n,e){return jm.apply(this,arguments)}function jm(){return jm=(0,ve.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new Bm),i)try{a.Au=yield t.onListen(r)}catch(l){const h=vh(l,`Initialization of query '${Uy(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&Hm(t)}),jm.apply(this,arguments)}function jv(n,e){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,ve.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Hv.apply(this,arguments)}function $C(n,e){const t=tt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Pu(i)&&(r=!0);l.Au=i}}r&&Hm(t)}function GC(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Hm(n){n.Ru.forEach(e=>{e.next()})}class $m{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Cu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Cu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class YT{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class WC{constructor(e){this.It=e}Ji(e){return mu(this.It,e)}Yi(e){return e.metadata.exists?lo(this.It,e.document,!1):In.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Jr(e)}}class QT{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wh(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=cn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new WC(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||$t()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function HT(n,e,t,r){return fo.apply(this,arguments)}(e.localStore,new WC(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield Ko(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function wh(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class qC{constructor(e){this.key=e}}class zC{constructor(e){this.key=e}}class KC{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=$t(),this.mutatedKeys=$t(),this.Gu=DE(e),this.Qu=new Eu(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new jC,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const N=i.get(D),O=rm(this.query,S)?S:null,z=!!N&&this.mutatedKeys.has(N.key),fe=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let Ee=!1;N&&O?N.data.isEqual(O.data)?z!==fe&&(r.track({type:3,doc:O}),Ee=!0):this.Hu(N,O)||(r.track({type:2,doc:O}),Ee=!0,(m&&this.Gu(O,m)>0||v&&this.Gu(O,v)<0)&&(h=!0)):!N&&O?(r.track({type:0,doc:O}),Ee=!0):N&&!O&&(r.track({type:1,doc:N}),Ee=!0,(m||v)&&(h=!0)),Ee&&(O?(l=l.add(O),a=fe?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Qu:l,zu:r,$i:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((v,D)=>function(S,N){const O=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return O(S)-O(N)}(v.type,D.type)||this.Gu(v.doc,D.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,m=h!==this.qu;return this.qu=h,0!==a.length||m?{snapshot:new Cu(this.query,e.Qu,i,a,e.mutatedKeys,0===h,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new jC,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=$t(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new zC(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new qC(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=$t();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Cu.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Gm{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ZC{constructor(e){this.key=e,this.nc=!1}}class YC{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new gu(h=>bE(h),Wd),this.rc=new Map,this.oc=new Set,this.uc=new Qn(Xe.comparator),this.cc=new Map,this.ac=new ip,this.hc={},this.lc=new Map,this.fc=yu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function QC(n,e){return $v.apply(this,arguments)}function $v(){return $v=(0,ve.Z)(function*(n,e){const t=mp(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield _h(t.localStore,Fi(e));t.isPrimaryClient&&Pm(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield bc(t,e,r,"current"===h,l.resumeToken)}return i}),$v.apply(this,arguments)}function bc(n,e,t,r,i){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,ve.Z)(function*(n,e,t,r,i){n._c=(S,N,O)=>{return(z=(0,ve.Z)(function*(fe,Ee,Je,ht){let at=Ee.view.Wu(Je);at.$i&&(at=yield op(fe.localStore,Ee.query,!1).then(({documents:Vt})=>Ee.view.Wu(Vt,at)));const pt=ht&&ht.targetChanges.get(Ee.targetId),xt=Ee.view.applyChanges(at,fe.isPrimaryClient,pt);return Tc(fe,Ee.targetId,xt.Xu),xt.snapshot}),function(fe,Ee,Je,ht){return z.apply(this,arguments)})(n,S,N,O);var z};const a=yield op(n.localStore,e,!0),l=new KC(e,a.Hi),h=l.Wu(a.documents),m=zf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(h,n.isPrimaryClient,m);Tc(n,t,v.Xu);const D=new Gm(e,t,l);return n.ic.set(e,D),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),Dc.apply(this,arguments)}function JT(n,e){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,ve.Z)(function*(n,e){const t=tt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!Wd(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield vc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),hp(t.remoteStore,r.targetId),Ch(t,r.targetId)}).catch(lu))):(Ch(t,r.targetId),yield vc(t.localStore,r.targetId,!0))}),Gv.apply(this,arguments)}function Wm(){return Wm=(0,ve.Z)(function*(n,e,t){const r=Xv(n);try{const i=yield function(a,l){const h=tt(a),m=Un.now(),v=l.reduce((N,O)=>N.add(O.key),$t());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let O=qi(),z=$t();return h.Gi.getEntries(N,v).next(fe=>{O=fe,O.forEach((Ee,Je)=>{Je.isValidDocument()||(z=z.add(Ee))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,O)).next(fe=>{D=fe;const Ee=[];for(const Je of l){const ht=OE(Je,D.get(Je.key).overlayedDocument);null!=ht&&Ee.push(new Ci(Je.key,ht,Xg(ht.value.mapValue),ur.exists(!0)))}return h.mutationQueue.addMutationBatch(N,m,Ee,l)}).next(fe=>{S=fe;const Ee=fe.applyToLocalDocumentSet(D,z);return h.documentOverlayCache.saveOverlays(N,fe.batchId,Ee)})}).then(()=>({batchId:S.batchId,changes:HE(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let m=a.hc[a.currentUser.toKey()];m||(m=new Qn(Ft)),m=m.insert(l,h),a.hc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Iu(r,i.changes),yield Cc(r.remoteStore)}catch(i){const a=vh(i,"Failed to persist write");t.reject(a)}}),Wm.apply(this,arguments)}function Wv(n,e){return qm.apply(this,arguments)}function qm(){return qm=(0,ve.Z)(function*(n,e){const t=tt(n);try{const r=yield jT(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Rt(l.nc):i.removedDocuments.size>0&&(Rt(l.nc),l.nc=!1))}),yield Iu(t,r,e)}catch(r){yield lu(r)}}),qm.apply(this,arguments)}function JC(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const h=l.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=tt(a);h.onlineState=l;let m=!1;h.queries.forEach((v,D)=>{for(const S of D.listeners)S.bu(l)&&(m=!0)}),m&&Hm(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function XC(n,e,t){return qv.apply(this,arguments)}function qv(){return qv=(0,ve.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Qn(Xe.comparator);l=l.insert(a,In.newNoDocument(a,At.min()));const h=$t().add(a),m=new qf(At.min(),new Map,new On(Ft),l,h);yield Wv(r,m),r.uc=r.uc.remove(a),r.cc.delete(e),Zv(r)}else yield vc(r.localStore,e,!1).then(()=>Ch(r,e,t)).catch(lu)}),qv.apply(this,arguments)}function eS(n,e){return eI.apply(this,arguments)}function eI(){return eI=(0,ve.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield IC(t.localStore,e);zv(t,r,null),Eh(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Iu(t,i)}catch(i){yield lu(i)}}),eI.apply(this,arguments)}function sM(n,e,t){return tI.apply(this,arguments)}function tI(){return tI=(0,ve.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(a,l){const h=tt(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return h.mutationQueue.lookupMutationBatch(m,l).next(D=>(Rt(null!==D),v=D.keys(),h.mutationQueue.removeMutationBatch(m,D))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>h.localDocuments.getDocuments(m,v))})}(r.localStore,e);zv(r,e,t),Eh(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Iu(r,i)}catch(i){yield lu(i)}}),tI.apply(this,arguments)}function zm(){return zm=(0,ve.Z)(function*(n,e){const t=tt(n);wu(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=tt(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=vh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),zm.apply(this,arguments)}function Eh(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function zv(n,e,t){const r=tt(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Ch(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||Kv(n,r)})}function Kv(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(hp(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Zv(n))}function Tc(n,e,t){for(const r of t)r instanceof qC?(n.ac.addReference(r.key,e),tS(n,r)):r instanceof zC?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||Kv(n,r.key)):ct()}function tS(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.oc.add(r),Zv(n))}function Zv(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Xe(cn.fromString(e)),r=n.fc.next();n.cc.set(r,new ZC(t)),n.uc=n.uc.insert(t,r),Pm(n.remoteStore,new _u(Fi($d(t.path)),r,2,Fs.at))}}function Iu(n,e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,ve.Z)(function*(n,e,t){const r=tt(n),i=[],a=[],l=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,m)=>{l.push(r._c(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,(null==v?void 0:v.fromCache)?"not-current":"current"),v){i.push(v);const D=Sm.Ci(m.targetId,v);a.push(D)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(h=(0,ve.Z)(function*(m,v){const D=tt(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ce.forEach(v,N=>ce.forEach(N.Si,O=>D.persistence.referenceDelegate.addReference(S,N.targetId,O)).next(()=>ce.forEach(N.Di,O=>D.persistence.referenceDelegate.removeReference(S,N.targetId,O)))))}catch(S){if(!_a(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const N=S.targetId;if(!S.fromCache){const O=D.Ui.get(N),fe=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);D.Ui=D.Ui.insert(N,fe)}}}),function(m,v){return h.apply(this,arguments)})(r.localStore,a))}),Yv.apply(this,arguments)}function nS(n,e){return Km.apply(this,arguments)}function Km(){return Km=(0,ve.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield CC(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(h=>{h.reject(new Fe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Iu(t,r.ji)}var i}),Km.apply(this,arguments)}function rS(n,e){const t=tt(n),r=t.cc.get(e);if(r&&r.nc)return $t().add(r.key);{let i=$t();const a=t.rc.get(e);if(!a)return i;for(const l of a){const h=t.ic.get(l);i=i.unionWith(h.view.ju)}return i}}function iS(n,e){return cl.apply(this,arguments)}function cl(){return cl=(0,ve.Z)(function*(n,e){const t=tt(n),r=yield op(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&Tc(t,e.targetId,i.Xu),i}),cl.apply(this,arguments)}function sS(n,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,ve.Z)(function*(n,e){const t=tt(n);return zo(t.localStore,e).then(r=>Iu(t,r))}),Zm.apply(this,arguments)}function oS(n,e,t,r){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,ve.Z)(function*(n,e,t,r){const i=tt(n),a=yield function(l,h){const m=tt(l),v=tt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.Tn(D,h).next(S=>S?m.localDocuments.getDocuments(D,S):ce.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Cc(i.remoteStore):"acknowledged"===t||"rejected"===t?(zv(i,e,r||null),Eh(i,e),h=e,tt(tt(i.localStore).mutationQueue).An(h)):ct(),yield Iu(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ym.apply(this,arguments)}function Qm(){return Qm=(0,ve.Z)(function*(n,e){const t=tt(n);if(mp(t),Xv(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield nI(t,r.toArray());t.dc=!0,yield Um(t.remoteStore,!0);for(const a of i)Pm(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Ch(t,l),vc(t.localStore,l,!0))),hp(t.remoteStore,l)}),yield i,yield nI(t,r),function(a){const l=tt(a);l.cc.forEach((h,m)=>{hp(l.remoteStore,m)}),l.ac.fs(),l.cc=new Map,l.uc=new Qn(Xe.comparator)}(t),t.dc=!1,yield Um(t.remoteStore,!1)}}),Qm.apply(this,arguments)}function nI(n,e,t){return gp.apply(this,arguments)}function gp(){return gp=(0,ve.Z)(function*(n,e,t){const r=tt(n),i=[],a=[];for(const l of e){let h;const m=r.rc.get(l);if(m&&0!==m.length){h=yield _h(r.localStore,Fi(m[0]));for(const v of m){const D=r.ic.get(v),S=yield iS(r,D);S.snapshot&&a.push(S.snapshot)}}else{const v=yield xm(r.localStore,l);h=yield _h(r.localStore,v),yield bc(r,rI(v),l,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(a),i}),gp.apply(this,arguments)}function rI(n){return mT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function iI(n){const e=tt(n);return tt(tt(e.localStore).persistence).vi()}function sI(n,e,t,r){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,ve.Z)(function*(n,e,t,r){const i=tt(n);if(i.dc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield zo(i.localStore,By(a[0])),h=qf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,si.EMPTY_BYTE_STRING);yield Iu(i,l,h);break}case"rejected":yield vc(i.localStore,e,!0),Ch(i,e,r);break;default:ct()}}),Qv.apply(this,arguments)}function uS(n,e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,ve.Z)(function*(n,e,t){const r=mp(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield xm(r.localStore,i),l=yield _h(r.localStore,a);yield bc(r,rI(a),l.targetId,!1,l.resumeToken),Pm(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield vc(r.localStore,i,!1).then(()=>{hp(r.remoteStore,i),Ch(r,i)}).catch(lu))}}),Jv.apply(this,arguments)}function mp(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XC.bind(null,e),e.sc.Wo=$C.bind(null,e.eventManager),e.sc.wc=GC.bind(null,e.eventManager),e}function Xv(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sM.bind(null,e),e}class aI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.It=Ec(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return vv(this.persistence,new EC,e.initialUser,this.It)}yc(e){return new mv(sp.Bs,this.It)}gc(e){return new bv}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class uI extends aI{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Xv(r.Ac.syncEngine),yield Cc(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return vv(this.persistence,new EC,e.initialUser,this.It)}Tc(e,t){return new Cm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new fE(t,this.persistence);return new QR(e.asyncQueue,r)}yc(e){const t=Tr(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vi.withCacheSize(this.cacheSizeBytes):Vi.DEFAULT;return new yv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Tv(),lp(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new bv}}class lS extends uI{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof Iv&&(r.sharedClientState.syncEngine={Fr:oS.bind(null,i),$r:sI.bind(null,i),Br:uS.bind(null,i),vi:iI.bind(null,i),Mr:sS.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,ve.Z)(function*(l){yield function aS(n,e){return Qm.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=Tv();if(!Iv.C(t))throw new Fe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Tr(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Iv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class e0{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>JC(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=nS.bind(null,r.syncEngine),yield Um(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _r}createDatastore(e){const t=Ec(e.databaseInfo.databaseId),r=new GT(e.databaseInfo);return new MC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>JC(this.syncEngine,h,0),l=Dv.C()?new Dv:new $T,new PC(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,m,v){const D=new YC(r,i,a,l,h,m);return v&&(D.dc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=tt(t);Be("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield yh(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function t0(n,e,t){if(!t)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lI(n,e,t,r){if(!0===e&&!0===r)throw new Fe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cI(n){if(!Xe.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dI(n){if(Xe.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _p(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_p(n);throw new Fe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hI(n,e){if(e<=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const fI=new Map;class n0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,lI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new aE;switch(t.type){case"gapi":return new by(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fI.get(e);t&&(Be("ComponentProvider","Removing Datastore"),fI.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class oi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oi(this.firestore,e,this._query)}}class po extends oi{constructor(e,t,r){super(e,t,$d(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new Xe(e))}withConverter(e){return new po(this.firestore,e,this._path)}}function r0(n,e,...t){if(n=(0,F.m9)(n),t0("collection","path",e),n instanceof yp){const r=cn.fromString(e,...t);return dI(r),new po(n,null,r)}{if(!(n instanceof Wn||n instanceof po))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return dI(r),new po(n.firestore,null,r)}}function Jm(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=Sy.R()),t0("doc","path",e),n instanceof yp){const r=cn.fromString(e,...t);return cI(r),new Wn(n,null,new Xe(r))}{if(!(n instanceof Wn||n instanceof po))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return cI(r),new Wn(n.firestore,n instanceof po?n.converter:null,new Xe(r))}}function gI(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof Wn||n instanceof po)&&(e instanceof Wn||e instanceof po)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vp(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof oi&&e instanceof oi&&n.firestore===e.firestore&&Wd(n._query,e._query)&&n.converter===e.converter}function mI(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cS{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Br,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new YT(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ve.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class aM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(a,l){const h=tt(a),m=Yd(h.It)+"/documents",v={documents:l.map(O=>cm(h.It,O))},D=yield h._o("BatchGetDocuments",m,v,l.length),S=new Map;D.forEach(O=>{const z=function nM(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=mu(t,r.found.name),a=Jr(r.found.updateTime),l=new gr({mapValue:{fields:r.found.fields}});return In.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=mu(t,r.missing),a=Jr(r.readTime);return In.newNoDocument(i,a)}(n,e):ct()}(h.It,O);S.set(z.key.toString(),z)});const N=[];return l.forEach(O=>{const z=S.get(O.toString());Rt(!!z),N.push(z)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new Wf(a,e.precondition(a)))}),yield(r=(0,ve.Z)(function*(i,a){const l=tt(i),h=Yd(l.It)+"/documents",m={writes:a.map(v=>Qd(l.It,v))};yield l.ao("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(At.min())?ur.exists(!1):ur.updateTime(t):ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Fe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ur.updateTime(t)}return ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class fS{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new cp(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ve.Z)(function*(){const t=new aM(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Yg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!UE(t)}return!1}}class Xm{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ur.UNAUTHENTICATED,this.clientId=Sy.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=vh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function yI(n,e){return dl.apply(this,arguments)}function dl(){return dl=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(a){r.isEqual(a)||(yield CC(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),dl.apply(this,arguments)}function Ih(n,e){return o0.apply(this,arguments)}function o0(){return o0=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield vI(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>ZT(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>ZT(e.remoteStore,a)),n.onlineComponents=e}),o0.apply(this,arguments)}function vI(n){return e_.apply(this,arguments)}function e_(){return e_=(0,ve.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield yI(n,new aI)),n.offlineComponents}),e_.apply(this,arguments)}function t_(n){return a0.apply(this,arguments)}function a0(){return a0=(0,ve.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield Ih(n,new e0)),n.onlineComponents}),a0.apply(this,arguments)}function wI(n){return vI(n).then(e=>e.persistence)}function n_(n){return vI(n).then(e=>e.localStore)}function r_(n){return t_(n).then(e=>e.remoteStore)}function i_(n){return t_(n).then(e=>e.syncEngine)}function bu(n){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,ve.Z)(function*(n){const e=yield t_(n),t=e.eventManager;return t.onListen=QC.bind(null,e.syncEngine),t.onUnlisten=JT.bind(null,e.syncEngine),t}),Sc.apply(this,arguments)}function II(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,l,h,m){const v=new wp({next:S=>{a.enqueueAndForget(()=>jv(i,D));const N=S.docs.has(l);!N&&S.fromCache?m.reject(new Fe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?m.reject(new Fe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new $m($d(l.path),v,{includeMetadataChanges:!0,Nu:!0});return HC(i,D)}(yield bu(n),n.asyncQueue,e,t,r)})),r.promise}function o_(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,l,h,m){const v=new wp({next:S=>{a.enqueueAndForget(()=>jv(i,D)),S.fromCache&&"server"===h.source?m.reject(new Fe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new $m(l,v,{includeMetadataChanges:!0,Nu:!0});return HC(i,D)}(yield bu(n),n.asyncQueue,e,t,r)})),r.promise}class yS{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new cp(this,"async_queue_retry"),this.Wc=()=>{const t=lp();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=lp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=lp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Br;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!_a(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,pr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=Bv.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&ct()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function hl(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class bI{constructor(){this._progressObserver={},this._taskCompletionResolver=new Br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends yp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new yS,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||u0(this),this._firestoreClient.terminate()}}function Gr(n){return n._firestoreClient||u0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function u0(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JR(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new Xm(n._authCredentials,n._appCheckCredentials,n._queue,r)}function a_(n,e,t){const r=new Br;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield yI(n,t),yield Ih(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;ks("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function TI(n){if(n._initialized||n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ta{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ta(si.fromBase64String(e))}catch(t){throw new Fe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ta(si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Du{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fl{constructor(e){this._methodName=e}}class Ep{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const SI=/^__.*__$/;class AI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ci(e,this.data,this.fieldMask,t,this.fieldTransforms):new lc(e,this.data,t,this.fieldTransforms)}}class l0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ci(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class l_{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new l_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return bp(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(xI(this.sa)&&SI.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class TS{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Ec(e)}da(e,t,r,i=!1){return new l_({sa:e,methodName:t,fa:r,path:or.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ac(n){const e=n._freezeSettings(),t=Ec(n._databaseId);return new TS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function c_(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);Th("Data must be an object, but it was:",l,r);const h=MI(r,l);let m,v;if(a.merge)m=new Ls(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const N=Sh(e,S,t);if(!l.contains(N))throw new Fe(pe.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);h0(D,N)||D.push(N)}m=new Ls(D),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new AI(new gr(h),m,v)}class Cp extends fl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cp}}function RI(n,e,t){return new l_({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class xc extends fl{_toFieldTransform(e){return new uc(e.path,new qd)}isEqual(e){return e instanceof xc}}class SS extends fl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=RI(this,e,!0),r=this._a.map(a=>Rc(a,t)),i=new pu(r);return new uc(e.path,i)}isEqual(e){return this===e}}class c0 extends fl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=RI(this,e,!0),r=this._a.map(a=>Rc(a,t)),i=new ac(r);return new uc(e.path,i)}isEqual(e){return this===e}}class Sa extends fl{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new sl(e.It,SE(e.It,this.wa));return new uc(e.path,t)}isEqual(e){return this===e}}function d0(n,e,t,r){const i=n.da(1,e,t);Th("Data must be an object, but it was:",i,r);const a=[],l=gr.empty();ya(r,(m,v)=>{const D=d_(e,m,t);v=(0,F.m9)(v);const S=i.ca(D);if(v instanceof Cp)a.push(D);else{const N=Rc(v,S);null!=N&&(a.push(D),l.set(D,N))}});const h=new Ls(a);return new l0(l,h,i.fieldTransforms)}function Ip(n,e,t,r,i,a){const l=n.da(1,e,t),h=[Sh(e,r,t)],m=[i];if(a.length%2!=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(Sh(e,a[N])),m.push(a[N+1]);const v=[],D=gr.empty();for(let N=h.length-1;N>=0;--N)if(!h0(v,h[N])){const O=h[N];let z=m[N];z=(0,F.m9)(z);const fe=l.ca(O);if(z instanceof Cp)v.push(O);else{const Ee=Rc(z,fe);null!=Ee&&(v.push(O),D.set(O,Ee))}}const S=new Ls(v);return new l0(D,S,l.fieldTransforms)}function Dh(n,e,t,r=!1){return Rc(t,n.da(r?4:3,e))}function Rc(n,e){if(NI(n=(0,F.m9)(n)))return Th("Unsupported field value:",e,n),MI(n,e);if(n instanceof fl)return function(t,r){if(!xI(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Rc(l,r.aa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return SE(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Un.fromDate(t);return{timestampValue:Kf(r.It,i)}}if(t instanceof Un){const i=new Un(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kf(r.It,i)}}if(t instanceof Ep)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ta)return{bytesValue:Ky(r.It,t._byteString)};if(t instanceof Wn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${_p(t)}`)}(n,e)}function MI(n,e){const t={};return zg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(n,(r,i)=>{const a=Rc(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function NI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Un||n instanceof Ep||n instanceof Ta||n instanceof Wn||n instanceof fl)}function Th(n,e,t){if(!NI(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_p(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Sh(n,e,t){if((e=(0,F.m9)(e))instanceof Du)return e._internalPath;if("string"==typeof e)return d_(n,e);throw bp("Field path arguments must be of type string or ",n,!1,void 0,t)}const AS=new RegExp("[~\\*/\\[\\]]");function d_(n,e,t){if(e.search(AS)>=0)throw bp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Du(...e.split("."))._internalPath}catch(r){throw bp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bp(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Fe(pe.INVALID_ARGUMENT,h+n+m)}function h0(n,e){return n.some(t=>t.isEqual(e))}class Mc{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(h_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kI extends Mc{data(){return super.data()}}function h_(n,e){return"string"==typeof e?d_(n,e):e instanceof Du?e._internalPath:e._delegate._internalPath}function PI(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f_{}function Aa(n,...e){for(const t of e)n=t._apply(n);return n}class f0 extends f_{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Ac(e.firestore),r=function(i,a,l,h,m,v,D){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){v0(D,v);const O=[];for(const z of D)O.push(BI(h,i,z));S={arrayValue:{values:O}}}else S=BI(h,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||v0(D,v),S=Dh(l,"where",D,"in"===v||"not-in"===v);const N=Ei.create(m,v,S);return function(O,z){if(z.dt()){const Ee=Ly(O);if(null!==Ee&&!Ee.isEqual(z.field))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${z.field.toString()}'`);const Je=tm(O);null!==Je&&w0(0,z.field,Je)}const fe=function(Ee,Je){for(const ht of Ee.filters)if(Je.indexOf(ht.op)>=0)return ht.op;return null}(O,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==fe)throw new Fe(pe.INVALID_ARGUMENT,fe===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${fe.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new oi(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new wa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class p0 extends f_{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Hd(i,a);return function(h,m){if(null===tm(h)){const v=Ly(h);null!==v&&w0(0,v,m.field)}}(r,l),l}(e._query,this.ma,this.pa);return new oi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new wa(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class FI extends f_{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new oi(e.firestore,e.converter,nm(e._query,this.Ia,this.Ta))}}class LI extends f_{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=y0(e,this.type,this.Ea,this.Aa);return new oi(e.firestore,e.converter,(i=t,new wa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class _0 extends f_{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=y0(e,this.type,this.Ea,this.Aa);return new oi(e.firestore,e.converter,(i=t,new wa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function y0(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof Mc)return function(i,a,l,h,m){if(!h)throw new Fe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const D of Gd(i))if(D.field.isKeyField())v.push(il(a,h.key));else{const S=h.data.field(D.field);if(Ny(S))throw new Fe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=D.field.canonicalString();throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(S)}return new jr(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ac(n.firestore);return function(a,l,h,m,v,D){const S=a.explicitOrderBy;if(v.length>S.length)throw new Fe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let O=0;O<v.length;O++){const z=v[O];if(S[O].field.isKeyField()){if("string"!=typeof z)throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof z}`);if(!Vy(a)&&-1!==z.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${z}' contains a slash.`);const fe=a.path.child(cn.fromString(z));if(!Xe.isDocumentKey(fe))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const Ee=new Xe(fe);N.push(il(l,Ee))}else{const fe=Dh(h,m,z);N.push(fe)}}return new jr(N,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BI(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vy(e)&&-1!==t.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!Xe.isDocumentKey(r))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return il(n,new Xe(r))}if(t instanceof Wn)return il(n,t._key);throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_p(t)}.`)}function v0(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function w0(n,e,t){if(!t.isEqual(e))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class E0{convertValue(e,t="none"){switch(Ld(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return ya(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new Ep(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Kg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zg(e));default:return null}}convertTimestamp(e){const t=ec(e);return new Un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);Rt(Yf(r));const i=new tc(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Dp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class NS extends E0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class Sr{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends Mc{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(h_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Tp extends ds{data(e={}){return super.data(e)}}class pl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Sr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Tp(this._firestore,this._userDataWriter,r.key,r,new Sr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Tp(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Sr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new Tp(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Sr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:hM(l.type),doc:h,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function Ah(n,e){return n instanceof ds&&e instanceof ds?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pl&&e instanceof pl&&n._firestore===e._firestore&&vp(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class xa extends E0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function I0(n,e,t){n=Jt(n,Wn);const r=Jt(n.firestore,Jn),i=Dp(n.converter,e,t);return xh(r,[c_(Ac(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ur.none())])}function b0(n,e,t,...r){n=Jt(n,Wn);const i=Jt(n.firestore,Jn),a=Ac(i);let l;return l="string"==typeof(e=(0,F.m9)(e))||e instanceof Du?Ip(a,"updateDoc",n._key,e,t,r):d0(a,"updateDoc",n._key,e),xh(i,[l.toMutation(n._key,ur.exists(!0))])}function LS(n,...e){var t,r,i;n=(0,F.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||hl(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(hl(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,D;if(n instanceof Wn)v=Jt(n.firestore,Jn),D=$d(n._key.path),m={next:S=>{e[l]&&e[l](g_(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=Jt(n,oi);v=Jt(S.firestore,Jn),D=S._query;const N=new xa(v);m={next:O=>{e[l]&&e[l](new pl(v,N,S,O))},error:e[l+1],complete:e[l+2]},PI(n._query)}return function(S,N,O,z){const fe=new wp(z),Ee=new $m(N,fe,O);return S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return HC(yield bu(S),Ee)})),()=>{fe.bc(),S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return jv(yield bu(S),Ee)}))}}(Gr(v),D,h,m)}function xh(n,e){return function(t,r){const i=new Br;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function XT(n,e,t){return Wm.apply(this,arguments)}(yield i_(t),r,i)})),i.promise}(Gr(n),e)}function g_(n,e,t){const r=t.docs.get(e._key),i=new xa(n);return new ds(n,i,e._key,r,new Sr(t.hasPendingWrites,t.fromCache),e.converter)}const US={maxAttempts:5};class m_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ac(e)}set(e,t,r){this._verifyNotCommitted();const i=Ra(e,this._firestore),a=Dp(i.converter,t,r),l=c_(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,ur.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ra(e,this._firestore);let l;return l="string"==typeof(t=(0,F.m9)(t))||t instanceof Du?Ip(this._dataReader,"WriteBatch.update",a._key,t,r,i):d0(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ra(e,this._firestore);return this._mutations=this._mutations.concat(new Gf(t._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ra(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Fe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fM extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ac(e)}get(e){const t=Ra(e,this._firestore),r=new NS(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const a=i[0];if(a.isFoundDocument())return new Mc(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Mc(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Ra(e,this._firestore),a=Dp(i.converter,t,r),l=c_(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Ra(e,this._firestore);let l;return l="string"==typeof(t=(0,F.m9)(t))||t instanceof Du?Ip(this._dataReader,"Transaction.update",a._key,t,r,i):d0(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Ra(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ra(e,this._firestore),r=new xa(this._firestore);return super.get(e).then(i=>new ds(this._firestore,r,t._key,i._document,new Sr(!1,!1),t.converter))}}function __(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function S0(){if("undefined"==typeof Uint8Array)throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function A0(){if(!function gE(){return"undefined"!=typeof atob}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ql=Cn.SDK_VERSION,(0,Cn._registerComponent)(new ni.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new Jn(new jg(t.getProvider("auth-internal")),new Ty(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Fe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(h.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Cn.registerVersion)(Cy,"3.7.3",n),(0,Cn.registerVersion)(Cy,"3.7.3","esm2017")}();class Rh{constructor(e){this._delegate=e}static fromBase64String(e){return A0(),new Rh(Ta.fromBase64String(e))}static fromUint8Array(e){return S0(),new Rh(Ta.fromUint8Array(e))}toBase64(){return A0(),this._delegate.toBase64()}toUint8Array(){return S0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function x0(n){return function WS(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class gM{enableIndexedDbPersistence(e,t){return function cM(n,e){TI(n=Jt(n,Jn));const t=Gr(n),r=n._freezeSettings(),i=new e0;return a_(t,i,new uI(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function DI(n){TI(n=Jt(n,Jn));const e=Gr(n),t=n._freezeSettings(),r=new e0;return a_(e,r,new lS(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wS(n){if(n._initialized&&!n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Dr.C())return Promise.resolve();const i=r+"main";yield Dr.delete(i)}),function(r){return t.apply(this,arguments)})(Tr(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class R0{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof tc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ks("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function pI(n,e,t,r={}){var i;const a=(n=Jt(n,yp))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&ks("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Ur.MOCK_USER;else{l=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Fe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ur(m)}n._authCredentials=new Bg(new Ug(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function CS(n){return function pS(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield wI(n),t=yield r_(n);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i._u.delete(0),dp(i)}(t)}))}(Gr(n=Jt(n,Jn)))}(this._delegate)}disableNetwork(){return function IS(n){return function EI(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield wI(n),t=yield r_(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const a=tt(i);a._u.add(0),yield yh(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Gr(n=Jt(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ES(n){return function(e){const t=new Br;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function oM(n,e){return zm.apply(this,arguments)}(yield i_(e),t)})),t.promise}(Gr(n=Jt(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function HI(n,e){return function mS(n,e){const t=new wp(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield bu(n),i=t,tt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield bu(n),i=t,void tt(r).Ru.delete(i);var r,i}))}}(Gr(n=Jt(n,Jn)),hl(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ap(this,r0(this._delegate,e))}catch(t){throw hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Zo(this,Jm(this._delegate,e))}catch(t){throw hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ii(this,function s0(n,e){if(n=Jt(n,yp),t0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new oi(n,null,(t=e,new wa(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function BS(n,e,t){n=Jt(n,Jn);const r=Object.assign(Object.assign({},US),t);return function(i){if(i.maxAttempts<1)throw new Fe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new Br;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const m=yield function s_(n){return t_(n).then(e=>e.datastore)}(i);new fS(i.asyncQueue,m,l,a,h).run()})),h.promise}(Gr(n),i=>e(new fM(n,i)),r)}(this._delegate,t=>e(new qS(this,t)))}batch(){return Gr(this._delegate),new zS(new m_(this._delegate,e=>xh(this._delegate,e)))}loadBundle(e){return function bS(n,e){const t=Gr(n=Jt(n,Jn)),r=new bI;return function uM(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return mI(m,v);if(m instanceof ArrayBuffer)return mI(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new cS(m,l);var m}(t,Ec(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function oI(n,e,t){const r=tt(n);var i;(i=(0,ve.Z)(function*(a,l,h){try{const m=yield l.getMetadata();if(yield function(N,O){const z=tt(N),fe=Jr(O.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Ee=>z.Ns.getBundleMetadata(Ee,O.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(fe)>=0)}(a.localStore,m))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=m).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(wh(m));const v=new QT(m,a.localStore,l.It);let D=yield l.mc();for(;D;){const N=yield v.Fu(D);N&&h._updateProgress(N),D=yield l.mc()}const S=yield v.complete();return yield Iu(a,S.Lu,void 0),yield function(N,O){const z=tt(N);return z.persistence.runTransaction("Save bundle","readwrite",fe=>z.Ns.saveBundleMetadata(fe,O))}(a.localStore,m),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(m){return ks("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var N}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield i_(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function DS(n,e){return function _S(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=tt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield n_(n),e)}))}(Gr(n=Jt(n,Jn)),e).then(t=>t?new oi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ii(this,t):null)}}class M0 extends E0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rh(new Ta(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Zo.forKey(t,this.firestore,null)}}class qS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new M0(e)}get(e){const t=Tu(e);return this._delegate.get(t).then(r=>new y_(this._firestore,new ds(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Tu(e);return r?(__("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Tu(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Tu(e);return this._delegate.delete(t),this}}class zS{constructor(e){this._delegate=e}set(e,t,r){const i=Tu(e);return r?(__("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Tu(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Tu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mh{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Tp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Nh(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mh.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Mh(e,new M0(e),t),i.set(t,a)),a}}Mh.INSTANCES=new WeakMap;class Zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new M0(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Zo(t,new Wn(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new Zo(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ap(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ap(this.firestore,r0(this._delegate,e))}catch(t){throw hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof Wn&&gI(this._delegate,e)}set(e,t){t=__("DocumentReference.set",t);try{return t?I0(this._delegate,e,t):I0(this._delegate,e)}catch(r){throw hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?b0(this._delegate,e):b0(this._delegate,e,t,...r)}catch(i){throw hs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function p_(n){return xh(Jt(n.firestore,Jn),[new Gf(n._key,ur.none())])}(this._delegate)}onSnapshot(...e){const t=KS(e),r=Sp(e,i=>new y_(this.firestore,new ds(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return LS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function PS(n){n=Jt(n,Wn);const e=Jt(n.firestore,Jn),t=Gr(e),r=new xa(e);return function CI(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,l){try{const h=yield function(m,v){const D=tt(m);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,v))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Fe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=vh(h,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield n_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ds(e,r,n._key,i,new Sr(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function jI(n){n=Jt(n,Wn);const e=Jt(n.firestore,Jn);return II(Gr(e),n._key,{source:"server"}).then(t=>g_(e,n,t))}(this._delegate):function kS(n){n=Jt(n,Wn);const e=Jt(n.firestore,Jn);return II(Gr(e),n._key).then(t=>g_(e,n,t))}(this._delegate),t.then(r=>new y_(this.firestore,new ds(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Zo(this.firestore,this._delegate.withConverter(e?Mh.getInstance(this.firestore,e):null))}}function hs(n,e,t){return n.message=n.message.replace(e,t),n}function KS(n){for(const e of n)if("object"==typeof e&&!x0(e))return e;return{}}function Sp(n,e){var t,r;let i;return i=x0(n[0])?n[0]:x0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class y_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ah(this._delegate,e._delegate)}}class Nh extends y_{data(e){const t=this._delegate.data(e);return function Vg(n,e){n||ct()}(void 0!==t),t}}class Ii{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new M0(e)}where(e,t,r){try{return new Ii(this.firestore,Aa(this._delegate,function OI(n,e,t){const r=e,i=h_("where",n);return new f0(i,r,t)}(e,t,r)))}catch(i){throw hs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ii(this.firestore,Aa(this._delegate,function g0(n,e="asc"){const t=e,r=h_("orderBy",n);return new p0(r,t)}(e,t)))}catch(r){throw hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ii(this.firestore,Aa(this._delegate,function xS(n){return hI("limit",n),new FI("limit",n,"F")}(e)))}catch(t){throw hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ii(this.firestore,Aa(this._delegate,function RS(n){return hI("limitToLast",n),new FI("limitToLast",n,"L")}(e)))}catch(t){throw hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ii(this.firestore,Aa(this._delegate,function VI(...n){return new LI("startAt",n,!0)}(...e)))}catch(t){throw hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ii(this.firestore,Aa(this._delegate,function m0(...n){return new LI("startAfter",n,!1)}(...e)))}catch(t){throw hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ii(this.firestore,Aa(this._delegate,function MS(...n){return new _0("endBefore",n,!1)}(...e)))}catch(t){throw hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ii(this.firestore,Aa(this._delegate,function UI(...n){return new _0("endAt",n,!0)}(...e)))}catch(t){throw hs(t,"endAt()","Query.endAt()")}}isEqual(e){return vp(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function FS(n){n=Jt(n,oi);const e=Jt(n.firestore,Jn),t=Gr(e),r=new xa(e);return function gS(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,l){try{const h=yield op(i,a,!0),m=new KC(a,h.Hi),v=m.Wu(h.documents),D=m.applyChanges(v,!1);l.resolve(D.snapshot)}catch(h){const m=vh(h,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield n_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new pl(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function C0(n){n=Jt(n,oi);const e=Jt(n.firestore,Jn),t=Gr(e),r=new xa(e);return o_(t,n._query,{source:"server"}).then(i=>new pl(e,r,n,i))}(this._delegate):function OS(n){n=Jt(n,oi);const e=Jt(n.firestore,Jn),t=Gr(e),r=new xa(e);return PI(n._query),o_(t,n._query).then(i=>new pl(e,r,n,i))}(this._delegate),t.then(r=>new v_(this.firestore,new pl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=KS(e),r=Sp(e,i=>new v_(this.firestore,new pl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return LS(this._delegate,t,r)}withConverter(e){return new Ii(this.firestore,this._delegate.withConverter(e?Mh.getInstance(this.firestore,e):null))}}class KI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Nh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class v_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ii(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Nh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new KI(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Nh(this._firestore,r))})}isEqual(e){return Ah(this._delegate,e._delegate)}}class Ap extends Ii{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Zo(this.firestore,e):null}doc(e){try{return new Zo(this.firestore,void 0===e?Jm(this._delegate):Jm(this._delegate,e))}catch(t){throw hs(t,"doc()","CollectionReference.doc()")}}add(e){return function D0(n,e){const t=Jt(n.firestore,Jn),r=Jm(n),i=Dp(n.converter,e);return xh(t,[c_(Ac(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Zo(this.firestore,t))}isEqual(e){return gI(this._delegate,e._delegate)}withConverter(e){return new Ap(this.firestore,this._delegate.withConverter(e?Mh.getInstance(this.firestore,e):null))}}function Tu(n){return Jt(n,Wn)}class w_{constructor(...e){this._delegate=new Du(...e)}static documentId(){return new w_(or.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof Du&&this._delegate._internalPath.isEqual(e._internalPath)}}class Nc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $I(){return new xc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Nc(e)}static delete(){const e=function jS(){return new Cp("deleteField")}();return e._methodName="FieldValue.delete",new Nc(e)}static arrayUnion(...e){const t=function GI(...n){return new SS("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Nc(t)}static arrayRemove(...e){const t=function HS(...n){return new c0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Nc(t)}static increment(e){const t=function WI(n){return new Sa("increment",n)}(e);return t._methodName="FieldValue.increment",new Nc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ZI={Firestore:R0,GeoPoint:Ep,Timestamp:Un,Blob:Rh,Transaction:qS,WriteBatch:zS,DocumentReference:Zo,DocumentSnapshot:y_,Query:Ii,QueryDocumentSnapshot:Nh,QuerySnapshot:v_,CollectionReference:Ap,FieldPath:w_,FieldValue:Nc,setLogLevel:function mM(n){!function rT(n){ma.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function ZS(n){(function _M(n,e){n.INTERNAL.registerComponent(new ni.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ZI)))})(n,(e,t)=>new R0(e,t,new gM)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(to.Z);var gl=V(7579),xp=V(6451),E_=V(5363),C_=V(8421);function bi(n,e){return(0,Or.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,Gn.x)(r,m=>{null==i||i.unsubscribe();let v=0;const D=a++;(0,C_.Xf)(n(m,D)).subscribe(i=(0,Gn.x)(r,S=>r.next(e?e(m,S,D,v++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var yM=V(6063);class YS extends gl.x{constructor(e=1/0,t=1/0,r=yM.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}var YI=V(3099);function QI(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,YI.B)({connector:()=>new YS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const I_=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Su=V(515);function N0(n){return n<=0?()=>Su.E:(0,Or.e)((e,t)=>{let r=0;e.subscribe((0,Gn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function go(n){return(0,Or.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function JI(n=k0){return(0,Or.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function k0(){return new I_}function kc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gi((i,a)=>n(i,a,r)):_i.y,N0(1),t?go(e):JI(()=>new I_))}var P0=V(576);function b_(n,e){return(0,P0.m)(e)?bi(()=>n,e):bi(()=>n)}var D_=V(9468);V(5867);const rb=new Map,S_={activated:!1,tokenObservers:[]},ib={initialized:!1,enabled:!1};function Di(n){return rb.get(n)||Object.assign({},S_)}function Rp(){return ib}class tA{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function nA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fs=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ab(n){if(!Di(n).activated)throw fs.create("use-before-activation",{appName:n.name})}function ub(n,e){return lb.apply(this,arguments)}function lb(){return lb=(0,ve.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const O=yield l.getHeartbeatsHeader();O&&(a["X-Firebase-Client"]=O)}const h={method:"POST",body:JSON.stringify(e),headers:a};let m,v;try{m=yield fetch(n,h)}catch(O){throw fs.create("fetch-network-error",{originalErrorMessage:null===(r=O)||void 0===r?void 0:r.message})}if(200!==m.status)throw fs.create("fetch-status-error",{httpStatus:m.status});try{v=yield m.json()}catch(O){throw fs.create("fetch-parse-error",{originalErrorMessage:null===(i=O)||void 0===i?void 0:i.message})}const D=v.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw fs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(D[1]),N=Date.now();return{token:v.token,expireTimeMillis:N+S,issuedAtTimeMillis:N}}),lb.apply(this,arguments)}function RM(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const kp="firebase-app-check-store";let Pp=null;function ml(){return Pp||(Pp=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(fs.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(kp,{keyPath:"compositeKey"})}}catch(r){e(fs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Pp)}function Op(){return Op=(0,ve.Z)(function*(n,e){const r=(yield ml()).transaction(kp,"readwrite"),a=r.objectStore(kp).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;h(fs.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),Op.apply(this,arguments)}const M_=new pi.Yd("@firebase/app-check");function H0(n,e){return(0,F.hl)()?function B0(n,e){return function R_(n,e){return Op.apply(this,arguments)}(function sA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{M_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function fb(){return Rp().enabled}function G0(){return k_.apply(this,arguments)}function k_(){return k_=(0,ve.Z)(function*(){const n=Rp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),k_.apply(this,arguments)}const aA={error:"UNKNOWN_ERROR"};function uA(n){return F.US.encodeString(JSON.stringify(n),!1)}function Lp(n){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,ve.Z)(function*(n,e=!1){const t=n.app;ab(t);const r=Di(t);let a,i=r.token;if(i&&!Up(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(Up(m)?i=m:yield H0(t,void 0))}if(!e&&i&&Up(i))return{token:i.token};let h,l=!1;if(fb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ub(RM(t,yield G0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield H0(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Di(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?M_.warn(m.message):M_.error(m),a=m}return i?a?h=Up(i)?{token:i.token,internalError:a}:cA(a):(h={token:i.token},r.token=i,yield H0(t,i)):h=cA(a),l&&mb(t,h),h}),Vp.apply(this,arguments)}function P_(n,e){const t=Di(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function O_(n){const{app:e}=n,t=Di(e);let r=t.tokenRefresher;r||(r=function lA(n){const{app:e}=n;return new tA((0,ve.Z)(function*(){let r;if(r=Di(e).token?yield Lp(n,!0):yield Lp(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function mb(n,e){const t=Di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Up(n){return n.expireTimeMillis-Date.now()>0}function cA(n){return{token:uA(aA),error:n}}class dA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Di(this.app);for(const t of e)P_(this.app,t.next);return Promise.resolve()}}const Ze="app-check-internal";!function dt(){(0,Cn._registerComponent)(new ni.wA("app-check",n=>function hA(n,e){return new dA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ze).initialize()})),(0,Cn._registerComponent)(new ni.wA(Ze,n=>function NM(n){return{getToken:e=>Lp(n,e),addTokenListener:e=>function gb(n,e,t,r){const{app:i}=n,a=Di(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Up(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),O_(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>O_(n))}(n,"INTERNAL",e),removeTokenListener:e=>P_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Cn.registerVersion)("@firebase/app-check","0.5.17")}();class qt{constructor(){return(0,sn.vb)("app-check")}}"undefined"!=typeof window&&window;var Cb=V(127);const mA=new f.OlP("angularfire2.auth.use-emulator"),_A=new f.OlP("angularfire2.auth.settings"),yA=new f.OlP("angularfire2.auth.tenant-id"),vA=new f.OlP("angularfire2.auth.langugage-code"),wA=new f.OlP("angularfire2.auth.use-device-language"),EA=new f.OlP("angularfire.auth.persistence"),CA=(n,e,t,r,i,a,l,h)=>(0,Nn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,D]of Object.entries(l))m.settings[v]=D;return h&&m.setPersistence(h),m},[t,r,i,a,l,h]);let Y0=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,N,O){const z=new gl.x,fe=Qe(void 0).pipe((0,E_.Q)(l.outsideAngular),bi(()=>a.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,5881)))),(0,bt.U)(()=>(0,Nn.on)(t,a,r)),(0,bt.U)(Ee=>CA(Ee,a,h,v,D,S,m,N)),QI({bufferSize:1,refCount:!1}));if(Yr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Qe(null);else{fe.pipe(kc()).subscribe();const Je=fe.pipe(bi(pt=>pt.getRedirectResult().then(xt=>xt,()=>null)),sn.iC,QI({bufferSize:1,refCount:!1})),ht=fe.pipe(bi(pt=>new Pr.y(xt=>({unsubscribe:a.runOutsideAngular(()=>pt.onAuthStateChanged(Vt=>xt.next(Vt),Vt=>xt.error(Vt),()=>xt.complete()))})))),at=fe.pipe(bi(pt=>new Pr.y(xt=>({unsubscribe:a.runOutsideAngular(()=>pt.onIdTokenChanged(Vt=>xt.next(Vt),Vt=>xt.error(Vt),()=>xt.complete()))}))));this.authState=Je.pipe(b_(ht),(0,D_.R)(l.outsideAngular),(0,E_.Q)(l.insideAngular)),this.user=Je.pipe(b_(at),(0,D_.R)(l.outsideAngular),(0,E_.Q)(l.insideAngular)),this.idToken=this.user.pipe(bi(pt=>pt?(0,ln.D)(pt.getIdToken()):Qe(null))),this.idTokenResult=this.user.pipe(bi(pt=>pt?(0,ln.D)(pt.getIdTokenResult()):Qe(null))),this.credential=(0,xp.T)(Je,z,this.authState.pipe(Gi(pt=>!pt))).pipe((0,bt.U)(pt=>(null==pt?void 0:pt.user)?pt:null),(0,D_.R)(l.outsideAngular),(0,E_.Q)(l.insideAngular))}return(0,Nn.pX)(this,fe,a,{spy:{apply:(Ee,Je,ht)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&ht.then(at=>z.next(at))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Nn.Dh),f.LFG(Nn.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(sn.HU),f.LFG(mA,8),f.LFG(_A,8),f.LFG(yA,8),f.LFG(vA,8),f.LFG(wA,8),f.LFG(EA,8),f.LFG(qt,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),MF=(()=>{class n{constructor(){Cb.Z.registerVersion("angularfire",sn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Y0]}),n})();function VM(n,e){return function NF(n,e=Qa.z){return new Pr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function IA(n,e){return VM(n,e).pipe((0,bt.U)(t=>({payload:t,type:"query"})))}function Ib(n,e){return IA(n,e).pipe(Ja(void 0),Xa(),(0,bt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(D=>D.doc.ref.isEqual(l.ref)),v=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function UM(n,e,t){return Ib(n,t).pipe(mi((r,i)=>function PF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function OF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return bA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return bA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),eu(),(0,bt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function bA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function BM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class jM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ib(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,bt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ja(void 0),Xa(),Gi(([r,i])=>i.length>0||!r),(0,bt.U)(([r,i])=>i),sn.iC)}auditTrail(e){return this.stateChanges(e).pipe(mi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=BM(e);return UM(this.query,t,this.afs.schedulers.outsideAngular).pipe(sn.iC)}valueChanges(e={}){return IA(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),sn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(sn.iC)}add(e){return this.ref.add(e)}doc(e){return new HM(this.ref.doc(e),this.afs)}}class HM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=WM(r,t);return new jM(i,a,this.afs)}snapshotChanges(){return function kF(n,e){return VM(n,e).pipe(Ja(void 0),Xa(),(0,bt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(sn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(sn.iC)}}class FF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ib(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Gi(t=>t.length>0),sn.iC):Ib(this.query,this.afs.schedulers.outsideAngular).pipe(sn.iC)}auditTrail(e){return this.stateChanges(e).pipe(mi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=BM(e);return UM(this.query,t,this.afs.schedulers.outsideAngular).pipe(sn.iC)}valueChanges(e={}){return IA(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),sn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(sn.iC)}}const $M=new f.OlP("angularfire2.enableFirestorePersistence"),GM=new f.OlP("angularfire2.firestore.persistenceSettings"),LF=new f.OlP("angularfire2.firestore.settings"),VF=new f.OlP("angularfire2.firestore.use-emulator");function WM(n,e=(t=>t)){return{query:e(n),ref:n}}let qM=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,N,O,z,fe,Ee,Je,ht){this.schedulers=m;const at=(0,Nn.on)(t,h,r),pt=D;S&&CA(at,h,N,z,fe,Ee,O,Je),[this.firestore,this.persistenceEnabled$]=(0,Nn.cc)(`${at.name}.firestore`,"AngularFirestore",at.name,()=>{const xt=h.runOutsideAngular(()=>at.firestore());if(a&&xt.settings(a),pt&&xt.useEmulator(...pt),i&&!Yr(l)){const Vt=()=>{try{return(0,ln.D)(xt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Rr){return"undefined"!=typeof console&&console.warn(Rr),Qe(!1)}};return[xt,h.runOutsideAngular(Vt)]}return[xt,Qe(!1)]},[a,pt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=WM(i,r),h=this.schedulers.ngZone.run(()=>a);return new jM(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new FF(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new HM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Nn.Dh),f.LFG(Nn.xv,8),f.LFG($M,8),f.LFG(LF,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(sn.HU),f.LFG(GM,8),f.LFG(VF,8),f.LFG(Y0,8),f.LFG(mA,8),f.LFG(_A,8),f.LFG(yA,8),f.LFG(vA,8),f.LFG(wA,8),f.LFG(EA,8),f.LFG(qt,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),UF=(()=>{class n{constructor(){Cb.Z.registerVersion("angularfire",sn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:$M,useValue:!0},{provide:GM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[qM]}),n})();class Ma extends gl.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:BF}=Array,{getPrototypeOf:jF,prototype:HF,keys:$F}=Object;function zM(n){if(1===n.length){const e=n[0];if(BF(e))return{args:e,keys:null};if(function GF(n){return n&&"object"==typeof n&&jF(n)===HF}(e)){const t=$F(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:WF}=Array;function KM(n){return(0,bt.U)(e=>function qF(n,e){return WF(e)?n(...e):n(e)}(n,e))}function ZM(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var zF=V(9672);function YM(n,e,t){n?(0,zF.f)(t,n,e):e()}function bb(n,e){const t=(0,P0.m)(n)?n:()=>n,r=i=>i.error(t());return new Pr.y(e?i=>e.schedule(r,0,i):r)}function QM(n){return new Pr.y(e=>{(0,C_.Xf)(n()).subscribe(e)})}var JM=V(727);function XM(){return(0,Or.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class YF extends Pr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Or.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new JM.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=JM.w0.EMPTY)}return e}refCount(){return XM()(this)}}function Oh(n){return(0,Or.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Gn.x)(t,void 0,void 0,l=>{a=(0,C_.Xf)(n(l,Oh(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var ps=V(5577);function F_(n,e){return(0,P0.m)(e)?(0,ps.z)(n,e,1):(0,ps.z)(n,1)}function DA(n){return n<=0?()=>Su.E:(0,Or.e)((e,t)=>{let r=[];e.subscribe((0,Gn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var mo=V(8505);class Pc{constructor(e,t){this.id=e,this.url=t}}class TA extends Pc{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Q0 extends Pc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class eN extends Pc{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class XF extends Pc{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eL extends Pc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tL extends Pc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nL extends Pc{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rL extends Pc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iL extends Pc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tN{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nN{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sL{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oL{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aL{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uL{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rN{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const an="primary";class lL{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function L_(n){return new lL(n)}const iN="ngNavigationCancelingError";function SA(n){const e=Error("NavigationCancelingError: "+n);return e[iN]=!0,e}function dL(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function _l(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!sN(n[i],e[i]))return!1;return!0}function sN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function oN(n){return Array.prototype.concat.apply([],n)}function aN(n){return n.length>0?n[n.length-1]:null}function Ki(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function yl(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,ln.D)(Promise.resolve(n)):Qe(n)}const pL={exact:function cN(n,e,t){if(!jp(n.segments,e.segments)||!Db(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!cN(n.children[r],e.children[r],t))return!1;return!0},subset:dN},uN={exact:function gL(n,e){return _l(n,e)},subset:function mL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sN(n[t],e[t]))},ignored:()=>!0};function lN(n,e,t){return pL[t.paths](n.root,e.root,t.matrixParams)&&uN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function dN(n,e,t){return hN(n,e,e.segments,t)}function hN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!jp(i,t)||e.hasChildren()||!Db(i,t,r))}if(n.segments.length===t.length){if(!jp(n.segments,t)||!Db(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!dN(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(jp(n.segments,i)&&Db(n.segments,i,r)&&n.children[an])&&hN(n.children[an],e,a,r)}}function Db(n,e,t){return e.every((r,i)=>uN[t](n[i].parameters,r.parameters))}class Bp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=L_(this.queryParams)),this._queryParamMap}toString(){return vL.serialize(this)}}class hn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ki(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tb(this)}}class J0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=L_(this.parameters)),this._parameterMap}toString(){return _N(this)}}function jp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class fN{}class pN{parse(e){const t=new AL(e);return new Bp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${X0(e.root,!0)}`,r=function CL(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Sb(t)}=${Sb(i)}`).join("&"):`${Sb(t)}=${Sb(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function wL(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const vL=new pN;function Tb(n){return n.segments.map(e=>_N(e)).join("/")}function X0(n,e){if(!n.hasChildren())return Tb(n);if(e){const t=n.children[an]?X0(n.children[an],!1):"",r=[];return Ki(n.children,(i,a)=>{a!==an&&r.push(`${a}:${X0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function yL(n,e){let t=[];return Ki(n.children,(r,i)=>{i===an&&(t=t.concat(e(r,i)))}),Ki(n.children,(r,i)=>{i!==an&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===an?[X0(n.children[an],!1)]:[`${i}:${X0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[an]?`${Tb(n)}/${t[0]}`:`${Tb(n)}/(${t.join("//")})`}}function gN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sb(n){return gN(n).replace(/%3B/gi,";")}function AA(n){return gN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ab(n){return decodeURIComponent(n)}function mN(n){return Ab(n.replace(/\+/g,"%20"))}function _N(n){return`${AA(n.path)}${function EL(n){return Object.keys(n).map(e=>`;${AA(e)}=${AA(n[e])}`).join("")}(n.parameters)}`}const IL=/^[^\/()?;=#]+/;function xb(n){const e=n.match(IL);return e?e[0]:""}const bL=/^[^=?&#]+/,TL=/^[^&#]+/;class AL{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[an]=new hn(e,t)),r}parseSegment(){const e=xb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new J0(Ab(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=xb(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=xb(this.remaining);i&&(r=i,this.capture(r))}e[Ab(t)]=Ab(r)}parseQueryParam(e){const t=function DL(n){const e=n.match(bL);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function SL(n){const e=n.match(TL);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=mN(t),a=mN(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=xb(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=an);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[an]:new hn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class yN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=xA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=RA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return RA(e,this._root).map(t=>t.value)}}function xA(n,e){if(n===e.value)return e;for(const t of e.children){const r=xA(n,t);if(r)return r}return null}function RA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=RA(n,t);if(r.length)return r.unshift(e),r}return[]}class Oc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function V_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vN extends yN{constructor(e,t){super(e),this.snapshot=t,MA(this,e)}toString(){return this.snapshot.toString()}}function wN(n,e){const t=function xL(n,e){const l=new Rb([],{},{},"",{},an,e,null,n.root,-1,{});return new CN("",new Oc(l,[]))}(n,e),r=new Ma([new J0("",{})]),i=new Ma({}),a=new Ma({}),l=new Ma({}),h=new Ma(""),m=new U_(r,i,l,h,a,an,e,t.root);return m.snapshot=t.root,new vN(new Oc(m,[]),t)}class U_{constructor(e,t,r,i,a,l,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,bt.U)(e=>L_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,bt.U)(e=>L_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function EN(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function RL(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Rb{constructor(e,t,r,i,a,l,h,m,v,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=L_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=L_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class CN extends yN{constructor(e,t){super(t),this.url=e,MA(this,t)}toString(){return IN(this._root)}}function MA(n,e){e.value._routerState=n,e.children.forEach(t=>MA(n,t))}function IN(n){const e=n.children.length>0?` { ${n.children.map(IN).join(", ")} } `:"";return`${n.value}${e}`}function NA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_l(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_l(e.params,t.params)||n.params.next(t.params),function hL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_l(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_l(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kA(n,e){const t=_l(n.params,e.params)&&function _L(n,e){return jp(n,e)&&n.every((t,r)=>_l(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||kA(n.parent,e.parent))}function ew(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function NL(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ew(n,r,i);return ew(n,r)})}(n,e,t);return new Oc(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>ew(n,h)),l}}const r=function kL(n){return new U_(new Ma(n.url),new Ma(n.params),new Ma(n.queryParams),new Ma(n.fragment),new Ma(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>ew(n,a));return new Oc(r,i)}}function Mb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function tw(n){return"object"==typeof n&&null!=n&&n.outlets}function PA(n,e,t,r,i){let a={};if(r&&Ki(r,(h,m)=>{a[m]=Array.isArray(h)?h.map(v=>`${v}`):`${h}`}),n===e)return new Bp(t,a,i);const l=bN(n,e,t);return new Bp(l,a,i)}function bN(n,e,t){const r={};return Ki(n.children,(i,a)=>{r[a]=i===e?t:bN(i,e,t)}),new hn(n.segments,r)}class DN{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Mb(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(tw);if(i&&i!==aN(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class OA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function TN(n,e,t){if(n||(n=new hn([],{})),0===n.segments.length&&n.hasChildren())return Nb(n,e,t);const r=function UL(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(tw(h))break;const m=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!AN(m,v,l))return a;r+=2}else{if(!AN(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new hn(n.segments.slice(0,r.pathIndex),{});return a.children[an]=new hn(n.segments.slice(r.pathIndex),n.children),Nb(a,0,i)}return r.match&&0===i.length?new hn(n.segments,{}):r.match&&!n.hasChildren()?FA(n,e,t):r.match?Nb(n,0,i):FA(n,e,t)}function Nb(n,e,t){if(0===t.length)return new hn(n.segments,{});{const r=function VL(n){return tw(n[0])?n[0].outlets:{[an]:n}}(t),i={};return Ki(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=TN(n.children[l],e,a))}),Ki(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new hn(n.segments,i)}}function FA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(tw(a)){const m=BL(a.outlets);return new hn(r,m)}if(0===i&&Mb(t[0])){r.push(new J0(n.segments[e].path,SN(t[0]))),i++;continue}const l=tw(a)?a.outlets[an]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Mb(h)?(r.push(new J0(l,SN(h))),i+=2):(r.push(new J0(l,{})),i++)}return new hn(r,{})}function BL(n){const e={};return Ki(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=FA(new hn([],{}),0,t))}),e}function SN(n){const e={};return Ki(n,(t,r)=>e[r]=`${t}`),e}function AN(n,e,t){return n==t.path&&_l(e,t.parameters)}class HL{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),NA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=V_(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Ki(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=V_(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=V_(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=V_(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new uL(a.value.snapshot))}),e.children.length&&this.forwardEvent(new oL(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(NA(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),NA(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function $L(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=m,l.outlet&&l.outlet.activateWith(i,m),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class LA{constructor(e,t){this.routes=e,this.module=t}}function Fh(n){return"function"==typeof n}function Hp(n){return n instanceof Bp}const nw=Symbol("INITIAL_VALUE");function rw(){return bi(n=>function KF(...n){const e=(0,Js.yG)(n),t=(0,Js.jO)(n),{args:r,keys:i}=zM(n);if(0===r.length)return(0,ln.D)([],e);const a=new Pr.y(function ZF(n,e,t=_i.y){return r=>{YM(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)YM(e,()=>{const v=(0,ln.D)(n[m],e);let D=!1;v.subscribe((0,Gn.x)(r,S=>{a[m]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>ZM(i,l):_i.y));return t?a.pipe(KM(t)):a}(n.map(e=>e.pipe(N0(1),Ja(nw)))).pipe(mi((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==nw?i:(a===nw&&(r=!0),r||!1!==a&&l!==t.length-1&&!Hp(a)?i:a),e)},nw),Gi(e=>e!==nw),(0,bt.U)(e=>Hp(e)?e:!0===e),N0(1)))}class ZL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new iw,this.attachRef=null}}class iw{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new ZL,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let VA=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=a||an,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,m=new YL(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(iw),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class YL{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===U_?this.route:e===iw?this.childContexts:this.parent.get(e,t)}}let xN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[VA],encapsulation:2}),n})();function RN(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];QL(r,JL(e,r))}}function QL(n,e){n.children&&RN(n.children,e)}function JL(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function UA(n){const e=n.children&&n.children.map(UA),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==an&&(t.component=xN),t}function Na(n){return n.outlet||an}function MN(n,e){const t=n.filter(r=>Na(r)===e);return t.push(...n.filter(r=>Na(r)!==e)),t}const NN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kb(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},NN):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||dL)(t,n,e);if(!a)return Object.assign({},NN);const l={};Ki(a.posParams,(m,v)=>{l[v]=m.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Pb(n,e,t,r,i="corrected"){if(t.length>0&&function tV(n,e,t){return t.some(r=>Ob(n,e,r)&&Na(r)!==an)}(n,t,r)){const l=new hn(e,function eV(n,e,t,r){const i={};i[an]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Na(a)!==an){const l=new hn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Na(a)]=l}return i}(n,e,r,new hn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function nV(n,e,t){return t.some(r=>Ob(n,e,r))}(n,t,r)){const l=new hn(n.segments,function XL(n,e,t,r,i,a){const l={};for(const h of r)if(Ob(n,t,h)&&!i[Na(h)]){const m=new hn([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Na(h)]=m}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new hn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Ob(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function kN(n,e,t,r){return!!(Na(n)===r||r!==an&&Ob(e,t,n))&&("**"===n.path||kb(e,n,t).matched)}function PN(n,e,t){return 0===e.length&&!n.children[t]}class Fb{constructor(e){this.segmentGroup=e||null}}class ON{constructor(e){this.urlTree=e}}function sw(n){return bb(new Fb(n))}function FN(n){return bb(new ON(n))}function rV(n){return bb(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class oV{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Pb(this.urlTree.root,[],[],this.config).segmentGroup,t=new hn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,an).pipe((0,bt.U)(a=>this.createUrlTree(BA(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Oh(a=>{if(a instanceof ON)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Fb?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,an).pipe((0,bt.U)(i=>this.createUrlTree(BA(i),e.queryParams,e.fragment))).pipe(Oh(i=>{throw i instanceof Fb?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new hn([],{[an]:e}):e;return new Bp(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,bt.U)(a=>new hn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,ln.D)(i).pipe(F_(a=>{const l=r.children[a],h=MN(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,bt.U)(m=>({segment:m,outlet:a})))}),mi((a,l)=>(a[l.outlet]=l.segment,a),{}),function QF(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gi((i,a)=>n(i,a,r)):_i.y,DA(1),t?go(e):JI(()=>new I_))}())}expandSegment(e,t,r,i,a,l){return(0,ln.D)(r).pipe(F_(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(Oh(v=>{if(v instanceof Fb)return Qe(null);throw v}))),kc(h=>!!h),Oh((h,m)=>{if(h instanceof I_||"EmptyError"===h.name)return PN(t,i,a)?Qe(new hn([],{})):sw(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return kN(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):sw(t):sw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?FN(a):this.lineralizeSegments(r,a).pipe((0,ps.z)(l=>{const h=new hn(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:m,remainingSegments:v,positionalParamSegments:D}=kb(t,i,a);if(!h)return sw(t);const S=this.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?FN(S):this.lineralizeSegments(i,S).pipe((0,ps.z)(N=>this.expandSegment(e,t,r,N.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Qe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,bt.U)(S=>(r._loadedConfig=S,new hn(i,{})))):Qe(new hn(i,{}));const{matched:l,consumedSegments:h,remainingSegments:m}=kb(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,ps.z)(D=>{const S=D.module,N=D.routes,{segmentGroup:O,slicedSegments:z}=Pb(t,h,m,N),fe=new hn(O.segments,O.children);if(0===z.length&&fe.hasChildren())return this.expandChildren(S,N,fe).pipe((0,bt.U)(at=>new hn(h,at)));if(0===N.length&&0===z.length)return Qe(new hn(h,{}));const Ee=Na(r)===a;return this.expandSegment(S,fe,N,z,Ee?an:a,!0).pipe((0,bt.U)(ht=>new hn(h.concat(ht.segments),ht.children)))})):sw(t)}getChildConfig(e,t,r){return t.children?Qe(new LA(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Qe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,ps.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,bt.U)(a=>(t._loadedConfig=a,a))):function iV(n){return bb(SA(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Qe(new LA([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return Qe(!0);const a=i.map(l=>{const h=e.get(l);let m;if(function WL(n){return n&&Fh(n.canLoad)}(h))m=h.canLoad(t,r);else{if(!Fh(h))throw new Error("Invalid CanLoad guard");m=h(t,r)}return yl(m)});return Qe(a).pipe(rw(),(0,mo.b)(l=>{if(!Hp(l))return;const h=SA(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,bt.U)(l=>!0===l))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Qe(r);if(i.numberOfChildren>1||!i.children[an])return rV(e.redirectTo);i=i.children[an]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Bp(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ki(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Ki(t.children,(h,m)=>{l[m]=this.createSegmentGroup(e,h,r,i)}),new hn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function BA(n){const e={};for(const r of Object.keys(n.children)){const a=BA(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function aV(n){if(1===n.numberOfChildren&&n.children[an]){const e=n.children[an];return new hn(n.segments.concat(e.segments),e.children)}return n}(new hn(n.segments,e))}class LN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Lb{constructor(e,t){this.component=e,this.route=t}}function lV(n,e,t){const r=n._root;return ow(r,e?e._root:null,t,[r.value])}function Vb(n,e,t){const r=function dV(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ow(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=V_(e);return n.children.forEach(l=>{(function hV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function fV(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!jp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!jp(n.url,e.url)||!_l(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kA(n,e)||!_l(n.queryParams,e.queryParams);default:return!kA(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new LN(r)):(a.data=l.data,a._resolvedData=l._resolvedData),ow(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Lb(h.outlet.component,l))}else l&&aw(e,h,i),i.canActivateChecks.push(new LN(r)),ow(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Ki(a,(l,h)=>aw(l,t.getContext(h),i)),i}function aw(n,e,t){const r=V_(n),i=n.value;Ki(r,(a,l)=>{aw(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Lb(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class CV{}function VN(n){return new Pr.y(e=>e.error(n))}class bV{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=Pb(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,an);if(null===t)return null;const r=new Rb([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Oc(r,t),a=new CN(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=EN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=MN(e,a),m=this.processSegmentGroup(h,l,a);if(null===m)return null;r.push(...m)}const i=UN(r);return function DV(n){n.sort((e,t)=>e.value.outlet===an?-1:t.value.outlet===an?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return PN(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!kN(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const O=r.length>0?aN(r).parameters:{};a=new Rb(r,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,HN(e),Na(e),e.component,e,BN(t),jN(t)+r.length,$N(e))}else{const O=kb(t,e,r);if(!O.matched)return null;l=O.consumedSegments,h=O.remainingSegments,a=new Rb(l,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,HN(e),Na(e),e.component,e,BN(t),jN(t)+l.length,$N(e))}const m=function TV(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:D}=Pb(t,l,h,m.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);if(0===D.length&&v.hasChildren()){const O=this.processChildren(m,v);return null===O?null:[new Oc(a,O)]}if(0===m.length&&0===D.length)return[new Oc(a,[])];const S=Na(e)===i,N=this.processSegment(m,v,D,S?an:i);return null===N?null:[new Oc(a,N)]}}function SV(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function UN(n){const e=[],t=new Set;for(const r of n){if(!SV(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=UN(r.children);e.push(new Oc(r.value,i))}return e.filter(r=>!t.has(r))}function BN(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jN(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function HN(n){return n.data||{}}function $N(n){return n.resolve||{}}function GN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function jA(n){return bi(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,bt.U)(()=>e)):Qe(e)})}class OV extends class PV{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const HA=new f.OlP("ROUTES");class WN{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,bt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new LA(oN(l.injector.get(HA,void 0,f.XFs.Self|f.XFs.Optional)).map(UA),l)}),Oh(a=>{throw t._loader$=void 0,a}));return t._loader$=new YF(i,()=>new gl.x).pipe(XM()),t._loader$}loadModuleFactory(e){return yl(e()).pipe((0,ps.z)(t=>t instanceof f.YKP?Qe(t):(0,ln.D)(this.compiler.compileModuleAsync(t))))}}class LV{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function VV(n){throw n}function UV(n,e,t){return e.parse("/")}function qN(n,e){return Qe(null)}const BV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gs=(()=>{class n{constructor(t,r,i,a,l,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new gl.x,this.errorHandler=VV,this.malformedUriErrorHandler=UV,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qN,afterPreactivation:qN},this.urlHandlingStrategy=new LV,this.routeReuseStrategy=new OV,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const S=l.get(f.R0b);this.isNgZoneEnabled=S instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function fL(){return new Bp(new hn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new WN(l,h,N=>this.triggerEvent(new tN(N)),N=>this.triggerEvent(new nN(N))),this.routerState=wN(this.currentUrlTree,this.rootComponentType),this.transitions=new Ma({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Gi(i=>0!==i.id),(0,bt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),bi(i=>{let a=!1,l=!1;return Qe(i).pipe((0,mo.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),bi(h=>{const m=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return zN(h.source)&&(this.browserUrlTree=h.extractedUrl),Qe(h).pipe(bi(S=>{const N=this.transitions.getValue();return r.next(new TA(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Su.E:Promise.resolve(S)}),function uV(n,e,t,r){return bi(i=>function sV(n,e,t,r,i){return new oV(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,bt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mo.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function AV(n,e,t,r,i){return(0,ps.z)(a=>function IV(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new bV(n,e,t,r,i,a).recognize();return null===l?VN(new CV):Qe(l)}catch(l){return VN(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,bt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mo.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(O,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new eL(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:O,source:z,restoredState:fe,extras:Ee}=h,Je=new TA(N,this.serializeUrl(O),z,fe);r.next(Je);const ht=wN(O,this.rootComponentType).snapshot;return Qe(Object.assign(Object.assign({},h),{targetSnapshot:ht,urlAfterRedirects:O,extras:Object.assign(Object.assign({},Ee),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Su.E}),jA(h=>{const{targetSnapshot:m,id:v,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:O}}=h;return this.hooks.beforePreactivation(m,{navigationId:v,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!O})}),(0,mo.b)(h=>{const m=new tL(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,bt.U)(h=>Object.assign(Object.assign({},h),{guards:lV(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function pV(n,e){return(0,ps.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?Qe(Object.assign(Object.assign({},t),{guardsResult:!0})):function gV(n,e,t,r){return(0,ln.D)(n).pipe((0,ps.z)(i=>function EV(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Qe(a.map(h=>{const m=Vb(h,e,i);let v;if(function KL(n){return n&&Fh(n.canDeactivate)}(m))v=yl(m.canDeactivate(n,e,t,r));else{if(!Fh(m))throw new Error("Invalid CanDeactivate guard");v=yl(m(n,e,t,r))}return v.pipe(kc())})).pipe(rw()):Qe(!0)}(i.component,i.route,t,e,r)),kc(i=>!0!==i,!0))}(l,r,i,n).pipe((0,ps.z)(h=>h&&function GL(n){return"boolean"==typeof n}(h)?function mV(n,e,t,r){return(0,ln.D)(e).pipe(F_(i=>ns(function yV(n,e){return null!==n&&e&&e(new sL(n)),Qe(!0)}(i.route.parent,r),function _V(n,e){return null!==n&&e&&e(new aL(n)),Qe(!0)}(i.route,r),function wV(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function cV(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>QM(()=>Qe(l.guards.map(m=>{const v=Vb(m,l.node,t);let D;if(function zL(n){return n&&Fh(n.canActivateChild)}(v))D=yl(v.canActivateChild(r,n));else{if(!Fh(v))throw new Error("Invalid CanActivateChild guard");D=yl(v(r,n))}return D.pipe(kc())})).pipe(rw())));return Qe(a).pipe(rw())}(n,i.path,t),function vV(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Qe(!0);const i=r.map(a=>QM(()=>{const l=Vb(a,e,t);let h;if(function qL(n){return n&&Fh(n.canActivate)}(l))h=yl(l.canActivate(e,n));else{if(!Fh(l))throw new Error("Invalid CanActivate guard");h=yl(l(e,n))}return h.pipe(kc())}));return Qe(i).pipe(rw())}(n,i.route,t))),kc(i=>!0!==i,!0))}(r,a,n,e):Qe(h)),(0,bt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,mo.b)(h=>{if(Hp(h.guardsResult)){const v=SA(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw v.url=h.guardsResult,v}const m=new nL(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),Gi(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),jA(h=>{if(h.guards.canActivateChecks.length)return Qe(h).pipe((0,mo.b)(m=>{const v=new rL(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),bi(m=>{let v=!1;return Qe(m).pipe(function xV(n,e){return(0,ps.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Qe(t);let a=0;return(0,ln.D)(i).pipe(F_(l=>function RV(n,e,t,r){return function MV(n,e,t,r){const i=GN(n);if(0===i.length)return Qe({});const a={};return(0,ln.D)(i).pipe((0,ps.z)(l=>function NV(n,e,t,r){const i=Vb(n,e,r);return yl(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,mo.b)(h=>{a[l]=h}))),DA(1),(0,ps.z)(()=>GN(a).length===i.length?Qe(a):Su.E))}(n._resolve,n,e,r).pipe((0,bt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),EN(n,t).resolve),null)))}(l.route,r,n,e)),(0,mo.b)(()=>a++),DA(1),(0,ps.z)(l=>a===i.length?Qe(t):Su.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mo.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,mo.b)(m=>{const v=new iL(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),jA(h=>{const{targetSnapshot:m,id:v,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:O}}=h;return this.hooks.afterPreactivation(m,{navigationId:v,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!O})}),(0,bt.U)(h=>{const m=function ML(n,e,t){const r=ew(n,e._root,t?t._root:void 0);return new vN(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:m})}),(0,mo.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,bt.U)(r=>(new HL(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,mo.b)({next(){a=!0},complete(){a=!0}}),function JF(n){return(0,Or.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Oh(h=>{if(l=!0,function cL(n){return n&&n[iN]}(h)){const m=Hp(h.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const v=new eN(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(v),m?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zN(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new XF(i.id,this.serializeUrl(i.extractedUrl),h);r.next(m);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return Su.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){RN(t),this.config=t.map(UA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,v=i||this.routerState.root,D=m?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function PL(n,e,t,r,i){if(0===t.length)return PA(e.root,e.root,e.root,r,i);const a=function OL(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new DN(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Ki(a.outlets,(m,v)=>{h[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new DN(t,e,r)}(t);if(a.toRoot())return PA(e.root,e.root,new hn([],{}),r,i);const l=function FL(n,e,t){if(n.isAbsolute)return new OA(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new OA(a,a===e.root,0)}const r=Mb(n.commands[0])?0:1;return function LL(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new OA(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?Nb(l.segmentGroup,l.index,a.commands):TN(l.segmentGroup,l.index,a.commands);return PA(e.root,l.segmentGroup,h,r,i)}(v,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Hp(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function HV(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},BV):!1===r?Object.assign({},jV):r,Hp(t))return lN(this.currentUrlTree,t,i);const a=this.parseUrl(t);return lN(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Q0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,m;if(this.disposed)return Promise.resolve(!1);let v,D,S;l?(v=l.resolve,D=l.reject,S=l.promise):S=new Promise((z,fe)=>{v=z,D=fe});const N=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),O=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):O=0,this.setTransition({id:N,targetPageId:O,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:v,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new eN(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function zN(n){return"imperative"!==n}let Lh=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new gl.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:B_(this.skipLocationChange),replaceUrl:B_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:B_(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gs),f.Y36(U_),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function B_(n){return""===n||!!n}class KN{}class ZN{preload(e,t){return Qe(null)}}let YN=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new WN(i,r,m=>t.triggerEvent(new tN(m)),m=>t.triggerEvent(new nN(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(Gi(t=>t instanceof Q0),F_(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,ln.D)(i).pipe((0,gi.J)(),(0,bt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Qe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,ps.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(gs),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(KN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),GA=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof TA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Q0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof rN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new rN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const $p=new f.OlP("ROUTER_CONFIGURATION"),QN=new f.OlP("ROUTER_FORROOT_GUARD"),qV=[Re,{provide:fN,useClass:pN},{provide:gs,useFactory:function QV(n,e,t,r,i,a,l={},h,m){const v=new gs(null,n,e,t,r,i,oN(a));return h&&(v.urlHandlingStrategy=h),m&&(v.routeReuseStrategy=m),function JV(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,v),l.enableTracing&&v.events.subscribe(D=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(N=console.groupEnd)||void 0===N||N.call(console)}),v},deps:[fN,iw,Re,f.zs3,f.Sil,HA,$p,[class FV{},new f.FiY],[class kV{},new f.FiY]]},iw,{provide:U_,useFactory:function XV(n){return n.routerState.root},deps:[gs]},YN,ZN,class WV{preload(e,t){return t().pipe(Oh(()=>Qe(null)))}},{provide:$p,useValue:{enableTracing:!1}}];function zV(){return new f.PXZ("Router",gs)}let JN=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[qV,XN(t),{provide:QN,useFactory:YV,deps:[[gs,new f.FiY,new f.tp0]]},{provide:$p,useValue:r||{}},{provide:me,useFactory:ZV,deps:[ae,[new f.tBr(We),new f.FiY],$p]},{provide:GA,useFactory:KV,deps:[gs,Lu,$p]},{provide:KN,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ZN},{provide:f.PXZ,multi:!0,useFactory:zV},[WA,{provide:f.ip1,multi:!0,useFactory:eU,deps:[WA]},{provide:ek,useFactory:tU,deps:[WA]},{provide:f.tb,multi:!0,useExisting:ek}]]}}static forChild(t){return{ngModule:n,providers:[XN(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(QN,8),f.LFG(gs,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function KV(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new GA(n,e,t)}function ZV(n,e,t={}){return t.useHash?new Oe(n,e):new He(n,e)}function YV(n){return"guarded"}function XN(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:HA,multi:!0,useValue:n}]}let WA=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new gl.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(gs),l=this.injector.get($p);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Qe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get($p),i=this.injector.get(YN),a=this.injector.get(GA),l=this.injector.get(gs),h=this.injector.get(f.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function eU(n){return n.appInitializer.bind(n)}function tU(n){return n.bootstrapListener.bind(n)}const ek=new f.OlP("Router Initializer");let vl=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["articles"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new lf.Q).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(qM),f.LFG(Y0),f.LFG(gs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tk_firebase={apiKey:"AIzaSyAIvkkOrZXH61Q25Id8cNQx0DRcz7fs-vY",authDomain:"hackyeah2022-quiz-generator.firebaseapp.com",projectId:"hackyeah2022-quiz-generator",storageBucket:"hackyeah2022-quiz-generator.appspot.com",messagingSenderId:"333519320172",appId:"1:333519320172:web:539360cffa7a14a9039449"};class nk{}class rk{}class Fc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Fc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Fc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Fc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class rU{encodeKey(e){return ik(e)}encodeValue(e){return ik(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const sU=/%(\d[a-f0-9])/gi,oU={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ik(n){return encodeURIComponent(n).replace(sU,(e,t)=>{var r;return null!==(r=oU[t])&&void 0!==r?r:e})}function sk(n){return`${n}`}class Vh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function iU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(l)||[];m.push(h),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Vh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(sk(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(sk(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class aU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ok(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function ak(n){return"undefined"!=typeof Blob&&n instanceof Blob}function uk(n){return"undefined"!=typeof FormData&&n instanceof FormData}class uw{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function uU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Fc),this.context||(this.context=new aU),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new Vh,this.urlWithParams=t}serializeBody(){return null===this.body?null:ok(this.body)||ak(this.body)||uk(this.body)||function lU(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||uk(this.body)?null:ak(this.body)?this.body.type||null:ok(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,D=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((N,O)=>N.set(O,e.setHeaders[O]),v)),e.setParams&&(D=Object.keys(e.setParams).reduce((N,O)=>N.set(O,e.setParams[O]),D)),new uw(r,i,l,{params:D,headers:v,context:S,reportProgress:m,responseType:a,withCredentials:h})}}var ai=(()=>((ai=ai||{})[ai.Sent=0]="Sent",ai[ai.UploadProgress=1]="UploadProgress",ai[ai.ResponseHeader=2]="ResponseHeader",ai[ai.DownloadProgress=3]="DownloadProgress",ai[ai.Response=4]="Response",ai[ai.User=5]="User",ai))();class qA{constructor(e,t=200,r="OK"){this.headers=e.headers||new Fc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class zA extends qA{constructor(e={}){super(e),this.type=ai.ResponseHeader}clone(e={}){return new zA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ub extends qA{constructor(e={}){super(e),this.type=ai.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ub({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class lk extends qA{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function KA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ZA=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof uw)a=t;else{let m,v;m=i.headers instanceof Fc?i.headers:new Fc(i.headers),i.params&&(v=i.params instanceof Vh?i.params:new Vh({fromObject:i.params})),a=new uw(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=Qe(a).pipe(F_(m=>this.handler.handle(m)));if(t instanceof uw||"events"===i.observe)return l;const h=l.pipe(Gi(m=>m instanceof Ub));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,bt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,bt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,bt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,bt.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Vh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,KA(i,r))}post(t,r,i={}){return this.request("POST",t,KA(i,r))}put(t,r,i={}){return this.request("PUT",t,KA(i,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(nk))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class ck{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const dk=new f.OlP("HTTP_INTERCEPTORS");let cU=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const dU=/^\)\]\}',?\n/;let hk=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Pr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((O,z)=>i.setRequestHeader(O,z.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const O=t.detectContentTypeHeader();null!==O&&i.setRequestHeader("Content-Type",O)}if(t.responseType){const O=t.responseType.toLowerCase();i.responseType="json"!==O?O:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const O=i.statusText||"OK",z=new Fc(i.getAllResponseHeaders()),fe=function hU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new zA({headers:z,status:i.status,statusText:O,url:fe}),l},m=()=>{let{headers:O,status:z,statusText:fe,url:Ee}=h(),Je=null;204!==z&&(Je=void 0===i.response?i.responseText:i.response),0===z&&(z=Je?200:0);let ht=z>=200&&z<300;if("json"===t.responseType&&"string"==typeof Je){const at=Je;Je=Je.replace(dU,"");try{Je=""!==Je?JSON.parse(Je):null}catch(pt){Je=at,ht&&(ht=!1,Je={error:pt,text:Je})}}ht?(r.next(new Ub({body:Je,headers:O,status:z,statusText:fe,url:Ee||void 0})),r.complete()):r.error(new lk({error:Je,headers:O,status:z,statusText:fe,url:Ee||void 0}))},v=O=>{const{url:z}=h(),fe=new lk({error:O,status:i.status||0,statusText:i.statusText||"Unknown Error",url:z||void 0});r.error(fe)};let D=!1;const S=O=>{D||(r.next(h()),D=!0);let z={type:ai.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(z.total=O.total),"text"===t.responseType&&!!i.responseText&&(z.partialText=i.responseText),r.next(z)},N=O=>{let z={type:ai.UploadProgress,loaded:O.loaded};O.lengthComputable&&(z.total=O.total),r.next(z)};return i.addEventListener("load",m),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:ai.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",m),i.removeEventListener("timeout",v),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(En))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const YA=new f.OlP("XSRF_COOKIE_NAME"),QA=new f.OlP("XSRF_HEADER_NAME");class fk{}let fU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=wo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(f.Lbi),f.LFG(YA))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),JA=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fk),f.LFG(QA))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),pU=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(dk,[]);this.chain=r.reduceRight((i,a)=>new ck(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(rk),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),gU=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:JA,useClass:cU}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:YA,useValue:t.cookieName}:[],t.headerName?{provide:QA,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[JA,{provide:dk,useExisting:JA,multi:!0},{provide:fk,useClass:fU},{provide:YA,useValue:"XSRF-TOKEN"},{provide:QA,useValue:"X-XSRF-TOKEN"}]}),n})(),mU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[ZA,{provide:nk,useClass:pU},hk,{provide:rk,useExisting:hk}],imports:[[gU.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var _U=V(5032);const pk="@firebase/database",gk="0.13.10";let XA="";function mk(n){XA=n}class wU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class EU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const _k=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wU(e)}}catch(e){}return new EU},Gp=_k("localStorage"),ex=_k("sessionStorage"),j_=new pi.Yd("@firebase/database"),yk=function(){let n=1;return function(){return n++}}(),vk=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},lw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=lw.apply(null,r):e+="object"==typeof r?(0,F.Wl)(r):r,e+=" "}return e};let Wp=null,wk=!0;const Ek=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(j_.logLevel=pi.in.VERBOSE,Wp=j_.log.bind(j_),e&&ex.set("logging_enabled",!0)):"function"==typeof n?Wp=n:(Wp=null,ex.remove("logging_enabled"))},Ui=function(...n){if(!0===wk&&(wk=!1,null===Wp&&!0===ex.get("logging_enabled")&&Ek(!0)),Wp){const e=lw.apply(null,n);Wp(e)}},cw=function(n){return function(...e){Ui(n,...e)}},tx=function(...n){const e="FIREBASE INTERNAL ERROR: "+lw(...n);j_.error(e)},wl=function(...n){const e=`FIREBASE FATAL ERROR: ${lw(...n)}`;throw j_.error(e),new Error(e)},ms=function(...n){const e="FIREBASE WARNING: "+lw(...n);j_.warn(e)},Bb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Lc="[MIN_NAME]",El="[MAX_NAME]",qp=function(n,e){if(n===e)return 0;if(n===Lc||e===El)return-1;if(e===Lc||n===El)return 1;{const t=jb(n),r=jb(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},bU=function(n,e){return n===e?0:n<e?-1:1},dw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Wl)(e))},nx=function(n){if("object"!=typeof n||null===n)return(0,F.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Wl)(e[r]),t+=":",t+=nx(n[e[r]]);return t+="}",t},Ck=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Ik=function(n){(0,F.hu)(!Bb(n),"Invalid JSON number");const r=1023;let i,a,l,h,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(m=0;m<64;m+=8){let N=parseInt(D.substr(m,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},AU=new RegExp("^-?(0*)\\d{1,10}$"),bk=-2147483648,rx=2147483647,jb=function(n){if(AU.test(n)){const e=Number(n);if(e>=bk&&e<=rx)return e}return null},H_=function(n){try{n()}catch(e){setTimeout(()=>{throw ms("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},hw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class RU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ms(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class MU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ui("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ms(e)}}let fw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const xk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Nk="websocket",kk="long_polling";class sx{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Gp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Gp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Pk(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===Nk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==kk)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function NU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Bi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class kU{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const ox={},ax={};function ux(n){const e=n.toString();return ox[e]||(ox[e]=new kU),ox[e]}class OU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&H_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Uh{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cw(e),this.stats_=ux(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),Pk(t,kk,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new OU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lx((...a)=>{const[l,h,m,v,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&xk.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uh.forceAllow_=!0}static forceDisallow(){Uh.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!Uh.forceAllow_&&(Uh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),i=Ck(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class lx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=yk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=lx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Ui("frame writing exception"),h.stack&&Ui(h.stack),Ui(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ui("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ui("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let $b=null;"undefined"!=typeof MozWebSocket?$b=MozWebSocket:"undefined"!=typeof WebSocket&&($b=WebSocket);let $_=(()=>{class n{constructor(t,r,i,a,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cw(this.connId),this.stats_=ux(r),this.connURL=n.connectionURL_(r,h,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&xk.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),Pk(t,Nk,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Gp.set("previous_websocket_failure",!0);try{let i;if((0,F.Yr)()){i={headers:{"User-Agent":`Firebase/5/${XA}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new $b(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==$b&&!n.forceDisallow_}static previouslyFailed(){return Gp.isInMemoryStorage||!0===Gp.get("previous_websocket_failure")}markConnectionHealthy(){Gp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,F.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Ck(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),jk=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Uh,$_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=$_&&$_.isAvailable();let i=r&&!$_.previouslyFailed();if(t.webSocketOnly&&(r||ms("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Kk{constructor(e,t,r,i,a,l,h,m,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cw("c:"+this.id+":"),this.transportManager_=new jk(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=hw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=dw("t",e),r=dw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=dw("t",e),r=dw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=dw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?tx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ms("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),hw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Gp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Zk{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Yk{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Gb extends Yk{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Gb}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Fn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Dn(){return new Fn("")}function Xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Bh(n){return n.pieces_.length-n.pieceNum_}function qn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Fn(n.pieces_,e)}function dx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function pw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Xk(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Fn(e,0)}function yr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Fn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Fn(t,0)}function en(n){return n.pieceNum_>=n.pieces_.length}function Us(n,e){const t=Xt(n),r=Xt(e);if(null===t)return e;if(t===r)return Us(qn(n),qn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function rB(n,e){const t=pw(n,0),r=pw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=qp(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function hx(n,e){if(Bh(n)!==Bh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ka(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Bh(n)>Bh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class iB{constructor(e,t){this.errorPrefix_=t,this.parts_=pw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);eP(this)}}function eP(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zp(n))}function zp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class fx extends Yk{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new fx}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const gw=1e3;let qb,Kp=(()=>{class n extends Zk{constructor(t,r,i,a,l,h,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=cw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Gb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,F.Wl)(l)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new F.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,D=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const i=(0,F.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ms(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):tx("Unrecognized action received from server: "+(0,F.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=gw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=gw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,v=null;const D=function(){v?v.close():(m=!0,a())};t.realtime_={close:D,sendRequest:function(O){(0,F.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(O)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,z]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);m?Ui("getToken() completed but was canceled"):(Ui("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=z&&z.token,v=new Kk(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,fe=>{ms(fe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(O){t.log_("Failed to get token: "+O),m||(t.repoInfo_.nodeAdmin&&ms(O),D())}}})()}interrupt(t){Ui("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ui("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=gw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>nx(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Fn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ui("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ui("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+XA.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Gb.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class un{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new un(e,t)}}class Wb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new un(Lc,e),i=new un(Lc,t);return 0!==this.compare(r,i)}minPost(){return un.MIN}}class rP extends Wb{static get __EMPTY_NODE(){return qb}static set __EMPTY_NODE(e){qb=e}compare(e,t){return qp(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return un.MIN}maxPost(){return new un(El,qb)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new un(e,qb)}toString(){return".key"}}const Cl=new rP;class zb{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let gx,Au=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:_o.EMPTY_NODE,this.right=null!=l?l:_o.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return _o.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return _o.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class _o{constructor(e,t=_o.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new _o(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Au.BLACK,null,null))}remove(e){return new _o(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Au.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new zb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new zb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new zb(this.root_,null,this.comparator_,!0,e)}}function hB(n,e){return qp(n.name,e.name)}function px(n,e){return qp(n,e)}_o.EMPTY_NODE=new class dB{copy(e,t,r,i,a){return this}insert(e,t,r){return new Au(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const iP=function(n){return"number"==typeof n?"number:"+Ik(n):"string:"+n},sP=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===gx||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===gx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let oP,aP,uP,G_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),sP(this.priorityNode_)}static set __childrenNodeConstructor(t){oP=t}static get __childrenNodeConstructor(){return oP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return en(t)?this:".priority"===Xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Xt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===Bh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(qn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+iP(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Ik(this.value_):this.value_,this.lazyHash_=vk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(a>=0,"Unknown leaf type: "+r),(0,F.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Xn=new class mB extends Wb{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?qp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return un.MIN}maxPost(){return new un(El,new G_("[PRIORITY-POST]",uP))}makePost(e,t){const r=aP(e);return new un(t,new G_("[PRIORITY-POST]",r))}toString(){return".priority"}},_B=Math.log(2);class yB{constructor(e){this.count=parseInt(Math.log(e+1)/_B,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Kb=function(n,e,t,r){n.sort(e);const i=function(m,v){const D=v-m;let S,N;if(0===D)return null;if(1===D)return S=n[m],N=t?t(S):S,new Au(N,S.node,Au.BLACK,null,null);{const O=parseInt(D/2,10)+m,z=i(m,O),fe=i(O+1,v);return S=n[O],N=t?t(S):S,new Au(N,S.node,Au.BLACK,z,fe)}},h=function(m){let v=null,D=null,S=n.length;const N=function(z,fe){const Ee=S-z,Je=S;S-=z;const ht=i(Ee+1,Je),at=n[Ee],pt=t?t(at):at;O(new Au(pt,at.node,fe,null,ht))},O=function(z){v?(v.left=z,v=z):(D=z,v=z)};for(let z=0;z<m.count;++z){const fe=m.nextBitIsOne(),Ee=Math.pow(2,m.count-(z+1));fe?N(Ee,Au.BLACK):(N(Ee,Au.BLACK),N(Ee,Au.RED))}return D}(new yB(n.length));return new _o(r||e,h)};let mx;const W_={};class Vc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(W_&&Xn,"ChildrenNode.ts has not been loaded"),mx=mx||new Vc({".priority":W_},{".priority":Xn}),mx}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof _o?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==Cl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(un.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?Kb(r,e.getCompare()):W_;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const D=Object.assign({},this.indexes_);return D[m]=h,new Vc(D,v)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(i,a)=>{const l=(0,F.DV)(this.indexSet_,a);if((0,F.hu)(l,"Missing index implementation for "+a),i===W_){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(un.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&h.push(v),v=m.getNext();return h.push(e),Kb(h,l.getCompare())}return W_}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new un(e.name,h))),m.insert(e,e.node)}});return new Vc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,i=>{if(i===W_)return i;{const a=t.get(e.name);return a?i.remove(new un(e.name,a)):i}});return new Vc(r,this.indexSet_)}}let mw,zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&sP(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return mw||(mw=new n(new _o(px),null,Vc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?mw:r}}getChild(t){const r=Xt(t);return null===r?this:this.getImmediateChild(r).getChild(qn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new un(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?mw:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Xt(t);if(null===i)return r;{(0,F.hu)(".priority"!==Xt(t)||1===Bh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(qn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Xn,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+iP(this.getPriority().val())+":"),this.forEachChild(Xn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":vk(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new un(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new un(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new un(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,un.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,un.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===_w?-1:0}withIndex(t){if(t===Cl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Cl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Xn),a=r.getIterator(Xn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Cl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const _w=new class vB extends zt{constructor(){super(new _o(px),zt.EMPTY_NODE,Vc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return zt.EMPTY_NODE}isEmpty(){return!1}};function Ar(n,e=null){if(null===n)return zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new G_(n,Ar(e));if(n instanceof Array){let t=zt.EMPTY_NODE;return Bi(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const a=Ar(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Ar(e))}{const t=[];let r=!1;if(Bi(n,(l,h)=>{if("."!==l.substring(0,1)){const m=Ar(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new un(l,m)))}}),0===t.length)return zt.EMPTY_NODE;const a=Kb(t,hB,l=>l.name,px);if(r){const l=Kb(t,Xn.getCompare());return new zt(a,Ar(e),new Vc({".priority":l},{".priority":Xn}))}return new zt(a,Ar(e),Vc.Default)}}Object.defineProperties(un,{MIN:{value:new un(Lc,zt.EMPTY_NODE)},MAX:{value:new un(El,_w)}}),rP.__EMPTY_NODE=zt.EMPTY_NODE,G_.__childrenNodeConstructor=zt,function fB(n){gx=n}(_w),function gB(n){uP=n}(_w),function pB(n){aP=n}(Ar);class _x extends Wb{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!en(e)&&".priority"!==Xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?qp(e.name,t.name):a}makePost(e,t){const r=Ar(e),i=zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new un(t,i)}maxPost(){const e=zt.EMPTY_NODE.updateChild(this.indexPath_,_w);return new un(El,e)}toString(){return pw(this.indexPath_,0).join("/")}}const yx=new class EB extends Wb{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?qp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return un.MIN}maxPost(){return un.MAX}makePost(e,t){const r=Ar(e);return new un(t,r)}toString(){return".value"}},q_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",CB=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=q_.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=q_.charAt(e[i]);return(0,F.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),dP=function(n){if(n===""+rx)return"-";const e=jb(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return El;const a=q_.charAt(q_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},hP=function(n){if(n===""+bk)return Lc;const e=jb(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+rx:(delete t[t.length-1],t.join("")):(t[t.length-1]=q_.charAt(q_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function fP(n){return{type:"value",snapshotNode:n}}function z_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function yw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function vw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class wx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(yw(t,h)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(z_(t,r)):l.trackChildChange(vw(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Xn,(i,a)=>{t.hasChild(i)||r.trackChildChange(yw(i,a))}),t.isLeafNode()||t.forEachChild(Xn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(vw(i,a,l))}else r.trackChildChange(z_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ww{constructor(e){this.indexedFilter_=new wx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ww.getStartPost_(e),this.endPost_=ww.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new un(t,r))||(r=zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(zt.EMPTY_NODE);const a=this;return t.forEachChild(Xn,(l,h)=>{a.matches(new un(l,h))||(i=i.updateImmediateChild(l,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class bB{constructor(e){this.rangedFilter_=new ww(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new un(t,r))||(r=zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=zt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(zt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(N,O)=>S(O,N)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let v=0,D=!1;for(;m.hasNext();){const S=m.getNext();!D&&h(a,S)<=0&&(D=!0),D&&v<this.limit_&&h(S,l)<=0?v++:i=i.updateImmediateChild(S.name,zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,O)=>S(O,N)}else l=this.index_.getCompare();const h=e;(0,F.hu)(h.numChildren()===this.limit_,"");const m=new un(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const O=null==N?1:l(N,m);if(D&&!r.isEmpty()&&O>=0)return null!=a&&a.trackChildChange(vw(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(yw(t,S));const fe=h.updateImmediateChild(t,zt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(z_(N.name,N.node)),fe.updateImmediateChild(N.name,N.node)):fe}}return r.isEmpty()?e:D&&l(v,m)>=0?(null!=a&&(a.trackChildChange(yw(v.name,v.node)),a.trackChildChange(z_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,zt.EMPTY_NODE)):e}}class Zb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:El}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xn}copy(){const e=new Zb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ex(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Cx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Yb(n,e){const t=n.copy();return t.index_=e,t}function pP(n){const e={};if(n.isDefault())return e;let t;return n.index_===Xn?t="$priority":n.index_===yx?t="$value":n.index_===Cl?t="$key":((0,F.hu)(n.index_ instanceof _x,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Wl)(t),n.startSet_&&(e.startAt=(0,F.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function gP(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Xn&&(e.i=n.index_.toString()),e}class Qb extends Zk{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=cw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Qb.getListenId_(e,r),h={};this.listens_[l]=h;const m=pP(e._queryParams);this.restRequest_(a+".json",m,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,F.DV)(this.listens_,l)===h){let N;N=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(N,null)}})}unlisten(e,t){const r=Qb.getListenId_(e,t);delete this.listens_[r]}get(e){const t=pP(e._queryParams),r=e._path.toString(),i=new F.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,F.cI)(h.responseText)}catch(v){ms("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&ms("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class RB{constructor(){this.rootNode_=zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Jb(){return{value:null,children:new Map}}function K_(n,e,t){if(en(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Xt(e);n.children.has(r)||n.children.set(r,Jb()),K_(n.children.get(r),e=qn(e),t)}}function Ix(n,e){if(en(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Xn,(r,i)=>{K_(n,new Fn(r),i)}),Ix(n,e)}}if(n.children.size>0){const t=Xt(e);return e=qn(e),n.children.has(t)&&Ix(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function bx(n,e,t){null!==n.value?t(e,n.value):function MB(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{bx(i,new Fn(e.toString()+"/"+r),t)})}class NB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class OB{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new NB(e);const r=1e4+2e4*Math.random();hw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Bi(e,(i,a)=>{a>0&&(0,F.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),hw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Pa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Pa||(Pa={})),Pa))();function Sx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Xb{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Pa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(en(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Fn(e));return new Xb(Dn(),t,this.revert)}}return(0,F.hu)(Xt(this.path)===e,"operationForChild called for unrelated child."),new Xb(qn(this.path),this.affectedTree,this.revert)}}class Ew{constructor(e,t){this.source=e,this.path=t,this.type=Pa.LISTEN_COMPLETE}operationForChild(e){return en(this.path)?new Ew(this.source,Dn()):new Ew(this.source,qn(this.path))}}class Zp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Pa.OVERWRITE}operationForChild(e){return en(this.path)?new Zp(this.source,Dn(),this.snap.getImmediateChild(e)):new Zp(this.source,qn(this.path),this.snap)}}class Z_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Pa.MERGE}operationForChild(e){if(en(this.path)){const t=this.children.subtree(new Fn(e));return t.isEmpty()?null:t.value?new Zp(this.source,Dn(),t.value):new Z_(this.source,Dn(),t)}return(0,F.hu)(Xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Z_(this.source,qn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class jh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(en(e))return this.isFullyInitialized()&&!this.filtered_;const t=Xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class FB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Cw(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function UB(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new un(e.childName,e.snapshotNode),i=new un(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function VB(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(m,n.query_))})})}function eD(n,e){return{eventCache:n,serverCache:e}}function Iw(n,e,t,r){return eD(new jh(e,t,r),n.serverCache)}function _P(n,e,t,r){return eD(n.eventCache,new jh(e,t,r))}function tD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Yp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Ax;class er{constructor(e,t=(()=>(Ax||(Ax=new _o(bU)),Ax))()){this.value=e,this.children=t}static fromObject(e){let t=new er(null);return Bi(e,(r,i)=>{t=t.set(new Fn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Dn(),value:this.value};if(en(e))return null;{const r=Xt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(qn(e),t);return null!=a?{path:yr(new Fn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(en(e))return this;{const t=Xt(e),r=this.children.get(t);return null!==r?r.subtree(qn(e)):new er(null)}}set(e,t){if(en(e))return new er(t,this.children);{const r=Xt(e),a=(this.children.get(r)||new er(null)).set(qn(e),t),l=this.children.insert(r,a);return new er(this.value,l)}}remove(e){if(en(e))return this.children.isEmpty()?new er(null):new er(null,this.children);{const t=Xt(e),r=this.children.get(t);if(r){const i=r.remove(qn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new er(null):new er(this.value,a)}return this}}get(e){if(en(e))return this.value;{const t=Xt(e),r=this.children.get(t);return r?r.get(qn(e)):null}}setTree(e,t){if(en(e))return t;{const r=Xt(e),a=(this.children.get(r)||new er(null)).setTree(qn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new er(this.value,l)}}fold(e){return this.fold_(Dn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(yr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Dn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(en(e))return null;{const a=Xt(e),l=this.children.get(a);return l?l.findOnPath_(qn(e),yr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Dn(),t)}foreachOnPath_(e,t,r){if(en(e))return this;{this.value&&r(t,this.value);const i=Xt(e),a=this.children.get(i);return a?a.foreachOnPath_(qn(e),yr(t,i),r):new er(null)}}foreach(e){this.foreach_(Dn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(yr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class xu{constructor(e){this.writeTree_=e}static empty(){return new xu(new er(null))}}function bw(n,e,t){if(en(e))return new xu(new er(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Us(i,e);return a=a.updateChild(l,t),new xu(n.writeTree_.set(i,a))}{const i=new er(t),a=n.writeTree_.setTree(e,i);return new xu(a)}}}function xx(n,e,t){let r=n;return Bi(t,(i,a)=>{r=bw(r,yr(e,i),a)}),r}function yP(n,e){if(en(e))return xu.empty();{const t=n.writeTree_.setTree(e,new er(null));return new xu(t)}}function Rx(n,e){return null!=Qp(n,e)}function Qp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Us(t.path,e)):null}function vP(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Xn,(r,i)=>{e.push(new un(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new un(r,i.value))}),e}function Hh(n,e){if(en(e))return n;{const t=Qp(n,e);return new xu(null!=t?new er(t):n.writeTree_.subtree(e))}}function Mx(n){return n.writeTree_.isEmpty()}function Y_(n,e){return wP(Dn(),n.writeTree_,e)}function wP(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,F.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=wP(yr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(yr(n,".priority"),r)),t}}function nD(n,e){return DP(e,n)}function WB(n,e){if(n.snap)return ka(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ka(yr(n.path,t),e))return!0;return!1}function zB(n){return n.visible}function EP(n,e,t){let r=xu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)ka(t,l)?(h=Us(t,l),r=bw(r,h,a.snap)):ka(l,t)&&(h=Us(l,t),r=bw(r,Dn(),a.snap.getChild(h)));else{if(!a.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(ka(t,l))h=Us(t,l),r=xx(r,h,a.children);else if(ka(l,t))if(h=Us(l,t),en(h))r=xx(r,Dn(),a.children);else{const m=(0,F.DV)(a.children,Xt(h));if(m){const v=m.getChild(qn(h));r=bw(r,Dn(),v)}}}}}return r}function CP(n,e,t,r,i){if(r||i){const a=Hh(n.visibleWrites,e);return!i&&Mx(a)?t:i||null!=t||Rx(a,Dn())?Y_(EP(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(ka(v.path,e)||ka(e,v.path))},e),t||zt.EMPTY_NODE):null}{const a=Qp(n.visibleWrites,e);if(null!=a)return a;{const l=Hh(n.visibleWrites,e);return Mx(l)?t:null!=t||Rx(l,Dn())?Y_(l,t||zt.EMPTY_NODE):null}}}function rD(n,e,t,r){return CP(n.writeTree,n.treePath,e,t,r)}function Nx(n,e){return function KB(n,e,t){let r=zt.EMPTY_NODE;const i=Qp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Hh(n.visibleWrites,e);return t.forEachChild(Xn,(l,h)=>{const m=Y_(Hh(a,new Fn(l)),h);r=r.updateImmediateChild(l,m)}),vP(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return vP(Hh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function IP(n,e,t,r){return function ZB(n,e,t,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=yr(e,t);if(Rx(n.visibleWrites,a))return null;{const l=Hh(n.visibleWrites,a);return Mx(l)?i.getChild(t):Y_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function iD(n,e){return function QB(n,e){return Qp(n.visibleWrites,e)}(n.writeTree,yr(n.treePath,e))}function kx(n,e,t){return function YB(n,e,t,r){const i=yr(e,t),a=Qp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Y_(Hh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function bP(n,e){return DP(yr(n.treePath,e),n.writeTree)}function DP(n,e){return{treePath:n,writeTree:e}}class t2{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,vw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,yw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,z_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,vw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const TP=new class n2{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Px{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new jh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return kx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yp(this.viewCache_),a=function e2(n,e,t,r,i,a){return function JB(n,e,t,r,i,a,l){let h;const m=Hh(n.visibleWrites,e),v=Qp(m,Dn());if(null!=v)h=v;else{if(null==t)return[];h=Y_(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),N=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let O=N.getNext();for(;O&&D.length<i;)0!==S(O,r)&&D.push(O),O=N.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function SP(n,e,t,r,i,a){const l=e.eventCache;if(null!=iD(r,t))return e;{let h,m;if(en(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Yp(e),S=Nx(r,v instanceof zt?v:zt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=rD(r,Yp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=Xt(t);if(".priority"===v){(0,F.hu)(1===Bh(t),"Can't have a priority with additional path components");const D=l.getNode();m=e.serverCache.getNode();const S=IP(r,t,D,m);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=qn(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const N=IP(r,t,l.getNode(),m);S=null!=N?l.getNode().getImmediateChild(v).updateChild(D,N):l.getNode().getImmediateChild(v)}else S=kx(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,D,i,a):l.getNode()}}return Iw(e,h,l.isFullyInitialized()||en(t),n.filter.filtersNodes())}}function sD(n,e,t,r,i,a,l,h){const m=e.serverCache;let v;const D=l?n.filter:n.filter.getIndexedFilter();if(en(t))v=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const O=m.getNode().updateChild(t,r);v=D.updateFullNode(m.getNode(),O,null)}else{const O=Xt(t);if(!m.isCompleteForPath(t)&&Bh(t)>1)return e;const z=qn(t),Ee=m.getNode().getImmediateChild(O).updateChild(z,r);v=".priority"===O?D.updatePriority(m.getNode(),Ee):D.updateChild(m.getNode(),O,Ee,z,TP,null)}const S=_P(e,v,m.isFullyInitialized()||en(t),D.filtersNodes());return SP(n,S,t,i,new Px(i,S,a),h)}function Ox(n,e,t,r,i,a,l){const h=e.eventCache;let m,v;const D=new Px(i,e,a);if(en(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=Iw(e,v,!0,n.filter.filtersNodes());else{const S=Xt(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=Iw(e,v,h.isFullyInitialized(),h.isFiltered());else{const N=qn(t),O=h.getNode().getImmediateChild(S);let z;if(en(N))z=r;else{const fe=D.getCompleteChild(S);z=null!=fe?".priority"===dx(N)&&fe.getChild(Xk(N)).isEmpty()?fe:fe.updateChild(N,r):zt.EMPTY_NODE}m=O.equals(z)?e:Iw(e,n.filter.updateChild(h.getNode(),S,z,N,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function AP(n,e){return n.eventCache.isCompleteForChild(e)}function xP(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Fx(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=en(t)?r:new er(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,N)=>{if(D.hasChild(S)){const z=xP(0,e.serverCache.getNode().getImmediateChild(S),N);m=sD(n,m,new Fn(S),z,i,a,l,h)}}),v.children.inorderTraversal((S,N)=>{const O=!e.serverCache.isCompleteForChild(S)&&null===N.value;if(!D.hasChild(S)&&!O){const fe=xP(0,e.serverCache.getNode().getImmediateChild(S),N);m=sD(n,m,new Fn(S),fe,i,a,l,h)}}),m}class d2{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new wx(r.getIndex()),a=function DB(n){return n.loadsAllData()?new wx(n.getIndex()):n.hasLimit()?new bB(n):new ww(n)}(r);this.processor_=function r2(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(zt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(zt.EMPTY_NODE,h.getNode(),null),D=new jh(m,l.isFullyInitialized(),i.filtersNodes()),S=new jh(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=eD(S,D),this.eventGenerator_=new FB(this.query_)}get query(){return this.query_}}function p2(n,e){const t=Yp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!en(e)&&!t.getImmediateChild(Xt(e)).isEmpty())?t.getChild(e):null}function RP(n){return 0===n.eventRegistrations_.length}function MP(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function NP(n,e,t,r){e.type===Pa.MERGE&&null!==e.source.queryId&&((0,F.hu)(Yp(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(tD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function s2(n,e,t,r,i){const a=new t2;let l,h;if(t.type===Pa.OVERWRITE){const v=t;v.source.fromUser?l=Ox(n,e,v.path,v.snap,r,i,a):((0,F.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!en(v.path),l=sD(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===Pa.MERGE){const v=t;v.source.fromUser?l=function a2(n,e,t,r,i,a,l){let h=e;return r.foreach((m,v)=>{const D=yr(t,m);AP(e,Xt(D))&&(h=Ox(n,h,D,v,i,a,l))}),r.foreach((m,v)=>{const D=yr(t,m);AP(e,Xt(D))||(h=Ox(n,h,D,v,i,a,l))}),h}(n,e,v.path,v.children,r,i,a):((0,F.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=Fx(n,e,v.path,v.children,r,i,h,a))}else if(t.type===Pa.ACK_USER_WRITE){const v=t;l=v.revert?function c2(n,e,t,r,i,a){let l;if(null!=iD(r,t))return e;{const h=new Px(r,e,i),m=e.eventCache.getNode();let v;if(en(t)||".priority"===Xt(t)){let D;if(e.serverCache.isFullyInitialized())D=rD(r,Yp(e));else{const S=e.serverCache.getNode();(0,F.hu)(S instanceof zt,"serverChildren would be complete if leaf node"),D=Nx(r,S)}v=n.filter.updateFullNode(m,D,a)}else{const D=Xt(t);let S=kx(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=m.getImmediateChild(D)),v=null!=S?n.filter.updateChild(m,D,S,qn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,zt.EMPTY_NODE,qn(t),h,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=rD(r,Yp(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=iD(r,Dn()),Iw(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function u2(n,e,t,r,i,a,l){if(null!=iD(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(en(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return sD(n,e,t,m.getNode().getChild(t),i,a,h,l);if(en(t)){let v=new er(null);return m.getNode().forEachChild(Cl,(D,S)=>{v=v.set(new Fn(D),S)}),Fx(n,e,t,v,i,a,h,l)}return e}{let v=new er(null);return r.foreach((D,S)=>{const N=yr(t,D);m.isCompleteForPath(N)&&(v=v.set(D,m.getNode().getChild(N)))}),Fx(n,e,t,v,i,a,h,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Pa.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);l=function l2(n,e,t,r,i){const a=e.serverCache;return SP(n,_P(e,a.getNode(),a.isFullyInitialized()||en(t),a.isFiltered()),t,r,TP,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function o2(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=tD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(fP(tD(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function i2(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,F.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,kP(n,a.changes,a.viewCache.eventCache.getNode(),null)}function kP(n,e,t,r){return function LB(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function IB(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Cw(n,i,"child_removed",e,r,t),Cw(n,i,"child_added",e,r,t),Cw(n,i,"child_moved",a,r,t),Cw(n,i,"child_changed",e,r,t),Cw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let oD,uD;class PP{constructor(){this.views=new Map}}function Lx(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,F.hu)(null!=a,"SyncTree gave us an op for an invalid query."),NP(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(NP(l,e,t,r));return a}}function OP(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=rD(t,i?r:null),m=!1;h?m=!0:r instanceof zt?(h=Nx(t,r),m=!1):(h=zt.EMPTY_NODE,m=!1);const v=eD(new jh(h,m,!1),new jh(r,i,!1));return new d2(e,v)}return l}function FP(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function $h(n,e){let t=null;for(const r of n.views.values())t=t||p2(r,e);return t}function LP(n,e){return e._queryParams.loadsAllData()?aD(n):n.views.get(e._queryIdentifier)}function VP(n,e){return null!=LP(n,e)}function Gh(n){return null!=aD(n)}function aD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let b2=1;class UP{constructor(e){this.listenProvider_=e,this.syncPointTree_=new er(null),this.pendingWriteTree_=function XB(){return{visibleWrites:xu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Vx(n,e,t,r,i){return function jB(n,e,t,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=bw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Q_(n,new Zp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Wh(n,e,t=!1){const r=function $B(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function GB(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&WB(h,r.path)?i=!1:ka(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function qB(n){n.visibleWrites=EP(n.allWrites,zB,Dn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=yP(n.visibleWrites,r.path):Bi(r.children,m=>{n.visibleWrites=yP(n.visibleWrites,yr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new er(null);return null!=r.snap?a=a.set(Dn(),!0):Bi(r.children,l=>{a=a.set(new Fn(l),!0)}),Q_(n,new Xb(r.path,a,t))}return[]}function Dw(n,e,t){return Q_(n,new Zp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function lD(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||VP(l,e))){const m=function E2(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=Gh(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(MP(v,t,r)),RP(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(MP(m,t,r)),RP(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!Gh(n)&&a.push(new(function y2(){return(0,F.hu)(oD,"Reference.ts has not been loaded"),oD}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function v2(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(h=m.events,!i){const D=-1!==v.findIndex(N=>N._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(N,O)=>Gh(O));if(D&&!S){const N=n.syncPointTree_.subtree(a);if(!N.isEmpty()){const O=function M2(n){return n.fold((e,t,r)=>{if(t&&Gh(t))return[aD(t)];{let i=[];return t&&(i=FP(t)),Bi(r,(a,l)=>{i=i.concat(l)}),i}})}(N);for(let z=0;z<O.length;++z){const fe=O[z],Ee=fe.query,Je=$P(n,fe);n.listenProvider_.startListening(Sw(Ee),Tw(n,Ee),Je.hashFn,Je.onComplete)}}}!S&&v.length>0&&!r&&(D?n.listenProvider_.stopListening(Sw(e),null):v.forEach(N=>{const O=n.queryToTagMap.get(dD(N));n.listenProvider_.stopListening(Sw(N),O)}))}!function N2(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=dD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return h}function BP(n,e,t,r){const i=Bx(n,r);if(null!=i){const a=jx(i),l=a.path,h=a.queryId,m=Us(l,e);return Hx(n,l,new Zp(Sx(h),m,t))}return[]}function Ux(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(N,O)=>{const z=Us(N,i);a=a||$h(O,z),l=l||Gh(O)});let m,h=n.syncPointTree_.get(i);h?(l=l||Gh(h),a=a||$h(h,Dn())):(h=new PP,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?m=!0:(m=!1,a=zt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((O,z)=>{const fe=$h(z,Dn());fe&&(a=a.updateImmediateChild(O,fe))}));const v=VP(h,e);if(!v&&!e._queryParams.loadsAllData()){const N=dD(e);(0,F.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const O=function k2(){return b2++}();n.queryToTagMap.set(N,O),n.tagToQueryMap.set(O,N)}let S=function w2(n,e,t,r,i,a){const l=OP(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function g2(n,e){n.eventRegistrations_.push(e)}(l,t),function m2(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Xn,(a,l)=>{r.push(z_(a,l))}),t.isFullyInitialized()&&r.push(fP(t.getNode())),kP(n,r,t.getNode(),e)}(l,t)}(h,e,t,nD(n.pendingWriteTree_,i),a,m);if(!v&&!l&&!r){const N=LP(h,e);S=S.concat(function P2(n,e,t){const r=e._path,i=Tw(n,e),a=$P(n,t),l=n.listenProvider_.startListening(Sw(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!Gh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((v,D,S)=>{if(!en(v)&&D&&Gh(D))return[aD(D).query];{let N=[];return D&&(N=N.concat(FP(D).map(O=>O.query))),Bi(S,(O,z)=>{N=N.concat(z)}),N}});for(let v=0;v<m.length;++v){const D=m[v];n.listenProvider_.stopListening(Sw(D),Tw(n,D))}}return l}(n,e,N))}return S}function cD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=$h(h,Us(l,e));if(v)return v});return CP(i,e,a,t,!0)}function Q_(n,e){return jP(e,n.syncPointTree_,null,nD(n.pendingWriteTree_,Dn()))}function jP(n,e,t,r){if(en(n.path))return HP(n,e,t,r);{const i=e.get(Dn());null==t&&null!=i&&(t=$h(i,Dn()));let a=[];const l=Xt(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const v=t?t.getImmediateChild(l):null,D=bP(r,l);a=a.concat(jP(h,m,v,D))}return i&&(a=a.concat(Lx(i,n,r,t))),a}}function HP(n,e,t,r){const i=e.get(Dn());null==t&&null!=i&&(t=$h(i,Dn()));let a=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,v=bP(r,l),D=n.operationForChild(l);D&&(a=a.concat(HP(D,h,m,v)))}),i&&(a=a.concat(Lx(i,n,r,t))),a}function $P(n,e){const t=e.query,r=Tw(n,t);return{hashFn:()=>(function h2(n){return n.viewCache_.serverCache.getNode()}(e)||zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function A2(n,e,t){const r=Bx(n,t);if(r){const i=jx(r),a=i.path,l=i.queryId,h=Us(a,e);return Hx(n,a,new Ew(Sx(l),h))}return[]}(n,t._path,r):function S2(n,e){return Q_(n,new Ew({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function SU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return lD(n,t,null,a)}}}}function Tw(n,e){const t=dD(e);return n.queryToTagMap.get(t)}function dD(n){return n._path.toString()+"$"+n._queryIdentifier}function Bx(n,e){return n.tagToQueryMap.get(e)}function jx(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Fn(n.substr(0,e))}}function Hx(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),Lx(r,t,nD(n.pendingWriteTree_,e),null)}function Sw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function I2(){return(0,F.hu)(uD,"Reference.ts has not been loaded"),uD}())(n._repo,n._path):n}class $x{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $x(t)}node(){return this.node_}}class Gx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=yr(this.path_,e);return new Gx(this.syncTree_,t)}node(){return cD(this.syncTree_,this.path_)}}const GP=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?F2(n[".sv"],e,t):"object"==typeof n[".sv"]?L2(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},F2=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},L2=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,F.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},WP=function(n,e,t,r){return qx(e,new Gx(t,n),r)},Wx=function(n,e,t){return qx(n,new $x(e),t)};function qx(n,e,t){const r=n.getPriority().val(),i=GP(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=GP(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new G_(h,Ar(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new G_(i))),l.forEachChild(Xn,(h,m)=>{const v=qx(m,e.getImmediateChild(h),t);v!==m&&(a=a.updateImmediateChild(h,v))}),a}}class zx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function hD(n,e){let t=e instanceof Fn?e:new Fn(e),r=n,i=Xt(t);for(;null!==i;){const a=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new zx(i,r,a),t=qn(t),i=Xt(t)}return r}function Jp(n){return n.node.value}function Kx(n,e){n.node.value=e,Zx(n)}function qP(n){return n.node.childCount>0}function fD(n,e){Bi(n.node.children,(t,r)=>{e(new zx(t,n,r))})}function zP(n,e,t,r){t&&!r&&e(n),fD(n,i=>{zP(i,e,!0,r)}),t&&r&&e(n)}function Aw(n){return new Fn(null===n.parent?n.name:Aw(n.parent)+"/"+n.name)}function Zx(n){null!==n.parent&&function B2(n,e,t){const r=function V2(n){return void 0===Jp(n)&&!qP(n)}(t),i=(0,F.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Zx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Zx(n))}(n.parent,n.name,n)}const j2=/[\[\].#$\/\u0000-\u001F\u007F]/,H2=/[\[\].#$\u0000-\u001F\u007F]/,Yx=10485760,pD=function(n){return"string"==typeof n&&0!==n.length&&!j2.test(n)},KP=function(n){return"string"==typeof n&&0!==n.length&&!H2.test(n)},xw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Bb(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Il=function(n,e,t,r){r&&void 0===e||Rw((0,F.gK)(n,"value"),e,t)},Rw=function(n,e,t){const r=t instanceof Fn?new iB(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+zp(r));if("function"==typeof e)throw new Error(n+"contains a function "+zp(r)+" with contents = "+e.toString());if(Bb(e))throw new Error(n+"contains "+e.toString()+" "+zp(r));if("string"==typeof e&&e.length>Yx/3&&(0,F.ug)(e)>Yx)throw new Error(n+"contains a string greater than "+Yx+" utf8 bytes "+zp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Bi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!pD(l)))throw new Error(n+" contains an invalid key ("+l+") "+zp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function sB(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),eP(n)})(r,l),Rw(n,h,r),function oB(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+zp(r)+" in addition to actual children.")}},ZP=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Bi(e,(l,h)=>{const m=new Fn(l);if(Rw(i,h,yr(t,m)),".priority"===dx(m)&&!xw(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=pw(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!pD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(rB);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ka(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Qx=function(n,e,t){if(!t||void 0!==e){if(Bb(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xw(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mw=function(n,e,t,r){if(!(r&&void 0===t||pD(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Nw=function(n,e,t,r){if(!(r&&void 0===t||KP(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Oa=function(n,e){if(".info"===Xt(e))throw new Error(n+" failed = Can't modify data under /.info/")},YP=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!pD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),KP(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class q2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function gD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!hx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function QP(n,e,t){gD(n,t),JP(n,r=>hx(r,e))}function Yo(n,e,t){gD(n,t),JP(n,r=>ka(r,e)||ka(e,r))}function JP(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(z2(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function z2(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Wp&&Ui("event: "+t.toString()),H_(r)}}}const XP="repo_interrupt";class Z2{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new q2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jb(),this.transactionQueueTree_=new zx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function eO(n){const t=n.infoData_.getNode(new Fn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function kw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:eO(n)})}function tO(n,e,t,r,i){n.dataUpdateCount++;const a=new Fn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,F.UI)(t,v=>Ar(v));l=function x2(n,e,t,r){const i=Bx(n,r);if(i){const a=jx(i),l=a.path,h=a.queryId,m=Us(l,e),v=er.fromObject(t);return Hx(n,l,new Z_(Sx(h),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Ar(t);l=BP(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,F.UI)(t,v=>Ar(v));l=function T2(n,e,t){const r=er.fromObject(t);return Q_(n,new Z_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Ar(t);l=Dw(n.serverSyncTree_,a,m)}let h=a;l.length>0&&(h=X_(n,a)),Yo(n.eventQueue_,h,l)}function nO(n,e){Jx(n,"connected",e),!1===e&&function ej(n){J_(n,"onDisconnectEvents");const e=kw(n),t=Jb();bx(n.onDisconnect_,Dn(),(i,a)=>{const l=WP(i,a,n.serverSyncTree_,e);K_(t,i,l)});let r=[];bx(t,Dn(),(i,a)=>{r=r.concat(Dw(n.serverSyncTree_,i,a));const l=nR(n,i);X_(n,l)}),n.onDisconnect_=Jb(),Yo(n.eventQueue_,Dn(),r)}(n)}function Jx(n,e,t){const r=new Fn("/.info/"+e),i=Ar(t);n.infoData_.updateSnapshot(r,i);const a=Dw(n.infoSyncTree_,r,i);Yo(n.eventQueue_,r,a)}function mD(n){return n.nextWriteId_++}function Xx(n,e,t,r,i){J_(n,"set",{path:e.toString(),value:t,priority:r});const a=kw(n),l=Ar(t,r),h=cD(n.serverSyncTree_,e),m=Wx(l,h,a),v=mD(n),D=Vx(n.serverSyncTree_,e,m,v,!0);gD(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(N,O)=>{const z="ok"===N;z||ms("set at "+e+" failed: "+N);const fe=Wh(n.serverSyncTree_,v,!z);Yo(n.eventQueue_,e,fe),qh(0,i,N,O)});const S=nR(n,e);X_(n,S),Yo(n.eventQueue_,S,[])}function tj(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Ix(n.onDisconnect_,e),qh(0,t,r,i)})}function rO(n,e,t,r){const i=Ar(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&K_(n.onDisconnect_,e,i),qh(0,r,a,l)})}function eR(n,e,t){let r;r=".info"===Xt(e._path)?lD(n.infoSyncTree_,e,t):lD(n.serverSyncTree_,e,t),QP(n.eventQueue_,e._path,r)}function iO(n){n.persistentConnection_&&n.persistentConnection_.interrupt(XP)}function J_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ui(t,...e)}function qh(n,e,t,r){e&&H_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function tR(n,e,t){return cD(n.serverSyncTree_,e,t)||zt.EMPTY_NODE}function _D(n,e=n.transactionQueueTree_){if(e||yD(n,e),Jp(e)){const t=oO(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function aj(n,e,t){const r=t.map(v=>v.currentWriteId),i=tR(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,F.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Us(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,v=>{J_(n,"transaction put response",{path:m.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,D=D.concat(Wh(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();yD(n,hD(n.transactionQueueTree_,e)),_D(n,n.transactionQueueTree_),Yo(n.eventQueue_,e,D);for(let N=0;N<S.length;N++)H_(S[N])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ms("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}X_(n,e)}},l)}(n,Aw(e),t)}else qP(e)&&fD(e,t=>{_D(n,t)})}function X_(n,e){const t=sO(n,e),r=Aw(t);return function uj(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],v=Us(t,m.path);let S,D=!1;if((0,F.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,S=m.abortReason,i=i.concat(Wh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)D=!0,S="maxretry",i=i.concat(Wh(n.serverSyncTree_,m.currentWriteId,!0));else{const N=tR(n,m.path,l);m.currentInputSnapshot=N;const O=e[h].update(N.val());if(void 0!==O){Rw("transaction failed: Data returned ",O,m.path);let z=Ar(O);"object"==typeof O&&null!=O&&(0,F.r3)(O,".priority")||(z=z.updatePriority(N.getPriority()));const Ee=m.currentWriteId,Je=kw(n),ht=Wx(z,N,Je);m.currentOutputSnapshotRaw=z,m.currentOutputSnapshotResolved=ht,m.currentWriteId=mD(n),l.splice(l.indexOf(Ee),1),i=i.concat(Vx(n.serverSyncTree_,m.path,ht,m.currentWriteId,m.applyLocally)),i=i.concat(Wh(n.serverSyncTree_,Ee,!0))}else D=!0,S="nodata",i=i.concat(Wh(n.serverSyncTree_,m.currentWriteId,!0))}Yo(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}yD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)H_(r[h]);_D(n,n.transactionQueueTree_)}(n,oO(n,t),r),r}function sO(n,e){let t,r=n.transactionQueueTree_;for(t=Xt(e);null!==t&&void 0===Jp(r);)r=hD(r,t),t=Xt(e=qn(e));return r}function oO(n,e){const t=[];return aO(n,e,t),t.sort((r,i)=>r.order-i.order),t}function aO(n,e,t){const r=Jp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);fD(e,i=>{aO(n,i,t)})}function yD(n,e){const t=Jp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Kx(e,t.length>0?t:void 0)}fD(e,r=>{yD(n,r)})}function nR(n,e){const t=Aw(sO(n,e)),r=hD(n.transactionQueueTree_,e);return function U2(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{rR(n,i)}),rR(n,r),zP(r,i=>{rR(n,i)}),t}function rR(n,e){const t=Jp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,F.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,F.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Wh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Kx(e,void 0):t.length=a+1,Yo(n.eventQueue_,Aw(e),i);for(let l=0;l<r.length;l++)H_(r[l])}}const iR=function(n,e){const t=dj(n),r=t.namespace;return"firebase.com"===t.domain&&wl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&wl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ms("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new sx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Fn(t.pathString)}},dj=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function lj(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const N=function cj(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ms(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(v+1),10)):v=e.length;const O=e.slice(0,v);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const z=e.indexOf(".");r=e.substring(0,z).toLowerCase(),t=e.substring(z+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class uO{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Wl)(this.snapshot.exportVal())}}class lO{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class sR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class cO{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return tj(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Oa("OnDisconnect.remove",this._path);const e=new F.BH;return rO(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Oa("OnDisconnect.set",this._path),Il("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return rO(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Oa("OnDisconnect.setWithPriority",this._path),Il("OnDisconnect.setWithPriority",e,this._path,!1),Qx("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function nj(n,e,t,r,i){const a=Ar(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&K_(n.onDisconnect_,e,a),qh(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Oa("OnDisconnect.update",this._path),ZP("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function rj(n,e,t,r){if((0,F.xb)(t))return Ui("onDisconnect().update() called with empty data.  Don't do anything."),void qh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Bi(t,(l,h)=>{const m=Ar(h);K_(n.onDisconnect_,yr(e,l),m)}),qh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class yo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return en(this._path)?null:dx(this._path)}get ref(){return new Fa(this._repo,this._path)}get _queryIdentifier(){const e=gP(this._queryParams),t=nx(e);return"{}"===t?"default":t}get _queryObject(){return gP(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof yo))return!1;const t=this._repo===e._repo,r=hx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function nB(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function vD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function zh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Cl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Lc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==El)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Xn){if(null!=e&&!xw(e)||null!=t&&!xw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof _x||n.getIndex()===yx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function wD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fa extends yo{constructor(e,t){super(e,t,new Zb,!1)}get parent(){const e=Xk(this._path);return null===e?null:new Fa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Xp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Fn(e),r=eg(this.ref,e);return new Xp(this._node.getChild(t),r,Xn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Xp(i,eg(this.ref,r),Xn)))}hasChild(e){const t=new Fn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function dO(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?eg(n._root,e):n._root}function hO(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=iR(e,n._repo.repoInfo_.nodeAdmin);YP("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&wl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),dO(n,t.path.toString())}function eg(n,e){return null===Xt((n=(0,F.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nw("child","path",t,!1)):Nw("child","path",e,!1),new Fa(n._repo,yr(n._path,e));var t}function oR(n,e){n=(0,F.m9)(n),Oa("set",n._path),Il("set",e,n._path,!1);const t=new F.BH;return Xx(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function mj(n,e){ZP("update",e,n._path,!1);const t=new F.BH;return function X2(n,e,t,r){J_(n,"update",{path:e.toString(),value:t});let i=!0;const a=kw(n),l={};if(Bi(t,(h,m)=>{i=!1,l[h]=WP(yr(e,h),Ar(m),n.serverSyncTree_,a)}),i)Ui("update() called with empty data.  Don't do anything."),qh(0,r,"ok",void 0);else{const h=mD(n),m=function D2(n,e,t,r){!function HB(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=xx(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=er.fromObject(t);return Q_(n,new Z_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);gD(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,D)=>{const S="ok"===v;S||ms("update at "+e+" failed: "+v);const N=Wh(n.serverSyncTree_,h,!S),O=N.length>0?X_(n,e):e;Yo(n.eventQueue_,O,N),qh(0,r,v,D)}),Bi(t,v=>{const D=nR(n,yr(e,v));X_(n,D)}),Yo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function _j(n){n=(0,F.m9)(n);const e=new sR(()=>{}),t=new Pw(e);return function J2(n,e,t){const r=function R2(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=Us(v,t);r=r||$h(D,S)});let i=n.syncPointTree_.get(t);i?r=r||$h(i,Dn()):(i=new PP,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new jh(r,!0,!1):null;return function f2(n){return tD(n.viewCache_)}(OP(i,e,nD(n.pendingWriteTree_,e._path),a?l.getNode():zt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Ar(i).withIndex(e._queryParams.getIndex());let l;if(Ux(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Dw(n.serverSyncTree_,e._path,a);else{const h=Tw(n.serverSyncTree_,e);l=BP(n.serverSyncTree_,e._path,a,h)}return Yo(n.eventQueue_,e._path,l),lD(n.serverSyncTree_,e,t,null,!0),a},i=>(J_(n,"get for query "+(0,F.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Xp(r,new Fa(n._repo,n._path),n._queryParams.getIndex()))}class Pw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new uO("value",this,new Xp(e.snapshotNode,new Fa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new lO(this,e,t):null}matches(e){return e instanceof Pw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ED{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new lO(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=eg(new Fa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new uO(e.type,this,new Xp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ED&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ow(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(D,S)=>{eR(n._repo,n,h),m(D,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new sR(t,a||void 0),h="value"===e?new Pw(l):new ED(e,l);return function ij(n,e,t){let r;r=".info"===Xt(e._path)?Ux(n.infoSyncTree_,e,t):Ux(n.serverSyncTree_,e,t),QP(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>eR(n._repo,n,h)}function aR(n,e,t,r){return Ow(n,"value",e,t,r)}function fO(n,e,t,r){return Ow(n,"child_added",e,t,r)}function pO(n,e,t,r){return Ow(n,"child_changed",e,t,r)}function gO(n,e,t,r){return Ow(n,"child_moved",e,t,r)}function mO(n,e,t,r){return Ow(n,"child_removed",e,t,r)}function _O(n,e,t){let r=null;const i=t?new sR(t):null;"value"===e?r=new Pw(i):e&&(r=new ED(e,i)),eR(n._repo,n,r)}class Ru{}class yO extends Ru{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Il("endAt",this._value,e._path,!0);const t=Cx(e._queryParams,this._value,this._key);if(wD(t),zh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yo(e._repo,e._path,t,e._orderByCalled)}}class vj extends Ru{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Il("endBefore",this._value,e._path,!1);const t=function xB(n,e,t){let r,i;return n.index_===Cl?("string"==typeof e&&(e=hP(e)),i=Cx(n,e,t)):(r=null==t?Lc:hP(t),i=Cx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(wD(t),zh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yo(e._repo,e._path,t,e._orderByCalled)}}class vO extends Ru{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Il("startAt",this._value,e._path,!0);const t=Ex(e._queryParams,this._value,this._key);if(wD(t),zh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new yo(e._repo,e._path,t,e._orderByCalled)}}class Cj extends Ru{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Il("startAfter",this._value,e._path,!1);const t=function AB(n,e,t){let r;if(n.index_===Cl)"string"==typeof e&&(e=dP(e)),r=Ex(n,e,t);else{let i;i=null==t?El:dP(t),r=Ex(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(wD(t),zh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new yo(e._repo,e._path,t,e._orderByCalled)}}class bj extends Ru{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new yo(e._repo,e._path,function TB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Tj extends Ru{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new yo(e._repo,e._path,function SB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Aj extends Ru{constructor(e){super(),this._path=e}_apply(e){vD(e,"orderByChild");const t=new Fn(this._path);if(en(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new _x(t),i=Yb(e._queryParams,r);return zh(i),new yo(e._repo,e._path,i,!0)}}class Rj extends Ru{_apply(e){vD(e,"orderByKey");const t=Yb(e._queryParams,Cl);return zh(t),new yo(e._repo,e._path,t,!0)}}class Nj extends Ru{_apply(e){vD(e,"orderByPriority");const t=Yb(e._queryParams,Xn);return zh(t),new yo(e._repo,e._path,t,!0)}}class Pj extends Ru{_apply(e){vD(e,"orderByValue");const t=Yb(e._queryParams,yx);return zh(t),new yo(e._repo,e._path,t,!0)}}class Fj extends Ru{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Il("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yO(this._value,this._key)._apply(new vO(this._value,this._key)._apply(e))}}function Mu(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function _2(n){(0,F.hu)(!oD,"__referenceConstructor has already been defined"),oD=n})(Fa),function C2(n){(0,F.hu)(!uD,"__referenceConstructor has already been defined"),uD=n}(Fa);const uR={};function EO(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||wl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ui("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=iR(a,i),h=l.repoInfo;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${h.namespace}`,l=iR(a,i),h=l.repoInfo):m=!l.repoInfo.secure;const D=i&&m?new fw(fw.OWNER):new MU(n.name,n.options,e);YP("Invalid Firebase Database URL",l),en(l.path)||wl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function jj(n,e,t,r){let i=uR[e.name];i||(i={},uR[e.name]=i);let a=i[n.toURLString()];return a&&wl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Z2(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new RU(n.name,t));return new $j(S,n)}class $j{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Y2(n,e,t){if(n.stats_=ux(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Qb(n.repoInfo_,(r,i,a,l)=>{tO(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>nO(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Kp(n.repoInfo_,e,(r,i,a,l)=>{tO(n,r,i,a,l)},r=>{nO(n,r)},r=>{!function Q2(n,e){Bi(e,(t,r)=>{Jx(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function PU(n,e){const t=n.toString();return ax[t]||(ax[t]=e()),ax[t]}(n.repoInfo_,()=>new OB(n.stats_,n.server_)),n.infoData_=new RB,n.infoSyncTree_=new UP({startListening:(r,i,a,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=Dw(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),Jx(n,"connected",!1),n.serverSyncTree_=new UP({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,m)=>{const v=l(h,m);Yo(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fa(this._repo,Dn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Bj(n,e){const t=uR[e];(!t||t[n.key]!==n)&&wl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),iO(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&wl("Cannot call "+e+" on a deleted database.")}}function CO(){jk.IS_TRANSPORT_INITIALIZED&&ms("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Gj(){CO(),Uh.forceDisallow()}function Wj(){CO(),$_.forceDisallow(),Uh.forceAllow()}function Kj(n,e){Ek(n,e)}const Yj={".sv":"timestamp"};class Xj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Kp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Kp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Zj(n){mk(Cn.SDK_VERSION),(0,Cn._registerComponent)(new ni.wA("database",(e,{instanceIdentifier:t})=>EO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Cn.registerVersion)(pk,gk,n),(0,Cn.registerVersion)(pk,gk,"esm2017")}();const rH=new pi.Yd("@firebase/database-compat"),bO=function(n){rH.warn("FIREBASE WARNING: "+n)};class oH{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,bO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class aH{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Kh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Nw("DataSnapshot.child","path",e,!1),new Kh(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Nw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Kh(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Qo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Zi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const l=Zi.getCancelAndContextArgs_("Query.on",r,i),h=(v,D)=>{t.call(l.context,new Kh(this.database,v),D)};h.userCallback=t,h.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return aR(this._delegate,h,m),t;case"child_added":return fO(this._delegate,h,m),t;case"child_removed":return mO(this._delegate,h,m),t;case"child_changed":return pO(this._delegate,h,m),t;case"child_moved":return gO(this._delegate,h,m),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,_O(this._delegate,e,i)}else _O(this._delegate,e)}get(){return _j(this._delegate).then(e=>new Kh(this.database,e))}once(e,t,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const a=Zi.getCancelAndContextArgs_("Query.once",r,i),l=new F.BH,h=(v,D)=>{const S=new Kh(this.database,v);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":aR(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":fO(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":mO(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":pO(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":gO(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Zi(this.database,Mu(this._delegate,function Dj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bj(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Zi(this.database,Mu(this._delegate,function Sj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Tj(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Zi(this.database,Mu(this._delegate,function xj(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Nw("orderByChild","path",n,!1),new Aj(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Zi(this.database,Mu(this._delegate,function Mj(){return new Rj}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Zi(this.database,Mu(this._delegate,function kj(){return new Nj}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Zi(this.database,Mu(this._delegate,function Oj(){return new Pj}()))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Zi(this.database,Mu(this._delegate,function Ej(n=null,e){return Mw("startAt","key",e,!0),new vO(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Zi(this.database,Mu(this._delegate,function Ij(n,e){return Mw("startAfter","key",e,!0),new Cj(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Zi(this.database,Mu(this._delegate,function yj(n,e){return Mw("endAt","key",e,!0),new yO(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Zi(this.database,Mu(this._delegate,function wj(n,e){return Mw("endBefore","key",e,!0),new vj(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Zi(this.database,Mu(this._delegate,function Lj(n,e){return Mw("equalTo","key",e,!0),new Fj(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Zi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,F.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Qo(this.database,new Fa(this._delegate._repo,this._delegate._path))}}class Qo extends Zi{constructor(e,t){super(e,new yo(t._repo,t._path,new Zb,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Qo(this.database,eg(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Qo(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Qo(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=oR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,bO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Oa("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=mj(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function gj(n,e,t){if(Oa("setWithPriority",n._path),Il("setWithPriority",e,n._path,!1),Qx("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return Xx(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function fj(n){return Oa("remove",n._path),oR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function eH(n,e,t){var r;if(n=(0,F.m9)(n),Oa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new F.BH,h=aR(n,()=>{});return function oj(n,e,t,r,i,a){J_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:yk(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=tR(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Rw("transaction failed: Data returned ",m,l.path),l.status=0;const v=hD(n.transactionQueueTree_,e),D=Jp(v)||[];let S;D.push(l),Kx(v,D),"object"==typeof m&&null!==m&&(0,F.r3)(m,".priority")?(S=(0,F.DV)(m,".priority"),(0,F.hu)(xw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(cD(n.serverSyncTree_,e)||zt.EMPTY_NODE).getPriority().val();const N=kw(n),O=Ar(m,S),z=Wx(O,h,N);l.currentOutputSnapshotRaw=O,l.currentOutputSnapshotResolved=z,l.currentWriteId=mD(n);const fe=Vx(n.serverSyncTree_,e,z,l.currentWriteId,l.applyLocally);Yo(n.eventQueue_,e,fe),_D(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,D)=>{let S=null;m?a.reject(m):(S=new Xp(D,new Fa(n._repo,n._path),Xn),a.resolve(new Xj(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new aH(a.committed,new Kh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function pj(n,e){n=(0,F.m9)(n),Oa("setPriority",n._path),Qx("setPriority",e,!1);const t=new F.BH;return Xx(n._repo,yr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function hj(n,e){n=(0,F.m9)(n),Oa("push",n._path),Il("push",e,n._path,!0);const t=eO(n._repo),r=CB(t),i=eg(n,r),a=eg(n,r);let l;return l=null!=e?oR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Qo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Qo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Oa("Reference.onDisconnect",this._delegate._path),new oH(new cO(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Fw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Gj,forceLongPolling:Wj}}useEmulator(e,t,r={}){!function IO(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&wl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&wl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new fw(fw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);a=new fw(l)}!function Uj(n,e,t,r){n.repoInfo_=new sx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof Qo){const t=hO(this._delegate,e.toString());return new Qo(this,t)}{const t=dO(this._delegate,e);return new Qo(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=hO(this._delegate,e);return new Qo(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function qj(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),iO(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function zj(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function sj(n){n.persistentConnection_&&n.persistentConnection_.resume(XP)}(n._repo)}(this._delegate)}}Fw.ServerValue={TIMESTAMP:function Qj(){return Yj}(),increment:n=>function Jj(n){return{".sv":{increment:n}}}(n)};var lH=Object.freeze({__proto__:null,initStandalone:function uH({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){mk(t);const l=new ni.zt("auth-internal",new ni.H0("database-standalone"));return l.setComponent(new ni.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Fw(EO(n,l,void 0,e,a),n),namespace:i}}});const cH=Fw.ServerValue;function DO(n){return null==n}function TO(n){return"function"==typeof n.set}function SO(n,e){return TO(e)?e:n.ref(e)}function AO(n,e){if(function hH(n){return"string"==typeof n}(n))return e.stringCase();if(TO(n))return e.firebaseCase();if(function fH(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Lw(n,e,t="on",r=Qa.z){return new Pr.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,bt.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,YI.B)())}function xO(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function mH(n,e){const{payload:t,prevKey:r,key:i}=e,a=xO(n,i),l=function gH(n,e){if(DO(e))return 0;{const t=xO(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function RO(n){return(DO(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function MO(n,e,t){return function pH(n,e,t){return Lw(n,"value","once",t).pipe(bi(r=>{const i=[Qe(r)];return e.forEach(a=>i.push(Lw(n,a,"on",t))),(0,xp.T)(...i).pipe(mi(mH,[]))}),eu())}(n,e=RO(e),t)}function NO(n,e,t){const r=(e=RO(e)).map(i=>Lw(n,i,"on",t));return(0,xp.T)(...r)}function kO(n,e){return function(r,i){return AO(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function wH(n){return function(t){return t?AO(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function PO(n,e){return function(){return Lw(n,"value","on",e)}}!function dH(n){n.INTERNAL.registerComponent(new ni.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Fw(i,r)},"PUBLIC").setServiceProps({Reference:Qo,Query:Zi,Database:Fw,DataSnapshot:Kh,enableLogging:Kj,INTERNAL:lH,ServerValue:cH}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(to.Z);const IH=new f.OlP("angularfire2.realtimeDatabaseURL"),bH=new f.OlP("angularfire2.database.use-emulator");let DH=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,N,O,z,fe,Ee){this.schedulers=h;const Je=m,ht=(0,Nn.on)(t,l,r);v&&CA(ht,l,D,N,O,z,S,fe),this.database=(0,Nn.cc)(`${ht.name}.database.${i}`,"AngularFireDatabase",ht.name,()=>{const at=l.runOutsideAngular(()=>ht.database(i||void 0));return Je&&at.useEmulator(...Je),at},[Je])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>SO(this.database,t));let a=i;return r&&(a=r(i)),function EH(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:kO(r,"update"),set:kO(r,"set"),push:i=>r.push(i),remove:wH(r),snapshotChanges:i=>MO(n,i,t).pipe(sn.iC),stateChanges:i=>NO(n,i,t).pipe(sn.iC),auditTrail:i=>function _H(n,e,t){return function vH(n,e,t){return function yH(n,e){return Lw(n,"value","on",e).pipe((0,bt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function yU(...n){const e=(0,Js.jO)(n);return(0,Or.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,C_.Xf)(n[m]).subscribe((0,Gn.x)(r,v=>{a[m]=v,!h&&!l[m]&&(l[m]=!0,(h=l.every(_i.y))&&(l=null))},_U.Z));t.subscribe((0,Gn.x)(r,m=>{if(h){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,bt.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function vU(n){return(0,Or.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Gn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,bt.U)(i=>i.actions))}(n,NO(n,e).pipe(mi((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(sn.iC),valueChanges:(i,a)=>MO(n,i,t).pipe((0,bt.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),sn.iC)}}(a,this)}object(t){return function CH(n,e){return{query:n,snapshotChanges:()=>PO(n,e.schedulers.outsideAngular)().pipe(sn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>PO(n,e.schedulers.outsideAngular)().pipe(sn.iC,(0,bt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>SO(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Nn.Dh),f.LFG(Nn.xv,8),f.LFG(IH,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(sn.HU),f.LFG(bH,8),f.LFG(Y0,8),f.LFG(mA,8),f.LFG(_A,8),f.LFG(yA,8),f.LFG(vA,8),f.LFG(wA,8),f.LFG(EA,8),f.LFG(qt,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),TH=(()=>{class n{constructor(){Cb.Z.registerVersion("angularfire",sn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[DH]}),n})();const OO="firebasestorage.googleapis.com",FO="storageBucket";class xr extends F.ZR{constructor(e,t,r=0){super(lR(e),`Firebase Storage: ${t} (${lR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function lR(n){return"storage/"+n}function cR(){return new xr("unknown","An unknown error occurred, please check the error payload for server response.")}function LO(){return new xr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function VO(){return new xr("canceled","User canceled the upload/download.")}function UO(){return new xr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ey(n){return new xr("invalid-argument",n)}function BO(){return new xr("app-deleted","The Firebase app was deleted.")}function jO(n){return new xr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vw(n,e){return new xr("invalid-format","String does not match format '"+n+"': "+e)}function Uw(n){throw new xr("internal-error","Internal error: "+n)}class _s{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_s.makeFromUrl(e,t)}catch(i){return new _s(e,"")}if(""===r.path)return r;throw function LH(n){return new xr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(pt){pt.path_=decodeURIComponent(pt.path)}const S=t.replace(/[.]/g,"\\."),at=[{regex:h,indices:{bucket:1,path:3},postModify:function a(pt){"/"===pt.path.charAt(pt.path.length-1)&&(pt.path_=pt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===OO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let pt=0;pt<at.length;pt++){const xt=at[pt],Vt=xt.regex.exec(e);if(Vt){let ku=Vt[xt.indices.path];ku||(ku=""),r=new _s(Vt[xt.indices.bucket],ku),xt.postModify(r);break}}if(null==r)throw function FH(n){return new xr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class HH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function CD(n){return"string"==typeof n||n instanceof String}function HO(n){return dR()&&n instanceof Blob}function dR(){return"undefined"!=typeof Blob&&!(0,F.UG)()}function hR(n,e,t,r){if(r<e)throw ey(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ey(`Invalid value for '${n}'. Expected ${t} or less.`)}function Uc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function $O(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Zh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Zh||(Zh={})),Zh))();function GO(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class KH{constructor(e,t,r,i,a,l,h,m,v,D,S,N=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,z)=>{this.resolve_=O,this.reject_=z,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function WH(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==h){const m=cR();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?BO():VO():LO())};this.canceled_?t(0,new ID(!1,null,!0)):this.backoffId_=function $H(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function m(){return 2===h}let v=!1;function D(...Ee){v||(v=!0,e.apply(null,Ee))}function S(Ee){i=setTimeout(()=>{i=null,n(O,m())},Ee)}function N(){a&&clearTimeout(a)}function O(Ee,...Je){if(v)return void N();if(Ee)return N(),void D.call(null,Ee,...Je);if(m()||l)return N(),void D.call(null,Ee,...Je);let at;r<64&&(r*=2),1===h?(h=2,at=0):at=1e3*(r+Math.random()),S(at)}let z=!1;function fe(Ee){z||(z=!0,N(),!v&&(null!==i?(Ee||(h=2),clearTimeout(i),S(0)):Ee||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,fe(!0)},t),fe}((r,i)=>{if(i)return void r(!1,new ID(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===Zh.NO_ERROR,m=a.getStatus();if((!h||GO(m,this.additionalRetryCodes_))&&this.retry){const D=a.getErrorCode()===Zh.ABORT;return void r(!1,new ID(!1,null,D))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new ID(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function GH(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ID{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function t$(...n){const e=function e$(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(dR())return new Blob(n);throw new xr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Jo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fR{constructor(e,t){this.data=e,this.contentType=t||null}}function pR(n,e){switch(n){case Jo.RAW:return new fR(WO(e));case Jo.BASE64:case Jo.BASE64URL:return new fR(qO(n,e));case Jo.DATA_URL:return new fR(function s$(n){const e=new zO(n);return e.base64?qO(Jo.BASE64,e.rest):function i$(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Vw(Jo.DATA_URL,"Malformed data URL.")}return WO(e)}(e.rest)}(e),function o$(n){return new zO(n).contentType}(e))}throw cR()}function WO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function qO(n,e){switch(n){case Jo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Vw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Vw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function r$(n){if("undefined"==typeof atob)throw function jH(n){return new xr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Vw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class zO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Vw(Jo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function a$(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class bl{constructor(e,t){let r=0,i="";HO(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(HO(this.data_)){const i=function n$(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new bl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new bl(r,!0)}}static getBlob(...e){if(dR()){const t=e.map(r=>r instanceof bl?r.data_:r);return new bl(t$.apply(null,t))}{const t=e.map(l=>CD(l)?pR(Jo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new bl(i,!0)}}uploadData(){return this.data_}}function gR(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function zH(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function KO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function c$(n,e){return e}class Bs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||c$}}let bD=null;function Bw(){if(bD)return bD;const n=[];n.push(new Bs("bucket")),n.push(new Bs("generation")),n.push(new Bs("metageneration")),n.push(new Bs("name","fullPath",!0));const t=new Bs("name");t.xform=function e(a,l){return function d$(n){return!CD(n)||n.length<2?n:KO(n)}(l)},n.push(t);const i=new Bs("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Bs("timeCreated")),n.push(new Bs("updated")),n.push(new Bs("md5Hash",null,!0)),n.push(new Bs("cacheControl",null,!0)),n.push(new Bs("contentDisposition",null,!0)),n.push(new Bs("contentEncoding",null,!0)),n.push(new Bs("contentLanguage",null,!0)),n.push(new Bs("contentType",null,!0)),n.push(new Bs("metadata","customMetadata",!0)),bD=n,bD}function ZO(n,e,t){const r=gR(e);return null===r?null:function f$(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function h$(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new _s(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function mR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const YO="prefixes";class Dl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Tl(n){if(!n)throw cR()}function DD(n,e){return function t(r,i){const a=ZO(n,i,e);return Tl(null!==a),a}}function ty(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function PH(){return new xr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function kH(){return new xr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function NH(n){return new xr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function OH(n){return new xr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function jw(n){const e=ty(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function MH(n){return new xr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function JO(n,e,t){const i=Uc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Dl(i,"GET",DD(n,t),l);return h.errorHandler=jw(e),h}function v$(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=Uc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new Dl(h,"GET",function _$(n,e){return function t(r,i){const a=function m$(n,e,t){const r=gR(t);return null===r?null:function g$(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[YO])for(const i of t[YO]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new _s(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new _s(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Tl(null!==a),a}}(n,e.bucket),v);return D.urlParams=a,D.errorHandler=ty(e),D}function e1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function I$(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class TD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function _R(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Tl(!1)}return Tl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const S$={STATE_CHANGED:"state_changed"},js={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yR(n){switch(n){case"running":case"pausing":case"canceling":return js.RUNNING;case"paused":return js.PAUSED;case"success":return js.SUCCESS;case"canceled":return js.CANCELED;default:return js.ERROR}}class A${constructor(e,t,r){if(function qH(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function ny(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class R$ extends class x${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Uw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Uw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Nu(){return new R$}class i1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Bw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(GO(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=LO()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function b$(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=e1(e,r,i),h={name:l.fullPath},m=Uc(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=mR(l,t),z=new Dl(m,"POST",function O(fe){let Ee;_R(fe);try{Ee=fe.getResponseHeader("X-Goog-Upload-URL")}catch(Je){Tl(!1)}return Tl(CD(Ee)),Ee},n.maxUploadRetryTime);return z.urlParams=h,z.headers=D,z.body=S,z.errorHandler=ty(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Nu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function D$(n,e,t,r){const m=new Dl(t,"POST",function a(v){const D=_R(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){Tl(!1)}S||Tl(!1);const N=Number(S);return Tl(!isNaN(N)),new TD(N,r.size(),"final"===D)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=ty(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Nu,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new TD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function T$(n,e,t,r,i,a,l,h){const m=new TD(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function UH(){return new xr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let D=v;i>0&&(D=Math.min(D,i));const S=m.current;let O="";O=0===D?"finalize":v===D?"upload, finalize":"upload";const z={"X-Goog-Upload-Command":O,"X-Goog-Upload-Offset":`${m.current}`},fe=r.slice(S,S+D);if(null===fe)throw UO();const at=new Dl(t,"POST",function Ee(pt,xt){const Vt=_R(pt,["active","final"]),Rr=m.current+D,ku=r.size();let ZR;return ZR="final"===Vt?DD(e,a)(pt,xt):null,new TD(Rr,ku,"final"===Vt,ZR)},e.maxUploadRetryTime);return at.headers=z,at.body=fe.uploadData(),at.progressCallback=h||null,at.errorHandler=ty(n),at}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Nu,i,a,!1);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=JO(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Nu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function t1(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let at="";for(let pt=0;pt<2;pt++)at+=Math.random().toString().slice(2);return at}();l["Content-Type"]="multipart/related; boundary="+m;const v=e1(e,r,i),D=mR(v,t),O=bl.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===O)throw UO();const z={name:v.fullPath},fe=Uc(a,n.host,n._protocol),Je=n.maxUploadRetryTime,ht=new Dl(fe,"POST",DD(n,t),Je);return ht.urlParams=z,ht.headers=l,ht.body=O.uploadData(),ht.errorHandler=ty(e),ht}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Nu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=VO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=yR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new A$(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(yR(this._state)){case js.SUCCESS:ny(this._resolve.bind(null,this.snapshot))();break;case js.CANCELED:case js.ERROR:ny(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(yR(this._state)){case js.RUNNING:case js.PAUSED:e.next&&ny(e.next.bind(e,this.snapshot))();break;case js.SUCCESS:e.complete&&ny(e.complete.bind(e))();break;default:e.error&&ny(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class tg{constructor(e,t){this._service=e,this._location=t instanceof _s?t:_s.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new tg(e,t)}get root(){const e=new _s(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KO(this._location.path)}get storage(){return this._service}get parent(){const e=function u$(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new _s(this._location.bucket,e);return new tg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw jO(e)}}function o1(n,e,t){return vR.apply(this,arguments)}function vR(){return vR=(0,ve.Z)(function*(n,e,t){const i=yield a1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield o1(n,e,i.nextPageToken))}),vR.apply(this,arguments)}function a1(n,e){null!=e&&"number"==typeof e.maxResults&&hR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=v$(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Nu)}function H$(n){n._throwIfRoot("getDownloadURL");const e=function w$(n,e,t){const i=Uc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Dl(i,"GET",function y$(n,e){return function t(r,i){const a=ZO(n,i,e);return Tl(null!==a),function p$(n,e,t,r){const i=gR(e);if(null===i||!CD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return Uc("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+$O({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=jw(e),h}(n.storage,n._location,Bw());return n.storage.makeRequestWithTokens(e,Nu).then(t=>{if(null===t)throw function BH(){return new xr("no-download-url","The given file does not have any download URLs.")}();return t})}function u1(n,e){const t=function l$(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new _s(n._location.bucket,t);return new tg(n.storage,r)}function l1(n,e){if(n instanceof wR){const t=n;if(null==t._bucket)throw function VH(){return new xr("no-default-bucket","No default bucket found. Did you set the '"+FO+"' property when initializing the app?")}();const r=new tg(t,t._bucket);return null!=e?l1(r,e):r}return void 0!==e?u1(n,e):n}function q$(n,e){if(e&&function G$(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof wR)return function W$(n,e){return new tg(n,e)}(n,e);throw ey("To use ref(service, url), the first argument must be a Storage instance.")}return l1(n,e)}function c1(n,e){const t=null==e?void 0:e[FO];return null==t?null:_s.makeFromBucketSpec(t,n)}class wR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=OO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_s.makeFromBucketSpec(i,this._host):c1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?_s.makeFromBucketSpec(this._url,e):c1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ve.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ve.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new HH(BO());{const l=function XH(n,e,t,r,i,a,l=!0){const h=$O(n.urlParams),m=n.url+h,v=Object.assign({},n.headers);return function QH(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function ZH(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function YH(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(v,a),function JH(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new KH(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ve.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const d1="@firebase/storage";function p1(n,e){return q$(n=(0,F.m9)(n),e)}function nG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new wR(t,r,i,e,Cn.SDK_VERSION)}!function rG(){(0,Cn._registerComponent)(new ni.wA("storage",nG,"PUBLIC").setMultipleInstances(!0)),(0,Cn.registerVersion)(d1,"0.9.14",""),(0,Cn.registerVersion)(d1,"0.9.14","esm2017")}();class SD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class m1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new SD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new SD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new SD(l,this,this._ref)):{next:t.next?l=>t.next(new SD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class _1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Bc(e,this._service))}get items(){return this._delegate.items.map(e=>new Bc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Bc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function tG(n,e){return u1(n,e)}(this._delegate,e);return new Bc(t,this.storage)}get root(){return new Bc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Bc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new m1(function K$(n,e,t){return function L$(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new i1(n,new bl(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Jo.RAW,r){this._throwIfRoot("putString");const i=pR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new m1(new i1(this._delegate,new bl(i.data,!0),a),this)}listAll(){return function J$(n){return function U$(n){const e={prefixes:[],items:[]};return o1(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new _1(e,this.storage))}list(e){return function Q$(n,e){return a1(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new _1(t,this.storage))}getMetadata(){return function Z$(n){return function B$(n){n._throwIfRoot("getMetadata");const e=JO(n.storage,n._location,Bw());return n.storage.makeRequestWithTokens(e,Nu)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function Y$(n,e){return function j$(n,e){n._throwIfRoot("updateMetadata");const t=function E$(n,e,t,r){const a=Uc(e.fullServerUrl(),n.host,n._protocol),h=mR(t,r),v=n.maxOperationRetryTime,D=new Dl(a,"PATCH",DD(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=jw(e),D}(n.storage,n._location,e,Bw());return n.storage.makeRequestWithTokens(t,Nu)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function X$(n){return H$(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function eG(n){return function $$(n){n._throwIfRoot("deleteObject");const e=function C$(n,e){const r=Uc(e.fullServerUrl(),n.host,n._protocol),h=new Dl(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=jw(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Nu)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw jO(e)}}class y1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(v1(e))throw ey("ref() expected a child path but got a URL, use refFromURL instead.");return new Bc(p1(this._delegate,e),this)}refFromURL(e){if(!v1(e))throw ey("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_s.makeFromUrl(e,this._delegate.host)}catch(t){throw ey("refFromUrl() expected a valid full URL but got an invalid one.")}return new Bc(p1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function g1(n,e,t,r={}){!function z$(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function v1(n){return/^[A-Za-z]+:\/\//.test(n)}function aG(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new y1(t,r)}function w1(n){const e=function lG(n){return new Pr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function SH(n,e=Qa.z){return(0,Or.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);h()}t.subscribe((0,Gn.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,bt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function AD(n){return{getDownloadURL:()=>Qe(void 0).pipe(sn.fc,bi(()=>n.getDownloadURL()),sn.iC),getMetadata:()=>Qe(void 0).pipe(sn.fc,bi(()=>n.getMetadata()),sn.iC),delete:()=>(0,ln.D)(n.delete()),child:e=>AD(n.child(e)),updateMetadata:e=>(0,ln.D)(n.updateMetadata(e)),put:(e,t)=>w1(n.put(e,t)),putString:(e,t,r)=>w1(n.putString(e,t,r)),list:e=>(0,ln.D)(n.list(e)),listAll:()=>(0,ln.D)(n.listAll())}}!function uG(n){const e={TaskState:js,TaskEvent:S$,StringFormat:Jo,Storage:y1,Reference:Bc};n.INTERNAL.registerComponent(new ni.wA("storage-compat",aG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(to.Z);const cG=new f.OlP("angularfire2.storageBucket"),dG=new f.OlP("angularfire2.storage.maxUploadRetryTime"),hG=new f.OlP("angularfire2.storage.maxOperationRetryTime"),fG=new f.OlP("angularfire2.storage.use-emulator");let pG=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S){const N=(0,Nn.on)(t,l,r);this.storage=(0,Nn.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const O=l.runOutsideAngular(()=>N.storage(i||void 0)),z=D;return z&&O.useEmulator(...z),m&&O.setMaxUploadRetryTime(m),v&&O.setMaxOperationRetryTime(v),O},[m,v])}ref(t){return AD(this.storage.ref(t))}refFromURL(t){return AD(this.storage.refFromURL(t))}upload(t,r,i){return AD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Nn.Dh),f.LFG(Nn.xv,8),f.LFG(cG,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(sn.HU),f.LFG(dG,8),f.LFG(hG,8),f.LFG(fG,8),f.LFG(qt,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),mG=(()=>{class n{constructor(){Cb.Z.registerVersion("angularfire",sn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[pG],imports:[gG]}),n})(),E1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),ng=(()=>{class n extends E1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Sl=new f.OlP("NgValueAccessor"),vG={provide:Sl,useExisting:(0,f.Gpc)(()=>xD),multi:!0},EG=new f.OlP("CompositionEventMode");let xD=(()=>{class n extends E1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wG(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(EG,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([vG]),f.qOj]}),n})();function Yh(n){return null==n||0===n.length}const ys=new f.OlP("NgValidators"),Qh=new f.OlP("NgAsyncValidators");function RD(n){return null}function N1(n){return null!=n}function k1(n){const e=(0,f.QGY)(n)?(0,ln.D)(n):n;return(0,f.CqO)(e),e}function P1(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function O1(n,e){return e.map(t=>t(n))}function F1(n){return n.map(e=>function IG(n){return!n.validate}(e)?e:t=>e.validate(t))}function ER(n){return null!=n?function L1(n){if(!n)return null;const e=n.filter(N1);return 0==e.length?null:function(t){return P1(O1(t,e))}}(F1(n)):null}function CR(n){return null!=n?function V1(n){if(!n)return null;const e=n.filter(N1);return 0==e.length?null:function(t){return function _G(...n){const e=(0,Js.jO)(n),{args:t,keys:r}=zM(n),i=new Pr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let m=l,v=l;for(let D=0;D<l;D++){let S=!1;(0,C_.Xf)(t[D]).subscribe((0,Gn.x)(a,N=>{S||(S=!0,v--),h[D]=N},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?ZM(r,h):h),a.complete())}))}});return e?i.pipe(KM(e)):i}(O1(t,e).map(k1)).pipe((0,bt.U)(P1))}}(F1(n)):null}function U1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function B1(n){return n._rawValidators}function j1(n){return n._rawAsyncValidators}function IR(n){return n?Array.isArray(n)?n:[n]:[]}function MD(n,e){return Array.isArray(n)?n.includes(e):n===e}function H1(n,e){const t=IR(e);return IR(n).forEach(i=>{MD(t,i)||t.push(i)}),t}function $1(n,e){return IR(e).filter(t=>!MD(n,t))}class Jh extends class G1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ER(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=CR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let q1=(()=>{class n extends class W1{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Jh,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})();function Hw(n,e){(function TR(n,e){const t=B1(n);null!==e.validator?n.setValidators(U1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=j1(n);null!==e.asyncValidator?n.setAsyncValidators(U1(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();OD(e._rawValidators,i),OD(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),function NG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&K1(n,e)})}(n,e),function PG(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function kG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&K1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function MG(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function PD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),function FD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=B1(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=j1(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return OD(e._rawValidators,r),OD(e._rawAsyncValidators,r),t}(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function OD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function K1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $w="VALID",LD="INVALID",ry="PENDING",Gw="DISABLED";function MR(n){return(VD(n)?n.validators:n)||null}function J1(n){return Array.isArray(n)?ER(n):n||null}function NR(n,e){return(VD(e)?e.asyncValidators:n)||null}function X1(n){return Array.isArray(n)?CR(n):n||null}function VD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const kR=n=>n instanceof OR;function tF(n){return(n=>n instanceof UD)(n)?n.value:n.getRawValue()}function nF(n,e){const t=kR(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function rF(n,e){kR(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new f.vHH(1002,"")})}class PR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=J1(this._rawValidators),this._composedAsyncValidatorFn=X1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===$w}get invalid(){return this.status===LD}get pending(){return this.status==ry}get disabled(){return this.status===Gw}get enabled(){return this.status!==Gw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=J1(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=X1(e)}addValidators(e){this.setValidators(H1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(H1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($1(e,this._rawAsyncValidators))}hasValidator(e){return MD(this._rawValidators,e)}hasAsyncValidator(e){return MD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ry,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gw,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$w,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$w||this.status===ry)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gw:$w}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ry,this._hasOwnPendingAsyncValidator=!0;const t=k1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function VG(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=kR(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof BG)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Gw:this.errors?LD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ry)?ry:this._anyControlsHaveStatus(LD)?LD:$w}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){VD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class UD extends PR{constructor(e=null,t,r){super(MR(t),NR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),VD(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class OR extends PR{constructor(e,t,r){super(MR(t),NR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){rF(this,e),Object.keys(e).forEach(r=>{nF(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=tF(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class BG extends PR{constructor(e,t,r){super(MR(t),NR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){rF(this,e),e.forEach((r,i)=>{nF(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>tF(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const WG={provide:Sl,useExisting:(0,f.Gpc)(()=>LR),multi:!0};let LR=(()=>{class n extends ng{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([WG]),f.qOj]}),n})(),uF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const VR=new f.OlP("NgModelWithFormControlWarning"),ZG={provide:Jh,useExisting:(0,f.Gpc)(()=>UR)};let UR=(()=>{class n extends Jh{constructor(t,r,i,a){super(),this._ngModelWarningConfig=a,this.update=new f.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=function AR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===xD?t=a:function LG(n){return Object.getPrototypeOf(n.constructor)===ng}(a)?r=a:i=a}),i||r||t||null}(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&PD(r,this,!1),Hw(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}(function SR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)})(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&PD(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(ys,10),f.Y36(Qh,10),f.Y36(Sl,10),f.Y36(VR,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[f._Bn([ZG]),f.qOj,f.TTD]}),n})();function mF(n){return"number"==typeof n?n:parseFloat(n)}let rg=(()=>{class n{constructor(){this._validator=RD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):RD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const a3={provide:ys,useExisting:(0,f.Gpc)(()=>WR),multi:!0};let WR=(()=>{class n extends rg{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>mF(t),this.createValidator=t=>function D1(n){return e=>{if(Yh(e.value)||Yh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[f._Bn([a3]),f.qOj]}),n})();const u3={provide:ys,useExisting:(0,f.Gpc)(()=>qR),multi:!0};let qR=(()=>{class n extends rg{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>mF(t),this.createValidator=t=>function b1(n){return e=>{if(Yh(e.value)||Yh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[f._Bn([u3]),f.qOj]}),n})(),g3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[uF]]}),n})(),m3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:VR,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[g3]}),n})();var y3=function(){function n(){this._subs=[]}return n.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._subs=this._subs.concat(e)},Object.defineProperty(n.prototype,"sink",{set:function(e){this._subs.push(e)},enumerable:!0,configurable:!0}),n.prototype.unsubscribe=function(){this._subs.forEach(function(e){return e&&function(n){return"function"==typeof n}(e.unsubscribe)&&e.unsubscribe()}),this._subs=[]},n}();let BD=(()=>{class n{constructor(){this.subs=new y3}finalize(){}ngOnDestroy(){return this.finalize(),this.subs.unsubscribe(),new v3}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,r){},encapsulation:2,changeDetection:0}),n})();class v3{}const CF="http://127.0.0.1:8000/";let w3=(()=>{class n{constructor(t){this.http=t}getArticles(t){return this.http.get(`${CF}search/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ZA))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KR=(()=>{class n{constructor(){this.isHighContrast=!1,this.contrast=new Ma(this.isHighContrast)}toggleContrast(){this.isHighContrast=!this.isHighContrast,this.contrast.next(this.isHighContrast),this.isHighContrast?(document.body.style.backgroundColor="black",document.body.style.color="white"):(document.body.style.backgroundColor="white",document.body.style.color="black")}get contrast$(){return this.contrast.asObservable()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const E3=["*"];let ig=(()=>{class n extends BD{constructor(t){super(),this.contrastService=t,this.disabled=!1,this.activeColorClass="bg-blue-100",this.disabledColorClass="bg-gray-100"}ngOnInit(){this.subs.sink=this.contrastService.contrast$.subscribe(t=>{t?(this.activeColorClass="bg-yellow-400",this.disabledColorClass="bg-gray-400"):(this.activeColorClass="bg-blue-100",this.disabledColorClass="bg-gray-100")})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(KR))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-button"]],inputs:{disabled:"disabled"},features:[f.qOj],ngContentSelectors:E3,decls:2,vars:1,consts:[[1,"rounded","px-4","py-2","text-center","w-full","text-black",3,"ngClass"]],template:function(t,r){1&t&&(f.F$t(),f.TgZ(0,"button",0),f.Hsn(1),f.qZA()),2&t&&f.s9C("ngClass",r.disabled?r.disabledColorClass+" cursor-not-allowed":r.activeColorClass+" cursor-pointer")},directives:[$s],styles:[""]}),n})();var C3=V(4327),I3=V.n(C3);class b3{constructor(e,t,r){this.sourceUrl=e,this.title=t,this.num_pages=r}}let D3=(()=>{class n{constructor(){this.numQuestions=10}setNumQuestions(t){this.numQuestions=t}getNumQuestions(){return this.numQuestions}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T3=(()=>{class n{constructor(t,r){this.http=t,this.numQuestionsService=r}generate(t,r){const i=new b3(t,r,this.numQuestionsService.getNumQuestions());return this.http.post(CF+"generate",i,{responseType:"arraybuffer"}).pipe((0,mo.b)(a=>{this.saveFile(a)}))}saveFile(t){const r=new Blob([t],{type:"application/pdf;charset=latin-1"});I3().saveAs(r,"ipn-quiz.pdf")}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ZA),f.LFG(D3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function S3(n,e){1&n&&(f.TgZ(0,"div",5),f.O4$(),f.TgZ(1,"svg",6),f._UZ(2,"path",7)(3,"path",8),f.qZA(),f.kcU(),f.TgZ(4,"span",9),f._uU(5,"Loading..."),f.qZA()())}let A3=(()=>{class n extends BD{constructor(t,r){super(),this.generateService=t,this.contrastService=r,this.isLoading=!1,this.highContrastColorClass=""}ngOnInit(){this.subs.add(this.contrastService.contrast$.subscribe(t=>{console.log("isHighContrast",t),this.highContrastColorClass=t?"hover:bg-yellow-400 hover:text-black":""}))}generate(){this.isLoading=!0,this.subs.add(this.generateService.generate(this.article.url,this.article.title).subscribe(()=>{this.isLoading=!1,console.log("Generated")}))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(T3),f.Y36(KR))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-article-card"]],inputs:{article:"article"},features:[f.qOj],decls:8,vars:4,consts:[[1,"article-card","flex","items-center","m-10","border","rounded","hover:bg-gray-100","space-between",3,"ngClass","click"],[1,"flex-1"],[1,"font-bold"],[2,"font-size","0.8rem"],["role","status",4,"ngIf"],["role","status"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"mr-2","w-8","h-8","text-gray-200","animate-spin","dark:text-gray-600","fill-blue-600"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.NdJ("click",function(){return r.generate()}),f.TgZ(1,"div",1)(2,"h3",2),f._uU(3),f.qZA(),f.TgZ(4,"p",3),f._uU(5),f.qZA()(),f.YNc(6,S3,6,0,"div",4),f._UZ(7,"div"),f.qZA()),2&t&&(f.Q6J("ngClass",r.highContrastColorClass),f.xp6(3),f.Oqu(r.article.title),f.xp6(2),f.Oqu(r.article.description),f.xp6(1),f.Q6J("ngIf",r.isLoading))},directives:[$s,dr],styles:[".article-card[_ngcontent-%COMP%]{padding:1rem;border:1px solid #ccc;cursor:pointer}"]}),n})();function x3(n,e){1&n&&f._UZ(0,"app-article-card",9),2&n&&f.Q6J("article",e.$implicit)}let R3=(()=>{class n extends BD{constructor(t){super(),this.articleService=t,this.query=new UD(""),this.numQuestions=new UD(10),this.articles=[]}ngOnInit(){}search(){this.subs.sink=this.articleService.getArticles(this.query.value).subscribe(t=>{this.articles=t})}searchEnabled(){return this.query.value.length>=2&&this.numQuestions.value>1&&this.numQuestions.value<30}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(w3))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-articles"]],features:[f.qOj],decls:16,vars:4,consts:[[1,"flex","flex-col","gap-3"],[1,"flex","justify-center","items-center","gap-3","m-10","border","p-4","rounded","flex-wrap"],["for","query"],["id","query","type","text",1,"py-2","px-4","border","rounded",3,"formControl"],["queryRef",""],["min","1","max","30","id","numQuestions","type","number",1,"py-2","px-4","border","rounded",3,"formControl"],["numRef",""],["type","button",3,"disabled","click"],[3,"article",4,"ngFor","ngForOf"],[3,"article"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"label",2),f._uU(4,"Query: "),f.qZA(),f._UZ(5,"input",3,4),f.qZA(),f.TgZ(7,"div")(8,"label",2),f._uU(9,"Number of questions (max 30): "),f.qZA(),f._UZ(10,"input",5,6),f.qZA(),f.TgZ(12,"app-button",7),f.NdJ("click",function(){return r.searchEnabled()?r.search():null}),f._uU(13,"Search "),f.qZA()(),f.TgZ(14,"div"),f.YNc(15,x3,1,1,"app-article-card",8),f.qZA()()),2&t&&(f.xp6(5),f.Q6J("formControl",r.query),f.xp6(5),f.Q6J("formControl",r.numQuestions),f.xp6(2),f.Q6J("disabled",!r.searchEnabled()),f.xp6(3),f.Q6J("ngForOf",r.articles))},directives:[xD,q1,UR,qR,WR,LR,ig,nr,A3],styles:[""]}),n})();function M3(n,e){if(1&n&&f._UZ(0,"img",1),2&n){const t=e.ngIf,r=f.oxw();f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",f.LSH),f.s9C("alt",t.displayName),f.s9C("width",r.size)}}let IF=(()=>{class n{constructor(t){this.authService=t,this.size=100}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vl))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-user-image"]],inputs:{size:"size"},decls:1,vars:1,consts:[[3,"src","alt","width",4,"ngIf"],[3,"src","alt","width"]],template:function(t,r){1&t&&f.YNc(0,M3,1,3,"img",0),2&t&&f.Q6J("ngIf",r.authService.userData)},directives:[dr],styles:[""]}),n})();function N3(n,e){if(1&n){const t=f.EpF();f.ynx(0),f._UZ(1,"app-user-image",2),f.TgZ(2,"h1")(3,"strong"),f._uU(4),f.qZA()(),f.TgZ(5,"p"),f._uU(6," User ID: "),f.TgZ(7,"strong"),f._uU(8),f.qZA()(),f.TgZ(9,"p"),f._uU(10," Email: "),f.TgZ(11,"strong"),f._uU(12),f.qZA()(),f.TgZ(13,"p"),f._uU(14," Email Verified: "),f.TgZ(15,"strong"),f._uU(16),f.qZA()(),f.TgZ(17,"app-button",3),f.NdJ("click",function(){return f.CHM(t),f.oxw().authService.SignOut()}),f._uU(18,"Log out"),f.qZA(),f.BQk()}if(2&n){const t=e.ngIf;f.xp6(1),f.Q6J("size",100),f.xp6(3),f.Oqu(t.displayName?t.displayName:t.email),f.xp6(4),f.Oqu(t.uid),f.xp6(4),f.Oqu(t.email),f.xp6(4),f.Oqu(t.emailVerified)}}let k3=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vl))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:2,vars:1,consts:[[1,"flex","flex-col","gap-3","items-center","justify-center","h-screen"],[4,"ngIf"],[3,"size"],[3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.YNc(1,N3,19,5,"ng-container",1),f.qZA()),2&t&&(f.xp6(1),f.Q6J("ngIf",r.authService.userData))},directives:[dr,IF,ig],styles:[""]}),n})(),P3=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vl))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:13,vars:0,consts:[[1,"w-full","h-screen","flex","justify-center"],[1,"h-full","flex","justify-center","items-center",2,"width","600px"],[1,"flex","flex-col","gap-3","w-full"],[1,"text-center","text-4xl"],[1,"text-center"],["type","email","placeholder","Email Address","required","",1,"py-2","px-4","border","rounded"],["passwordResetEmail",""],[3,"click"],["routerLink","/sign-in"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),f._uU(4,"Reset Password"),f.qZA(),f.TgZ(5,"p",4),f._uU(6," Please enter your email address to request a password reset. "),f.qZA(),f._UZ(7,"input",5,6),f.TgZ(9,"app-button",7),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(8);return r.authService.ForgotPassword(l.value)}),f._uU(10," Reset password "),f.qZA(),f.TgZ(11,"app-button",8),f._uU(12,"Go to Sign in"),f.qZA()()()()}},directives:[ig,Lh],styles:[""]}),n})(),O3=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vl))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-in"]],decls:14,vars:0,consts:[[1,"h-screen","flex","justify-center","items-center","mx-auto",2,"width","600px"],[1,"flex","flex-col","gap-3","w-full"],["type","text","placeholder","Email","required","",1,"py-2","px-4","border","rounded"],["userName",""],["type","password","placeholder","Password","required","",1,"py-2","px-4","border","rounded"],["userPassword",""],[3,"click"],["routerLink","/forgot-password"],["routerLink","/register-user"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"input",2,3)(4,"input",4,5),f.TgZ(6,"app-button",6),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(3),h=f.MAs(5);return r.authService.SignIn(l.value,h.value)}),f._uU(7," Log in "),f.qZA(),f.TgZ(8,"app-button",6),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._uU(9," Log in with Google "),f.qZA(),f.TgZ(10,"app-button",7),f._uU(11,"Forgot Password?"),f.qZA(),f.TgZ(12,"app-button",8),f._uU(13," Go to Sign Up "),f.qZA()()()}},directives:[ig,Lh],styles:[""]}),n})(),F3=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vl))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-up"]],decls:12,vars:0,consts:[[1,"h-screen","flex","justify-center","items-center","mx-auto",2,"width","600px"],[1,"flex","flex-col","gap-3","w-full"],["type","email","placeholder","Email","required","",1,"py-2","px-4","border","rounded"],["userEmail",""],["type","password","placeholder","Password","required","",1,"py-2","px-4","border","rounded"],["userPwd",""],[3,"click"],["routerLink","/sign-in"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"input",2,3)(4,"input",4,5),f.TgZ(6,"app-button",6),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(3),h=f.MAs(5);return r.authService.SignUp(l.value,h.value)}),f._uU(7," Sign Up "),f.qZA(),f.TgZ(8,"app-button",6),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._uU(9," Continue with Google "),f.qZA(),f.TgZ(10,"app-button",7),f._uU(11,"Go to Sign In"),f.qZA()()()}},directives:[ig,Lh],styles:[""]}),n})();function L3(n,e){if(1&n&&(f.TgZ(0,"div",7)(1,"p",8),f._uU(2," We have sent a confirmation email to "),f.TgZ(3,"strong"),f._uU(4),f.qZA(),f._uU(5,". "),f.qZA(),f.TgZ(6,"p",8),f._uU(7," Please check your email and click on the link to verfiy your email address. "),f.qZA()()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}let V3=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vl))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:10,vars:1,consts:[[1,"w-full","h-screen","flex","justify-center"],[1,"h-full","flex","justify-center","items-center",2,"width","600px"],[1,"flex","flex-col","gap-3","w-full"],[1,"text-center","text-4xl"],["class","my-10",4,"ngIf"],[3,"click"],["routerLink","../"],[1,"my-10"],[1,"text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),f._uU(4,"Thank You for Registering"),f.qZA(),f.YNc(5,L3,8,1,"div",4),f.TgZ(6,"app-button",5),f.NdJ("click",function(){return r.authService.SendVerificationMail()}),f._uU(7," Resend Verification Email "),f.qZA(),f.TgZ(8,"app-button",6),f._uU(9,"Go back"),f.qZA()()()()),2&t&&(f.xp6(5),f.Q6J("ngIf",r.authService.userData))},directives:[dr,ig,Lh],styles:[""]}),n})(),U3=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vl))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:4,vars:0,consts:[[1,"flex","flex-col","h-screen","flex-column","justify-center","items-center"],[1,"text-4xl","my-5"],["src","./assets/13233937_5178220.jpg","alt","people-with-big-question-mark",2,"width","400px"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1",1),f._uU(2,"QUESTION GENERATOR"),f.qZA(),f._UZ(3,"img",2),f.qZA())},styles:[""]}),n})(),bF=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vl),f.LFG(gs))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const B3=[{path:"",component:U3},{path:"sign-in",component:O3},{path:"register-user",component:F3},{path:"dashboard",component:k3,canActivate:[bF]},{path:"forgot-password",component:P3},{path:"verify-email-address",component:V3},{path:"articles",component:R3,canActivate:[bF]}];let j3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[JN.forRoot(B3)],JN]}),n})(),H3=(()=>{class n{constructor(){this.isTextBig=!1}toggleTextSize(){this.isTextBig?(document.body.style.fontSize="16px",this.isTextBig=!1):(document.body.style.fontSize="20px",this.isTextBig=!0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $3(n,e){1&n&&(f.TgZ(0,"app-button",9),f._uU(1," Sign In "),f.qZA())}function G3(n,e){1&n&&(f.TgZ(0,"div",10),f._UZ(1,"app-user-image",11),f.qZA()),2&n&&(f.xp6(1),f.Q6J("size",40))}let W3=(()=>{class n extends BD{constructor(t,r,i,a){super(),this.authService=t,this.contrastService=r,this.textSizeService=i,this.router=a,this.navRoutes=["","articles"],this.navLabels=["Home","Generate"],this.inverted=!1}ngOnInit(){this.subs.sink=this.contrastService.contrast$.subscribe(t=>{this.inverted=t})}goToArticles(){this.authService.isLoggedIn&&this.router.navigate(["articles"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vl),f.Y36(KR),f.Y36(H3),f.Y36(gs))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-navbar"]],features:[f.qOj],decls:11,vars:5,consts:[[1,"p-4","flex"],[1,"flex","gap-1"],["routerLink",""],[3,"disabled","click"],[1,"grow","flex","justify-end","items-center","gap-3"],["src","assets/text-size-icon.png","alt","text-size-icon","width","45",1,"contrast-icon",3,"click"],["src","assets/contrast-icon.png","alt","contrast-icon","width","45",1,"contrast-icon",3,"click"],["routerLink","/sign-in",4,"ngIf"],["routerLink","/dashboard",4,"ngIf"],["routerLink","/sign-in"],["routerLink","/dashboard"],[1,"cursor-pointer",3,"size"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"app-button",2),f._uU(3,"Home"),f.qZA(),f.TgZ(4,"app-button",3),f.NdJ("click",function(){return r.goToArticles()}),f._uU(5," Generate "),f.qZA()(),f.TgZ(6,"div",4)(7,"img",5),f.NdJ("click",function(){return r.textSizeService.toggleTextSize()}),f.qZA(),f.TgZ(8,"img",6),f.NdJ("click",function(){return r.contrastService.toggleContrast()}),f.qZA(),f.YNc(9,$3,2,0,"app-button",7),f.YNc(10,G3,2,1,"div",8),f.qZA()()),2&t&&(f.xp6(4),f.Q6J("disabled",!r.authService.isLoggedIn),f.xp6(3),f.uIk("class",r.inverted?"inverted":""),f.xp6(1),f.uIk("class",r.inverted?"inverted":""),f.xp6(1),f.Q6J("ngIf",!r.authService.isLoggedIn),f.xp6(1),f.Q6J("ngIf",r.authService.isLoggedIn))},directives:[ig,Lh,dr,IF],styles:[".contrast-icon[_ngcontent-%COMP%]{position:relative;top:2px}.inverted[_ngcontent-%COMP%]{filter:invert(100%)}"]}),n})(),q3=(()=>{class n{constructor(){this.title="client"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&f._UZ(0,"app-navbar")(1,"router-outlet")},directives:[W3,VA],styles:[""]}),n})(),z3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[q3]}),n.\u0275inj=f.cJS({providers:[vl],imports:[[Nl,j3,m3,mU,Nn.hO.initializeApp(tk_firebase),MF,UF,mG,TH]]}),n})();(0,f.G48)(),rd().bootstrapModule(z3).catch(n=>console.error(n))},4327:function(it,Ce){var W;void 0!==(W=function(){"use strict";function se(G,$,ee){var xe=new XMLHttpRequest;xe.open("GET",G),xe.responseType="blob",xe.onload=function(){_e(xe.response,$,ee)},xe.onerror=function(){console.error("could not download file")},xe.send()}function ue(G){var $=new XMLHttpRequest;$.open("HEAD",G,!1);try{$.send()}catch(ee){}return 200<=$.status&&299>=$.status}function ge(G){try{G.dispatchEvent(new MouseEvent("click"))}catch(ee){var $=document.createEvent("MouseEvents");$.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),G.dispatchEvent($)}}var he="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,ae=he.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_e=he.saveAs||("object"!=typeof window||window!==he?function(){}:"download"in HTMLAnchorElement.prototype&&!ae?function(G,$,ee){var xe=he.URL||he.webkitURL,Ie=document.createElement("a");Ie.download=$=$||G.name||"download",Ie.rel="noopener","string"==typeof G?(Ie.href=G,Ie.origin===location.origin?ge(Ie):ue(Ie.href)?se(G,$,ee):ge(Ie,Ie.target="_blank")):(Ie.href=xe.createObjectURL(G),setTimeout(function(){xe.revokeObjectURL(Ie.href)},4e4),setTimeout(function(){ge(Ie)},0))}:"msSaveOrOpenBlob"in navigator?function(G,$,ee){if($=$||G.name||"download","string"!=typeof G)navigator.msSaveOrOpenBlob(function P(G,$){return void 0===$?$={autoBom:!1}:"object"!=typeof $&&(console.warn("Deprecated: Expected third argument to be a object"),$={autoBom:!$}),$.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(G.type)?new Blob(["\ufeff",G],{type:G.type}):G}(G,ee),$);else if(ue(G))se(G,$,ee);else{var xe=document.createElement("a");xe.href=G,xe.target="_blank",setTimeout(function(){ge(xe)})}}:function(G,$,ee,xe){if((xe=xe||open("","_blank"))&&(xe.document.title=xe.document.body.innerText="downloading..."),"string"==typeof G)return se(G,$,ee);var Ie="application/octet-stream"===G.type,Ve=/constructor/i.test(he.HTMLElement)||he.safari,je=/CriOS\/[\d]+/.test(navigator.userAgent);if((je||Ie&&Ve||ae)&&"undefined"!=typeof FileReader){var me=new FileReader;me.onloadend=function(){var He=me.result;He=je?He:He.replace(/^data:[^;]*;/,"data:attachment/file;"),xe?xe.location.href=He:location=He,xe=null},me.readAsDataURL(G)}else{var De=he.URL||he.webkitURL,We=De.createObjectURL(G);xe?xe.location=We:location.href=We,xe=null,setTimeout(function(){De.revokeObjectURL(We)},4e4)}});he.saveAs=_e.saveAs=_e,it.exports=_e}.apply(Ce,[]))&&(it.exports=W)},5867:(it,Ce,V)=>{"use strict";V.d(Ce,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=V(9681);(0,f.registerVersion)("firebase","9.14.0","app")},127:(it,Ce,V)=>{"use strict";V.d(Ce,{Z:()=>f.Z});var f=V(3942);f.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(it,Ce,V)=>{"use strict";V.r(Ce);var f=V(5861),W=V(3942),P=V(8247),se=V(2090),he=(V(9681),V(1877),V(4859));function ae(){return window}function $(){return($=(0,f.Z)(function*(H,k,B){var le;const{BuildInfo:Le}=ae();(0,P.ap)(k.sessionId,"AuthEvent did not contain a session ID");const nt=yield De(k.sessionId),ft={};return(0,P.aq)()?ft.ibi=Le.packageName:(0,P.ar)()?ft.apn=Le.packageName:(0,P.as)(H,"operation-not-supported-in-this-environment"),Le.displayName&&(ft.appDisplayName=Le.displayName),ft.sessionId=nt,(0,P.at)(H,B,k.type,void 0,null!==(le=k.eventId)&&void 0!==le?le:void 0,ft)})).apply(this,arguments)}function xe(){return(xe=(0,f.Z)(function*(H){const{BuildInfo:k}=ae(),B={};(0,P.aq)()?B.iosBundleId=k.packageName:(0,P.ar)()?B.androidPackageName=k.packageName:(0,P.as)(H,"operation-not-supported-in-this-environment"),yield(0,P.au)(H,B)})).apply(this,arguments)}function je(){return(je=(0,f.Z)(function*(H,k,B){const{cordova:le}=ae();let Le=()=>{};try{yield new Promise((nt,ft)=>{let Mt=null;function ot(){var Bt;nt();const Kr=null===(Bt=le.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof Kr&&Kr(),"function"==typeof(null==B?void 0:B.close)&&B.close()}function dn(){Mt||(Mt=window.setTimeout(()=>{ft((0,P.aw)(H,"redirect-cancelled-by-user"))},2e3))}function cr(){"visible"===(null==document?void 0:document.visibilityState)&&dn()}k.addPassiveListener(ot),document.addEventListener("resume",dn,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",cr,!1),Le=()=>{k.removePassiveListener(ot),document.removeEventListener("resume",dn,!1),document.removeEventListener("visibilitychange",cr,!1),Mt&&window.clearTimeout(Mt)}})}finally{Le()}})).apply(this,arguments)}function De(H){return We.apply(this,arguments)}function We(){return(We=(0,f.Z)(function*(H){const k=He(H),B=yield crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(B)).map(Le=>Le.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function He(H){if((0,P.ap)(/[0-9a-zA-Z]+/.test(H),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(H);const k=new ArrayBuffer(H.length),B=new Uint8Array(k);for(let le=0;le<H.length;le++)B[le]=H.charCodeAt(le);return B}class Re extends P.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(k=>{this.resolveInialized=k})}addPassiveListener(k){this.passiveListeners.add(k)}removePassiveListener(k){this.passiveListeners.delete(k)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(k){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(k)),super.onEvent(k)}initialized(){var k=this;return(0,f.Z)(function*(){yield k.initPromise})()}}function ie(H){return ye.apply(this,arguments)}function ye(){return(ye=(0,f.Z)(function*(H){const k=yield re()._get(oe(H));return k&&(yield re()._remove(oe(H))),k})).apply(this,arguments)}function J(){const H=[],k="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const le=Math.floor(Math.random()*k.length);H.push(k.charAt(le))}return H.join("")}function re(){return(0,P.az)(P.b)}function oe(H){return(0,P.aA)("authEvent",H.config.apiKey,H.name)}function Ue(H){if(!(null==H?void 0:H.includes("?")))return{};const[k,...B]=H.split("?");return(0,se.zd)(B.join("?"))}function Ye(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Ht(){var H;return(null===(H=null==self?void 0:self.location)||void 0===H?void 0:H.protocol)||null}function Mn(H=(0,se.z$)()){return!("file:"!==Ht()&&"ionic:"!==Ht()&&"capacitor:"!==Ht()||!H.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ti(){try{const H=self.localStorage,k=P.aI();if(H)return H.setItem(k,"1"),H.removeItem(k),!function Yi(H=(0,se.z$)()){return function ui(){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ln(H=(0,se.z$)()){return/Edge\/\d+/.test(H)}(H)}()||(0,se.hl)()}catch(H){return Si()&&(0,se.hl)()}return!1}function Si(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function Yt(){return"http:"===Ht()||"https:"===Ht()}()||(0,se.ru)()||Mn())&&!function ei(){return(0,se.b$)()||(0,se.UG)()}()&&Ti()&&!Si()}function Qi(){return Mn()&&"undefined"!=typeof document}function Mr(){return(Mr=(0,f.Z)(function*(){return!!Qi()&&new Promise(H=>{const k=setTimeout(()=>{H(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(k),H(!0)})})})).apply(this,arguments)}const gn={LOCAL:"local",NONE:"none",SESSION:"session"},Nr=P.ax,Wr="persistence";function Sn(H){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(H){yield H._initializationPromise;const k=Kt(),B=P.aA(Wr,H.config.apiKey,H.name);k&&k.setItem(B,H._getPersistence())})).apply(this,arguments)}function Kt(){var H;try{return(null===(H=function bn(){return"undefined"!=typeof window?window:null}())||void 0===H?void 0:H.sessionStorage)||null}catch(k){return null}}const mt=P.ax;class st{constructor(){this.browserResolver=P.az(P.k),this.cordovaResolver=P.az(class tn{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(k){var B=this;return(0,f.Z)(function*(){const le=k._key();let Le=B.eventManagers.get(le);return Le||(Le=new Re(k),B.eventManagers.set(le,Le),B.attachCallbackListeners(k,Le)),Le})()}_openPopup(k){(0,P.as)(k,"operation-not-supported-in-this-environment")}_openRedirect(k,B,le,Le){var nt=this;return(0,f.Z)(function*(){!function me(H){var k,B,le,Le,nt,ft,Mt,ot,dn,cr;const Bt=ae();(0,P.ax)("function"==typeof(null===(k=null==Bt?void 0:Bt.universalLinks)||void 0===k?void 0:k.subscribe),H,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(void 0!==(null===(B=null==Bt?void 0:Bt.BuildInfo)||void 0===B?void 0:B.packageName),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(nt=null===(Le=null===(le=null==Bt?void 0:Bt.cordova)||void 0===le?void 0:le.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===nt?void 0:nt.openUrl),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(ot=null===(Mt=null===(ft=null==Bt?void 0:Bt.cordova)||void 0===ft?void 0:ft.plugins)||void 0===Mt?void 0:Mt.browsertab)||void 0===ot?void 0:ot.isAvailable),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(cr=null===(dn=null==Bt?void 0:Bt.cordova)||void 0===dn?void 0:dn.InAppBrowser)||void 0===cr?void 0:cr.open),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(k);const ft=yield nt._initialize(k);yield ft.initialized(),ft.resetRedirect(),(0,P.aD)(),yield nt._originValidation(k);const Mt=function Se(H,k,B=null){return{type:k,eventId:B,urlResponse:null,sessionId:J(),postBody:null,tenantId:H.tenantId,error:(0,P.aw)(H,"no-auth-event")}}(k,le,Le);yield function qe(H,k){return re()._set(oe(H),k)}(k,Mt);const ot=yield function G(H,k,B){return $.apply(this,arguments)}(k,Mt,B),dn=yield function Ie(H){const{cordova:k}=ae();return new Promise(B=>{k.plugins.browsertab.isAvailable(le=>{let Le=null;le?k.plugins.browsertab.openUrl(H):Le=k.InAppBrowser.open(H,(0,P.av)()?"_blank":"_system","location=yes"),B(Le)})})}(ot);return function Ve(H,k,B){return je.apply(this,arguments)}(k,ft,dn)})()}_isIframeWebStorageSupported(k,B){throw new Error("Method not implemented.")}_originValidation(k){const B=k._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function ee(H){return xe.apply(this,arguments)}(k)),this.originValidationPromises[B]}attachCallbackListeners(k,B){const{universalLinks:le,handleOpenURL:Le,BuildInfo:nt}=ae(),ft=setTimeout((0,f.Z)(function*(){yield ie(k),B.onEvent(Ye())}),500),Mt=function(){var cr=(0,f.Z)(function*(Bt){clearTimeout(ft);const Kr=yield ie(k);let Ji=null;Kr&&(null==Bt?void 0:Bt.url)&&(Ji=function be(H,k){var B,le;const Le=function de(H){const k=Ue(H),B=k.link?decodeURIComponent(k.link):void 0,le=Ue(B).link,Le=k.deep_link_id?decodeURIComponent(k.deep_link_id):void 0;return Ue(Le).link||Le||le||B||H}(k);if(Le.includes("/__/auth/callback")){const nt=Ue(Le),ft=nt.firebaseError?function we(H){try{return JSON.parse(H)}catch(k){return null}}(decodeURIComponent(nt.firebaseError)):null,Mt=null===(le=null===(B=null==ft?void 0:ft.code)||void 0===B?void 0:B.split("auth/"))||void 0===le?void 0:le[1],ot=Mt?(0,P.aw)(Mt):null;return ot?{type:H.type,eventId:H.eventId,tenantId:H.tenantId,error:ot,urlResponse:null,sessionId:null,postBody:null}:{type:H.type,eventId:H.eventId,tenantId:H.tenantId,sessionId:H.sessionId,urlResponse:Le,postBody:null}}return null}(Kr,Bt.url)),B.onEvent(Ji||Ye())});return function(Kr){return cr.apply(this,arguments)}}();void 0!==le&&"function"==typeof le.subscribe&&le.subscribe(null,Mt);const ot=Le,dn=`${nt.packageName.toLowerCase()}://`;ae().handleOpenURL=function(){var cr=(0,f.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(dn)&&Mt({url:Bt}),"function"==typeof ot)try{ot(Bt)}catch(Kr){console.error(Kr)}});return function(Bt){return cr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(k){var B=this;return(0,f.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(k)})()}_openPopup(k,B,le,Le){var nt=this;return(0,f.Z)(function*(){return yield nt.selectUnderlyingResolver(),nt.assertedUnderlyingResolver._openPopup(k,B,le,Le)})()}_openRedirect(k,B,le,Le){var nt=this;return(0,f.Z)(function*(){return yield nt.selectUnderlyingResolver(),nt.assertedUnderlyingResolver._openRedirect(k,B,le,Le)})()}_isIframeWebStorageSupported(k,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(k,B)}_originValidation(k){return this.assertedUnderlyingResolver._originValidation(k)}get _shouldInitProactively(){return Qi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var k=this;return(0,f.Z)(function*(){if(k.underlyingResolver)return;const B=yield function vt(){return Mr.apply(this,arguments)}();k.underlyingResolver=B?k.cordovaResolver:k.browserResolver})()}}function Ai(H){return H.unwrap()}function Zt(H){return jn(H)}function jn(H){const{_tokenResponse:k}=H instanceof se.ZR?H.customData:H;if(!k)return null;if(!(H instanceof se.ZR)&&"temporaryProof"in k&&"phoneNumber"in k)return P.P.credentialFromResult(H);const B=k.providerId;if(!B||B===P.o.PASSWORD)return null;let le;switch(B){case P.o.GOOGLE:le=P.Q;break;case P.o.FACEBOOK:le=P.N;break;case P.o.GITHUB:le=P.T;break;case P.o.TWITTER:le=P.W;break;default:const{oauthIdToken:Le,oauthAccessToken:nt,oauthTokenSecret:ft,pendingToken:Mt,nonce:ot}=k;return nt||ft||Le||Mt?Mt?B.startsWith("saml.")?P.aL._create(B,Mt):P.J._fromParams({providerId:B,signInMethod:B,pendingToken:Mt,idToken:Le,accessToken:nt}):new P.U(B).credential({idToken:Le,accessToken:nt,rawNonce:ot}):null}return H instanceof se.ZR?le.credentialFromError(H):le.credentialFromResult(H)}function _n(H,k){return k.catch(B=>{throw B instanceof se.ZR&&function ji(H,k){var B,le;const Le=null===(B=k.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===(null===(le=k)||void 0===le?void 0:le.code))k.resolver=new Gt(H,P.an(H,k));else if(Le){const nt=jn(k),ft=k;nt&&(ft.credential=nt,ft.tenantId=Le.tenantId||void 0,ft.email=Le.email||void 0,ft.phoneNumber=Le.phoneNumber||void 0)}}(H,B),B}).then(B=>{const Le=B.user;return{operationType:B.operationType,credential:Zt(B),additionalUserInfo:P.al(B),user:tr.getOrCreate(Le)}})}function yt(H,k){return li.apply(this,arguments)}function li(){return(li=(0,f.Z)(function*(H,k){const B=yield k;return{verificationId:B.verificationId,confirm:le=>_n(H,B.confirm(le))}})).apply(this,arguments)}class Gt{constructor(k,B){this.resolver=B,this.auth=function zr(H){return H.wrapped()}(k)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(k){return _n(Ai(this.auth),this.resolver.resolveSignIn(k))}}class tr{constructor(k){this._delegate=k,this.multiFactor=P.ao(k)}static getOrCreate(k){return tr.USER_MAP.has(k)||tr.USER_MAP.set(k,new tr(k)),tr.USER_MAP.get(k)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(k){return this._delegate.getIdTokenResult(k)}getIdToken(k){return this._delegate.getIdToken(k)}linkAndRetrieveDataWithCredential(k){return this.linkWithCredential(k)}linkWithCredential(k){var B=this;return(0,f.Z)(function*(){return _n(B.auth,P.Z(B._delegate,k))})()}linkWithPhoneNumber(k,B){var le=this;return(0,f.Z)(function*(){return yt(le.auth,P.l(le._delegate,k,B))})()}linkWithPopup(k){var B=this;return(0,f.Z)(function*(){return _n(B.auth,P.d(B._delegate,k,st))})()}linkWithRedirect(k){var B=this;return(0,f.Z)(function*(){return yield Sn(P.aE(B.auth)),P.g(B._delegate,k,st)})()}reauthenticateAndRetrieveDataWithCredential(k){return this.reauthenticateWithCredential(k)}reauthenticateWithCredential(k){var B=this;return(0,f.Z)(function*(){return _n(B.auth,P._(B._delegate,k))})()}reauthenticateWithPhoneNumber(k,B){return yt(this.auth,P.r(this._delegate,k,B))}reauthenticateWithPopup(k){return _n(this.auth,P.e(this._delegate,k,st))}reauthenticateWithRedirect(k){var B=this;return(0,f.Z)(function*(){return yield Sn(P.aE(B.auth)),P.h(B._delegate,k,st)})()}sendEmailVerification(k){return P.ab(this._delegate,k)}unlink(k){var B=this;return(0,f.Z)(function*(){return yield P.ak(B._delegate,k),B})()}updateEmail(k){return P.ag(this._delegate,k)}updatePassword(k){return P.ah(this._delegate,k)}updatePhoneNumber(k){return P.u(this._delegate,k)}updateProfile(k){return P.af(this._delegate,k)}verifyBeforeUpdateEmail(k,B){return P.ac(this._delegate,k,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}tr.USER_MAP=new WeakMap;const et=P.ax;let Ae=(()=>{class H{constructor(B,le){if(this.app=B,le.isInitialized())return this._delegate=le.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Le}=B.options;et(Le,"invalid-api-key",{appName:B.name}),et(Le,"invalid-api-key",{appName:B.name});const nt="undefined"!=typeof window?st:void 0;this._delegate=le.initialize({options:{persistence:Dt(Le,B.name),popupRedirectResolver:nt}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?tr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,le){P.G(this._delegate,B,le)}applyActionCode(B){return P.a2(this._delegate,B)}checkActionCode(B){return P.a3(this._delegate,B)}confirmPasswordReset(B,le){return P.a1(this._delegate,B,le)}createUserWithEmailAndPassword(B,le){var Le=this;return(0,f.Z)(function*(){return _n(Le._delegate,P.a5(Le._delegate,B,le))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return P.aa(this._delegate,B)}isSignInWithEmailLink(B){return P.a8(this._delegate,B)}getRedirectResult(){var B=this;return(0,f.Z)(function*(){et(Bn(),B._delegate,"operation-not-supported-in-this-environment");const le=yield P.j(B._delegate,st);return le?_n(B._delegate,Promise.resolve(le)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function fn(H,k){(0,P.aE)(H)._logFramework(k)}(this._delegate,B)}onAuthStateChanged(B,le,Le){const{next:nt,error:ft,complete:Mt}=Ke(B,le,Le);return this._delegate.onAuthStateChanged(nt,ft,Mt)}onIdTokenChanged(B,le,Le){const{next:nt,error:ft,complete:Mt}=Ke(B,le,Le);return this._delegate.onIdTokenChanged(nt,ft,Mt)}sendSignInLinkToEmail(B,le){return P.a7(this._delegate,B,le)}sendPasswordResetEmail(B,le){return P.a0(this._delegate,B,le||void 0)}setPersistence(B){var le=this;return(0,f.Z)(function*(){let Le;switch(function qr(H,k){Nr(Object.values(gn).includes(k),H,"invalid-persistence-type"),(0,se.b$)()?Nr(k!==gn.SESSION,H,"unsupported-persistence-type"):(0,se.UG)()?Nr(k===gn.NONE,H,"unsupported-persistence-type"):Si()?Nr(k===gn.NONE||k===gn.LOCAL&&(0,se.hl)(),H,"unsupported-persistence-type"):Nr(k===gn.NONE||Ti(),H,"unsupported-persistence-type")}(le._delegate,B),B){case gn.SESSION:Le=P.a;break;case gn.LOCAL:Le=(yield P.az(P.i)._isAvailable())?P.i:P.b;break;case gn.NONE:Le=P.L;break;default:return P.as("argument-error",{appName:le._delegate.name})}return le._delegate.setPersistence(Le)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return _n(this._delegate,P.X(this._delegate))}signInWithCredential(B){return _n(this._delegate,P.Y(this._delegate,B))}signInWithCustomToken(B){return _n(this._delegate,P.$(this._delegate,B))}signInWithEmailAndPassword(B,le){return _n(this._delegate,P.a6(this._delegate,B,le))}signInWithEmailLink(B,le){return _n(this._delegate,P.a9(this._delegate,B,le))}signInWithPhoneNumber(B,le){return yt(this._delegate,P.s(this._delegate,B,le))}signInWithPopup(B){var le=this;return(0,f.Z)(function*(){return et(Bn(),le._delegate,"operation-not-supported-in-this-environment"),_n(le._delegate,P.c(le._delegate,B,st))})()}signInWithRedirect(B){var le=this;return(0,f.Z)(function*(){return et(Bn(),le._delegate,"operation-not-supported-in-this-environment"),yield Sn(le._delegate),P.f(le._delegate,B,st)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return P.a4(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return H.Persistence=gn,H})();function Ke(H,k,B){let le=H;"function"!=typeof H&&({next:le,error:k,complete:B}=H);const Le=le;return{next:ft=>Le(ft&&tr.getOrCreate(ft)),error:k,complete:B}}function Dt(H,k){const B=function vs(H,k){const B=Kt();if(!B)return[];const le=P.aA(Wr,H,k);switch(B.getItem(le)){case gn.NONE:return[P.L];case gn.LOCAL:return[P.i,P.a];case gn.SESSION:return[P.a];default:return[]}}(H,k);if("undefined"!=typeof self&&!B.includes(P.i)&&B.push(P.i),"undefined"!=typeof window)for(const le of[P.b,P.a])B.includes(le)||B.push(le);return B.includes(P.L)||B.push(P.L),B}class It{constructor(){this.providerId="phone",this._delegate=new P.P(Ai(W.Z.auth()))}static credential(k,B){return P.P.credential(k,B)}verifyPhoneNumber(k,B){return this._delegate.verifyPhoneNumber(k,B)}unwrap(){return this._delegate}}It.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,It.PROVIDER_ID=P.P.PROVIDER_ID;const rn=P.ax;class K{constructor(k,B,le=W.Z.app()){var Le;rn(null===(Le=le.options)||void 0===Le?void 0:Le.apiKey,"invalid-api-key",{appName:le.name}),this._delegate=new P.R(k,B,le.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Q(H){H.INTERNAL.registerComponent(new he.wA("auth-compat",k=>{const B=k.getProvider("app-compat").getImmediate(),le=k.getProvider("auth");return new Ae(B,le)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:It,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:K,TwitterAuthProvider:P.W,Auth:Ae,AuthCredential:P.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion("@firebase/auth-compat","0.2.24")}(W.Z)},8306:(it,Ce,V)=>{"use strict";V.d(Ce,{y:()=>G});var f=V(930),W=V(727),P=V(8822),se=V(4671);var he=V(2416),ae=V(576),_e=V(2806);let G=(()=>{class Ie{constructor(je){je&&(this._subscribe=je)}lift(je){const me=new Ie;return me.source=this,me.operator=je,me}subscribe(je,me,De){const We=function xe(Ie){return Ie&&Ie instanceof f.Lv||function ee(Ie){return Ie&&(0,ae.m)(Ie.next)&&(0,ae.m)(Ie.error)&&(0,ae.m)(Ie.complete)}(Ie)&&(0,W.Nn)(Ie)}(je)?je:new f.Hp(je,me,De);return(0,_e.x)(()=>{const{operator:He,source:Oe}=this;We.add(He?He.call(We,Oe):Oe?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(je){try{return this._subscribe(je)}catch(me){je.error(me)}}forEach(je,me){return new(me=$(me))((De,We)=>{const He=new f.Hp({next:Oe=>{try{je(Oe)}catch(Re){We(Re),He.unsubscribe()}},error:We,complete:De});this.subscribe(He)})}_subscribe(je){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(je)}[P.L](){return this}pipe(...je){return function ge(Ie){return 0===Ie.length?se.y:1===Ie.length?Ie[0]:function(je){return Ie.reduce((me,De)=>De(me),je)}}(je)(this)}toPromise(je){return new(je=$(je))((me,De)=>{let We;this.subscribe(He=>We=He,He=>De(He),()=>me(We))})}}return Ie.create=Ve=>new Ie(Ve),Ie})();function $(Ie){var Ve;return null!==(Ve=null!=Ie?Ie:he.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(it,Ce,V)=>{"use strict";V.d(Ce,{x:()=>he});var f=V(8306),W=V(727);const se=(0,V(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=V(8737),ge=V(2806);let he=(()=>{class _e extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const ee=new ae(this,this);return ee.operator=$,ee}_throwIfClosed(){if(this.closed)throw new se}next($){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next($)}})}error($){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:ee}=this;for(;ee.length;)ee.shift().error($)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:ee,isStopped:xe,observers:Ie}=this;return ee||xe?W.Lc:(this.currentObservers=null,Ie.push($),new W.w0(()=>{this.currentObservers=null,(0,ue.P)(Ie,$)}))}_checkFinalizedStatuses($){const{hasError:ee,thrownError:xe,isStopped:Ie}=this;ee?$.error(xe):Ie&&$.complete()}asObservable(){const $=new f.y;return $.source=this,$}}return _e.create=(G,$)=>new ae(G,$),_e})();class ae extends he{constructor(G,$){super(),this.destination=G,this.source=$}next(G){var $,ee;null===(ee=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===ee||ee.call($,G)}error(G){var $,ee;null===(ee=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===ee||ee.call($,G)}complete(){var G,$;null===($=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===$||$.call(G)}_subscribe(G){var $,ee;return null!==(ee=null===($=this.source)||void 0===$?void 0:$.subscribe(G))&&void 0!==ee?ee:W.Lc}}},930:(it,Ce,V)=>{"use strict";V.d(Ce,{Hp:()=>je,Lv:()=>ee});var f=V(576),W=V(727),P=V(2416),se=V(7849),ue=V(5032);const ge=_e("C",void 0,void 0);function _e(Oe,Re,Se){return{kind:Oe,value:Re,error:Se}}var G=V(3410),$=V(2806);class ee extends W.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,W.Nn)(Re)&&Re.add(this)):this.destination=He}static create(Re,Se,qe){return new je(Re,Se,qe)}next(Re){this.isStopped?We(function ae(Oe){return _e("N",Oe,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?We(function he(Oe){return _e("E",void 0,Oe)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?We(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xe=Function.prototype.bind;function Ie(Oe,Re){return xe.call(Oe,Re)}class Ve{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Re)}catch(qe){me(qe)}}error(Re){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Re)}catch(qe){me(qe)}else me(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Se){me(Se)}}}class je extends ee{constructor(Re,Se,qe){let ie;if(super(),(0,f.m)(Re)||!Re)ie={next:null!=Re?Re:void 0,error:null!=Se?Se:void 0,complete:null!=qe?qe:void 0};else{let ye;this&&P.v.useDeprecatedNextContext?(ye=Object.create(Re),ye.unsubscribe=()=>this.unsubscribe(),ie={next:Re.next&&Ie(Re.next,ye),error:Re.error&&Ie(Re.error,ye),complete:Re.complete&&Ie(Re.complete,ye)}):ie=Re}this.destination=new Ve(ie)}}function me(Oe){P.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Oe):(0,se.h)(Oe)}function We(Oe,Re){const{onStoppedNotification:Se}=P.v;Se&&G.z.setTimeout(()=>Se(Oe,Re))}const He={closed:!0,next:ue.Z,error:function De(Oe){throw Oe},complete:ue.Z}},727:(it,Ce,V)=>{"use strict";V.d(Ce,{Lc:()=>ge,w0:()=>ue,Nn:()=>he});var f=V(576);const P=(0,V(3888).d)(_e=>function($){_e(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((ee,xe)=>`${xe+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var se=V(8737);class ue{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ie of $)Ie.remove(this);else $.remove(this);const{initialTeardown:ee}=this;if((0,f.m)(ee))try{ee()}catch(Ie){G=Ie instanceof P?Ie.errors:[Ie]}const{_finalizers:xe}=this;if(xe){this._finalizers=null;for(const Ie of xe)try{ae(Ie)}catch(Ve){G=null!=G?G:[],Ve instanceof P?G=[...G,...Ve.errors]:G.push(Ve)}}if(G)throw new P(G)}}add(G){var $;if(G&&G!==this)if(this.closed)ae(G);else{if(G instanceof ue){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(G)}}_hasParent(G){const{_parentage:$}=this;return $===G||Array.isArray($)&&$.includes(G)}_addParent(G){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(G),$):$?[$,G]:G}_removeParent(G){const{_parentage:$}=this;$===G?this._parentage=null:Array.isArray($)&&(0,se.P)($,G)}remove(G){const{_finalizers:$}=this;$&&(0,se.P)($,G),G instanceof ue&&G._removeParent(this)}}ue.EMPTY=(()=>{const _e=new ue;return _e.closed=!0,_e})();const ge=ue.EMPTY;function he(_e){return _e instanceof ue||_e&&"closed"in _e&&(0,f.m)(_e.remove)&&(0,f.m)(_e.add)&&(0,f.m)(_e.unsubscribe)}function ae(_e){(0,f.m)(_e)?_e():_e.unsubscribe()}},2416:(it,Ce,V)=>{"use strict";V.d(Ce,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Ce,V)=>{"use strict";V.d(Ce,{E:()=>W});const W=new(V(8306).y)(ue=>ue.complete())},8996:(it,Ce,V)=>{"use strict";V.d(Ce,{D:()=>Re});var f=V(8421),W=V(5363),P=V(9468),ge=V(8306),ae=V(2202),_e=V(576),G=V(9672);function ee(Se,qe){if(!Se)throw new Error("Iterable cannot be null");return new ge.y(ie=>{(0,G.f)(ie,qe,()=>{const ye=Se[Symbol.asyncIterator]();(0,G.f)(ie,qe,()=>{ye.next().then(be=>{be.done?ie.complete():ie.next(be.value)})},0,!0)})})}var xe=V(3670),Ie=V(8239),Ve=V(1144),je=V(6495),me=V(2206),De=V(4532),We=V(3260);function Re(Se,qe){return qe?function Oe(Se,qe){if(null!=Se){if((0,xe.c)(Se))return function se(Se,qe){return(0,f.Xf)(Se).pipe((0,P.R)(qe),(0,W.Q)(qe))}(Se,qe);if((0,Ve.z)(Se))return function he(Se,qe){return new ge.y(ie=>{let ye=0;return qe.schedule(function(){ye===Se.length?ie.complete():(ie.next(Se[ye++]),ie.closed||this.schedule())})})}(Se,qe);if((0,Ie.t)(Se))return function ue(Se,qe){return(0,f.Xf)(Se).pipe((0,P.R)(qe),(0,W.Q)(qe))}(Se,qe);if((0,me.D)(Se))return ee(Se,qe);if((0,je.T)(Se))return function $(Se,qe){return new ge.y(ie=>{let ye;return(0,G.f)(ie,qe,()=>{ye=Se[ae.h](),(0,G.f)(ie,qe,()=>{let be,J;try{({value:be,done:J}=ye.next())}catch(re){return void ie.error(re)}J?ie.complete():ie.next(be)},0,!0)}),()=>(0,_e.m)(null==ye?void 0:ye.return)&&ye.return()})}(Se,qe);if((0,We.L)(Se))return function He(Se,qe){return ee((0,We.Q)(Se),qe)}(Se,qe)}throw(0,De.z)(Se)}(Se,qe):(0,f.Xf)(Se)}},8421:(it,Ce,V)=>{"use strict";V.d(Ce,{Xf:()=>xe});var f=V(655),W=V(1144),P=V(8239),se=V(8306),ue=V(3670),ge=V(2206),he=V(4532),ae=V(6495),_e=V(3260),G=V(576),$=V(7849),ee=V(8822);function xe(Oe){if(Oe instanceof se.y)return Oe;if(null!=Oe){if((0,ue.c)(Oe))return function Ie(Oe){return new se.y(Re=>{const Se=Oe[ee.L]();if((0,G.m)(Se.subscribe))return Se.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Oe);if((0,W.z)(Oe))return function Ve(Oe){return new se.y(Re=>{for(let Se=0;Se<Oe.length&&!Re.closed;Se++)Re.next(Oe[Se]);Re.complete()})}(Oe);if((0,P.t)(Oe))return function je(Oe){return new se.y(Re=>{Oe.then(Se=>{Re.closed||(Re.next(Se),Re.complete())},Se=>Re.error(Se)).then(null,$.h)})}(Oe);if((0,ge.D)(Oe))return De(Oe);if((0,ae.T)(Oe))return function me(Oe){return new se.y(Re=>{for(const Se of Oe)if(Re.next(Se),Re.closed)return;Re.complete()})}(Oe);if((0,_e.L)(Oe))return function We(Oe){return De((0,_e.Q)(Oe))}(Oe)}throw(0,he.z)(Oe)}function De(Oe){return new se.y(Re=>{(function He(Oe,Re){var Se,qe,ie,ye;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Se=(0,f.KL)(Oe);!(qe=yield Se.next()).done;)if(Re.next(qe.value),Re.closed)return}catch(be){ie={error:be}}finally{try{qe&&!qe.done&&(ye=Se.return)&&(yield ye.call(Se))}finally{if(ie)throw ie.error}}Re.complete()})})(Oe,Re).catch(Se=>Re.error(Se))})}},6451:(it,Ce,V)=>{"use strict";V.d(Ce,{T:()=>ge});var f=V(8189),W=V(8421),P=V(515),se=V(7669),ue=V(8996);function ge(...he){const ae=(0,se.yG)(he),_e=(0,se._6)(he,1/0),G=he;return G.length?1===G.length?(0,W.Xf)(G[0]):(0,f.J)(_e)((0,ue.D)(G,ae)):P.E}},5403:(it,Ce,V)=>{"use strict";V.d(Ce,{x:()=>W});var f=V(930);function W(se,ue,ge,he,ae){return new P(se,ue,ge,he,ae)}class P extends f.Lv{constructor(ue,ge,he,ae,_e,G){super(ue),this.onFinalize=_e,this.shouldUnsubscribe=G,this._next=ge?function($){try{ge($)}catch(ee){ue.error(ee)}}:super._next,this._error=ae?function($){try{ae($)}catch(ee){ue.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch($){ue.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(it,Ce,V)=>{"use strict";V.d(Ce,{U:()=>P});var f=V(4482),W=V(5403);function P(se,ue){return(0,f.e)((ge,he)=>{let ae=0;ge.subscribe((0,W.x)(he,_e=>{he.next(se.call(ue,_e,ae++))}))})}},8189:(it,Ce,V)=>{"use strict";V.d(Ce,{J:()=>P});var f=V(5577),W=V(4671);function P(se=1/0){return(0,f.z)(W.y,se)}},5577:(it,Ce,V)=>{"use strict";V.d(Ce,{z:()=>ae});var f=V(4004),W=V(8421),P=V(4482),se=V(9672),ue=V(5403),he=V(576);function ae(_e,G,$=1/0){return(0,he.m)(G)?ae((ee,xe)=>(0,f.U)((Ie,Ve)=>G(ee,Ie,xe,Ve))((0,W.Xf)(_e(ee,xe))),$):("number"==typeof G&&($=G),(0,P.e)((ee,xe)=>function ge(_e,G,$,ee,xe,Ie,Ve,je){const me=[];let De=0,We=0,He=!1;const Oe=()=>{He&&!me.length&&!De&&G.complete()},Re=qe=>De<ee?Se(qe):me.push(qe),Se=qe=>{Ie&&G.next(qe),De++;let ie=!1;(0,W.Xf)($(qe,We++)).subscribe((0,ue.x)(G,ye=>{null==xe||xe(ye),Ie?Re(ye):G.next(ye)},()=>{ie=!0},void 0,()=>{if(ie)try{for(De--;me.length&&De<ee;){const ye=me.shift();Ve?(0,se.f)(G,Ve,()=>Se(ye)):Se(ye)}Oe()}catch(ye){G.error(ye)}}))};return _e.subscribe((0,ue.x)(G,Re,()=>{He=!0,Oe()})),()=>{null==je||je()}}(ee,xe,_e,$)))}},5363:(it,Ce,V)=>{"use strict";V.d(Ce,{Q:()=>se});var f=V(9672),W=V(4482),P=V(5403);function se(ue,ge=0){return(0,W.e)((he,ae)=>{he.subscribe((0,P.x)(ae,_e=>(0,f.f)(ae,ue,()=>ae.next(_e),ge),()=>(0,f.f)(ae,ue,()=>ae.complete(),ge),_e=>(0,f.f)(ae,ue,()=>ae.error(_e),ge)))})}},3099:(it,Ce,V)=>{"use strict";V.d(Ce,{B:()=>ue});var f=V(8421),W=V(7579),P=V(930),se=V(4482);function ue(he={}){const{connector:ae=(()=>new W.x),resetOnError:_e=!0,resetOnComplete:G=!0,resetOnRefCountZero:$=!0}=he;return ee=>{let xe,Ie,Ve,je=0,me=!1,De=!1;const We=()=>{null==Ie||Ie.unsubscribe(),Ie=void 0},He=()=>{We(),xe=Ve=void 0,me=De=!1},Oe=()=>{const Re=xe;He(),null==Re||Re.unsubscribe()};return(0,se.e)((Re,Se)=>{je++,!De&&!me&&We();const qe=Ve=null!=Ve?Ve:ae();Se.add(()=>{je--,0===je&&!De&&!me&&(Ie=ge(Oe,$))}),qe.subscribe(Se),!xe&&je>0&&(xe=new P.Hp({next:ie=>qe.next(ie),error:ie=>{De=!0,We(),Ie=ge(He,_e,ie),qe.error(ie)},complete:()=>{me=!0,We(),Ie=ge(He,G),qe.complete()}}),(0,f.Xf)(Re).subscribe(xe))})(ee)}}function ge(he,ae,..._e){if(!0===ae)return void he();if(!1===ae)return;const G=new P.Hp({next:()=>{G.unsubscribe(),he()}});return ae(..._e).subscribe(G)}},9468:(it,Ce,V)=>{"use strict";V.d(Ce,{R:()=>W});var f=V(4482);function W(P,se=0){return(0,f.e)((ue,ge)=>{ge.add(P.schedule(()=>ue.subscribe(ge),se))})}},8505:(it,Ce,V)=>{"use strict";V.d(Ce,{b:()=>ue});var f=V(576),W=V(4482),P=V(5403),se=V(4671);function ue(ge,he,ae){const _e=(0,f.m)(ge)||he||ae?{next:ge,error:he,complete:ae}:ge;return _e?(0,W.e)((G,$)=>{var ee;null===(ee=_e.subscribe)||void 0===ee||ee.call(_e);let xe=!0;G.subscribe((0,P.x)($,Ie=>{var Ve;null===(Ve=_e.next)||void 0===Ve||Ve.call(_e,Ie),$.next(Ie)},()=>{var Ie;xe=!1,null===(Ie=_e.complete)||void 0===Ie||Ie.call(_e),$.complete()},Ie=>{var Ve;xe=!1,null===(Ve=_e.error)||void 0===Ve||Ve.call(_e,Ie),$.error(Ie)},()=>{var Ie,Ve;xe&&(null===(Ie=_e.unsubscribe)||void 0===Ie||Ie.call(_e)),null===(Ve=_e.finalize)||void 0===Ve||Ve.call(_e)}))}):se.y}},4408:(it,Ce,V)=>{"use strict";V.d(Ce,{o:()=>ue});var f=V(727);class W extends f.w0{constructor(he,ae){super()}schedule(he,ae=0){return this}}const P={setInterval(ge,he,...ae){const{delegate:_e}=P;return(null==_e?void 0:_e.setInterval)?_e.setInterval(ge,he,...ae):setInterval(ge,he,...ae)},clearInterval(ge){const{delegate:he}=P;return((null==he?void 0:he.clearInterval)||clearInterval)(ge)},delegate:void 0};var se=V(8737);class ue extends W{constructor(he,ae){super(he,ae),this.scheduler=he,this.work=ae,this.pending=!1}schedule(he,ae=0){var _e;if(this.closed)return this;this.state=he;const G=this.id,$=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId($,G,ae)),this.pending=!0,this.delay=ae,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId($,this.id,ae),this}requestAsyncId(he,ae,_e=0){return P.setInterval(he.flush.bind(he,this),_e)}recycleAsyncId(he,ae,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ae;null!=ae&&P.clearInterval(ae)}execute(he,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(he,ae);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,ae){let G,_e=!1;try{this.work(he)}catch($){_e=!0,G=$||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:he,scheduler:ae}=this,{actions:_e}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(_e,this),null!=he&&(this.id=this.recycleAsyncId(ae,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Ce,V)=>{"use strict";V.d(Ce,{v:()=>P});var f=V(6063);class W{constructor(ue,ge=W.now){this.schedulerActionCtor=ue,this.now=ge}schedule(ue,ge=0,he){return new this.schedulerActionCtor(this,ue).schedule(he,ge)}}W.now=f.l.now;class P extends W{constructor(ue,ge=W.now){super(ue,ge),this.actions=[],this._active=!1}flush(ue){const{actions:ge}=this;if(this._active)return void ge.push(ue);let he;this._active=!0;do{if(he=ue.execute(ue.state,ue.delay))break}while(ue=ge.shift());if(this._active=!1,he){for(;ue=ge.shift();)ue.unsubscribe();throw he}}}},4986:(it,Ce,V)=>{"use strict";V.d(Ce,{z:()=>P});var f=V(4408);const P=new(V(7565).v)(f.o)},6063:(it,Ce,V)=>{"use strict";V.d(Ce,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(it,Ce,V)=>{"use strict";V.d(Ce,{z:()=>f});const f={setTimeout(W,P,...se){const{delegate:ue}=f;return(null==ue?void 0:ue.setTimeout)?ue.setTimeout(W,P,...se):setTimeout(W,P,...se)},clearTimeout(W){const{delegate:P}=f;return((null==P?void 0:P.clearTimeout)||clearTimeout)(W)},delegate:void 0}},2202:(it,Ce,V)=>{"use strict";V.d(Ce,{h:()=>W});const W=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Ce,V)=>{"use strict";V.d(Ce,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,Ce,V)=>{"use strict";V.d(Ce,{_6:()=>ge,jO:()=>se,yG:()=>ue});var f=V(576);function P(he){return he[he.length-1]}function se(he){return(0,f.m)(P(he))?he.pop():void 0}function ue(he){return function W(he){return he&&(0,f.m)(he.schedule)}(P(he))?he.pop():void 0}function ge(he,ae){return"number"==typeof P(he)?he.pop():ae}},8737:(it,Ce,V)=>{"use strict";function f(W,P){if(W){const se=W.indexOf(P);0<=se&&W.splice(se,1)}}V.d(Ce,{P:()=>f})},3888:(it,Ce,V)=>{"use strict";function f(W){const se=W(ue=>{Error.call(ue),ue.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}V.d(Ce,{d:()=>f})},2806:(it,Ce,V)=>{"use strict";V.d(Ce,{O:()=>se,x:()=>P});var f=V(2416);let W=null;function P(ue){if(f.v.useDeprecatedSynchronousErrorHandling){const ge=!W;if(ge&&(W={errorThrown:!1,error:null}),ue(),ge){const{errorThrown:he,error:ae}=W;if(W=null,he)throw ae}}else ue()}function se(ue){f.v.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=ue)}},9672:(it,Ce,V)=>{"use strict";function f(W,P,se,ue=0,ge=!1){const he=P.schedule(function(){se(),ge?W.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(W.add(he),!ge)return he}V.d(Ce,{f:()=>f})},4671:(it,Ce,V)=>{"use strict";function f(W){return W}V.d(Ce,{y:()=>f})},1144:(it,Ce,V)=>{"use strict";V.d(Ce,{z:()=>f});const f=W=>W&&"number"==typeof W.length&&"function"!=typeof W},2206:(it,Ce,V)=>{"use strict";V.d(Ce,{D:()=>W});var f=V(576);function W(P){return Symbol.asyncIterator&&(0,f.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(it,Ce,V)=>{"use strict";function f(W){return"function"==typeof W}V.d(Ce,{m:()=>f})},3670:(it,Ce,V)=>{"use strict";V.d(Ce,{c:()=>P});var f=V(8822),W=V(576);function P(se){return(0,W.m)(se[f.L])}},6495:(it,Ce,V)=>{"use strict";V.d(Ce,{T:()=>P});var f=V(2202),W=V(576);function P(se){return(0,W.m)(null==se?void 0:se[f.h])}},8239:(it,Ce,V)=>{"use strict";V.d(Ce,{t:()=>W});var f=V(576);function W(P){return(0,f.m)(null==P?void 0:P.then)}},3260:(it,Ce,V)=>{"use strict";V.d(Ce,{L:()=>se,Q:()=>P});var f=V(655),W=V(576);function P(ue){return(0,f.FC)(this,arguments,function*(){const he=ue.getReader();try{for(;;){const{value:ae,done:_e}=yield(0,f.qq)(he.read());if(_e)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ae)}}finally{he.releaseLock()}})}function se(ue){return(0,W.m)(null==ue?void 0:ue.getReader)}},4482:(it,Ce,V)=>{"use strict";V.d(Ce,{A:()=>W,e:()=>P});var f=V(576);function W(se){return(0,f.m)(null==se?void 0:se.lift)}function P(se){return ue=>{if(W(ue))return ue.lift(function(ge){try{return se(ge,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(it,Ce,V)=>{"use strict";function f(){}V.d(Ce,{Z:()=>f})},7849:(it,Ce,V)=>{"use strict";V.d(Ce,{h:()=>P});var f=V(2416),W=V(3410);function P(se){W.z.setTimeout(()=>{const{onUnhandledError:ue}=f.v;if(!ue)throw se;ue(se)})}},4532:(it,Ce,V)=>{"use strict";function f(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ce,{z:()=>f})},655:(it,Ce,V)=>{"use strict";function se(J,re){var oe={};for(var we in J)Object.prototype.hasOwnProperty.call(J,we)&&re.indexOf(we)<0&&(oe[we]=J[we]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(we=Object.getOwnPropertySymbols(J);de<we.length;de++)re.indexOf(we[de])<0&&Object.prototype.propertyIsEnumerable.call(J,we[de])&&(oe[we[de]]=J[we[de]])}return oe}function ae(J,re,oe,we){return new(oe||(oe=Promise))(function(Ue,gt){function tn(fn){try{Ye(we.next(fn))}catch(Tn){gt(Tn)}}function Ut(fn){try{Ye(we.throw(fn))}catch(Tn){gt(Tn)}}function Ye(fn){fn.done?Ue(fn.value):function de(Ue){return Ue instanceof oe?Ue:new oe(function(gt){gt(Ue)})}(fn.value).then(tn,Ut)}Ye((we=we.apply(J,re||[])).next())})}function me(J){return this instanceof me?(this.v=J,this):new me(J)}function De(J,re,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,we=oe.apply(J,re||[]),Ue=[];return de={},gt("next"),gt("throw"),gt("return"),de[Symbol.asyncIterator]=function(){return this},de;function gt(pn){we[pn]&&(de[pn]=function(nn){return new Promise(function(Ht,Yt){Ue.push([pn,nn,Ht,Yt])>1||tn(pn,nn)})})}function tn(pn,nn){try{!function Ut(pn){pn.value instanceof me?Promise.resolve(pn.value.v).then(Ye,fn):Tn(Ue[0][2],pn)}(we[pn](nn))}catch(Ht){Tn(Ue[0][3],Ht)}}function Ye(pn){tn("next",pn)}function fn(pn){tn("throw",pn)}function Tn(pn,nn){pn(nn),Ue.shift(),Ue.length&&tn(Ue[0][0],Ue[0][1])}}function He(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,re=J[Symbol.asyncIterator];return re?re.call(J):(J=function ee(J){var re="function"==typeof Symbol&&Symbol.iterator,oe=re&&J[re],we=0;if(oe)return oe.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&we>=J.length&&(J=void 0),{value:J&&J[we++],done:!J}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),oe={},we("next"),we("throw"),we("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function we(Ue){oe[Ue]=J[Ue]&&function(gt){return new Promise(function(tn,Ut){!function de(Ue,gt,tn,Ut){Promise.resolve(Ut).then(function(Ye){Ue({value:Ye,done:tn})},gt)}(tn,Ut,(gt=J[Ue](gt)).done,gt.value)})}}}V.d(Ce,{FC:()=>De,KL:()=>He,_T:()=>se,mG:()=>ae,qq:()=>me})},5e3:(it,Ce,V)=>{"use strict";V.d(Ce,{$8M:()=>Mo,$Z:()=>mc,AFp:()=>KI,AaK:()=>ae,BQk:()=>Im,CHM:()=>Hu,CRH:()=>y0,CZH:()=>Ii,CqO:()=>hv,EJc:()=>E_,EpF:()=>rp,F$t:()=>fC,F4k:()=>cC,FYo:()=>e_,FiY:()=>_t,G48:()=>nA,GfV:()=>r_,Gpc:()=>$,Hsn:()=>pC,JOm:()=>Go,LFG:()=>x,LSH:()=>Td,Lbi:()=>Nc,MAs:()=>tC,NdJ:()=>fv,O4$:()=>ad,OlP:()=>kn,Oqu:()=>Ec,PXZ:()=>IM,Q6J:()=>Em,QGY:()=>bm,Qsj:()=>t_,R0b:()=>go,RDi:()=>Al,Rgc:()=>Dh,SBq:()=>Ih,Sil:()=>YI,Suo:()=>UI,TTD:()=>Ba,TgZ:()=>vu,VLi:()=>F0,X6Q:()=>tA,XFs:()=>vt,Xpm:()=>It,Y36:()=>ho,YKP:()=>bI,YNc:()=>_u,Yjl:()=>Le,Yz7:()=>nn,ZZ4:()=>Vp,_Bn:()=>wp,_UZ:()=>Da,_Vd:()=>Xm,_c5:()=>dA,_uU:()=>lp,aQg:()=>O_,c2e:()=>ZS,cJS:()=>Yt,cg1:()=>pp,dDg:()=>XI,deG:()=>pd,dqk:()=>Zt,eFA:()=>JS,ekj:()=>xm,g9A:()=>w_,h0i:()=>hl,hGG:()=>hA,iGM:()=>_0,ifc:()=>Kt,ip1:()=>Nh,kL8:()=>Vm,kcU:()=>hg,lG2:()=>le,n5z:()=>Ll,oAB:()=>H,oxw:()=>dC,q4F:()=>i_,qLn:()=>Rf,qOj:()=>Jy,qZA:()=>np,s9C:()=>ip,sBO:()=>ab,sIi:()=>eh,s_b:()=>Sh,soG:()=>xp,tBr:()=>Pt,tb:()=>ZI,tp0:()=>ir,uIk:()=>ev,vHH:()=>Ve,vpe:()=>Sa,wAp:()=>Et,xp6:()=>lu,ynx:()=>Cm,z2F:()=>Mp,zSh:()=>mr,zs3:()=>Wo});var f=V(7579),W=V(727),P=V(8306),se=V(6451),ue=V(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function he(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function _e(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ge({__forward_ref__:ge});function $(s){return s.__forward_ref__=$,s.toString=function(){return ae(this())},s}function ee(s){return xe(s)?s():s}function xe(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===$}class Ve extends Error{constructor(o,u){super(function je(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function me(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():me(s)}function Re(s,o){const u=o?` in ${o}`:"";throw new Ve(-201,`No provider for ${De(s)} found${u}`)}function Ut(s,o){null==s&&function Ye(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Yt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Mn(s){return ei(s,Ti)||ei(s,Bn)}function ei(s,o){return s.hasOwnProperty(o)?s[o]:null}function Yi(s){return s&&(s.hasOwnProperty(Si)||s.hasOwnProperty(Qi))?s[Si]:null}const Ti=ge({\u0275prov:ge}),Si=ge({\u0275inj:ge}),Bn=ge({ngInjectableDef:ge}),Qi=ge({ngInjectorDef:ge});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let Mr;function gn(s){const o=Mr;return Mr=s,o}function Nr(s,o,u){const c=Mn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&vt.Optional?null:void 0!==o?o:void Re(ae(s),"Injector")}function qr(s){return{toString:s}.toString()}var Sn=(()=>((Sn=Sn||{})[Sn.OnPush=0]="OnPush",Sn[Sn.Default=1]="Default",Sn))(),Kt=(()=>{return(s=Kt||(Kt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Kt;var s})();const mt="undefined"!=typeof globalThis&&globalThis,st="undefined"!=typeof window&&window,Ai="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Zt=mt||"undefined"!=typeof global&&global||st||Ai,_n={},yt=[],li=ge({\u0275cmp:ge}),Gt=ge({\u0275dir:ge}),tr=ge({\u0275pipe:ge}),et=ge({\u0275mod:ge}),Ae=ge({\u0275fac:ge}),Ke=ge({__NG_ELEMENT_ID__:ge});let Dt=0;function It(s){return qr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Sn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||yt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Kt.Emulated,id:"c",styles:s.styles||yt,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,y=s.pipes;return c.id+=Dt++,c.inputs=B(s.inputs,u),c.outputs=B(s.outputs),p&&p.forEach(E=>E(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(K):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(q):null,c})}function K(s){return nt(s)||function ft(s){return s[Gt]||null}(s)}function q(s){return function Mt(s){return s[tr]||null}(s)}const Q={};function H(s){return qr(()=>{const o={type:s.type,bootstrap:s.bootstrap||yt,declarations:s.declarations||yt,imports:s.imports||yt,exports:s.exports||yt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Q[s.id]=s.type),o})}function B(s,o){if(null==s)return _n;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}const le=It;function Le(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function nt(s){return s[li]||null}function ot(s,o){const u=s[et]||null;if(!u&&!0===o)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return u}function Hi(s){return Array.isArray(s)&&"object"==typeof s[1]}function xi(s){return Array.isArray(s)&&!0===s[1]}function Hc(s){return 0!=(8&s.flags)}function Pu(s){return 2==(2&s.flags)}function Ws(s){return 1==(1&s.flags)}function Ri(s){return null!==s.template}function Xh(s){return 0!=(512&s[2])}function Mi(s,o){return s.hasOwnProperty(Ae)?s[Ae]:null}class ra{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ba(){return ja}function ja(s){return s.type.prototype.ngOnChanges&&(s.setInput=dg),tf}function tf(){const s=Kc(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===_n)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function dg(s,o,u,c){const d=Kc(s)||function bs(s,o){return s[Io]=o}(s,{previous:_n,current:null}),p=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],I=y[E];p[E]=new ra(I&&I.currentValue,o,y===_n),s[c]=o}Ba.ngInherit=!0;const Io="__ngSimpleChanges__";function Kc(s){return s[Io]||null}let Vu;function Al(s){Vu=s}function En(s){return!!s.listen}const Ha={createRenderer:(s,o)=>function Ds(){return void 0!==Vu?Vu:"undefined"!=typeof document?document:void 0}()};function vn(s){for(;Array.isArray(s);)s=s[0];return s}function bo(s,o){return vn(o[s])}function wr(s,o){return vn(o[s.index])}function $n(s,o){return s.data[o]}function Er(s,o){const u=o[s];return Hi(u)?u:u[0]}function ia(s){return 4==(4&s[2])}function Xi(s){return 128==(128&s[2])}function di(s,o){return null==o?null:s[o]}function Ks(s){s[18]=0}function Zs(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Tt={lFrame:od(null),bindingsEnabled:!0};function sa(){return Tt.bindingsEnabled}function Pe(){return Tt.lFrame.lView}function Wt(){return Tt.lFrame.tView}function Hu(s){return Tt.lFrame.contextLView=s,s[8]}function An(){let s=ed();for(;null!==s&&64===s.type;)s=s.parent;return s}function ed(){return Tt.lFrame.currentTNode}function es(s,o){const u=Tt.lFrame;u.currentTNode=s,u.isParent=o}function Ml(){return Tt.lFrame.isParent}function Wa(){Tt.lFrame.isParent=!1}function aa(){return Tt.lFrame.bindingIndex++}function rd(s,o){const u=Tt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Nl(o)}function Nl(s){Tt.lFrame.currentDirectiveIndex=s}function id(){return Tt.lFrame.currentQueryIndex}function sd(s){Tt.lFrame.currentQueryIndex=s}function kl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function za(s,o,u){if(u&vt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&vt.Host||(d=kl(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=Tt.lFrame=So();return c.currentTNode=o,c.lView=s,!0}function Ka(s){const o=So(),u=s[1];Tt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function So(){const s=Tt.lFrame,o=null===s?null:s.child;return null===o?od(s):o}function od(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function af(){const s=Tt.lFrame;return Tt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const $u=af;function fi(){const s=af();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function kr(){return Tt.lFrame.selectedIndex}function Qs(s){Tt.lFrame.selectedIndex=s}function Kn(){const s=Tt.lFrame;return $n(s.tView,s.selectedIndex)}function ad(){Tt.lFrame.currentNamespace="svg"}function hg(){!function ud(){Tt.lFrame.currentNamespace=null}()}function As(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:M}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function Za(s,o,u){cd(s,o,3,u)}function Ya(s,o,u,c){(3&s[2])===u&&cd(s,o,u,c)}function hr(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function cd(s,o,u,c){const p=null!=c?c:-1,y=o.length-1;let E=0;for(let I=void 0!==c?65535&s[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=c&&E>=c)break}else o[I]<0&&(s[18]+=65536),(E<p||-1==p)&&(pg(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function pg(s,o,u,c){const d=u[c]<0,p=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class ca{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function pi(s,o,u){const c=En(s);let d=0;for(;d<u.length;){const p=u[d];if("number"==typeof p){if(0!==p)break;d++;const y=u[d++],E=u[d++],I=u[d++];c?s.setAttribute(o,E,I,y):o.setAttributeNS(y,E,I)}else{const y=p,E=u[++d];Qa(y)?c&&s.setProperty(o,y,E):c?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function ni(s){return 3===s||4===s||6===s}function Qa(s){return 64===s.charCodeAt(0)}function Pr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||ln(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function ln(s,o,u,c,d){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function Js(s){return-1!==s}function Qe(s){return 32767&s}function gi(s,o){let u=function sn(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Gu=!0;function ns(s){const o=Gu;return Gu=s,o}let Xa=0;function Xs(s,o){const u=_i(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,mi(c.data,s),mi(o,null),mi(c.blueprint,null));const d=eu(s,o),p=s.injectorIndex;if(Js(d)){const y=Qe(d),E=gi(d,o),I=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[y+A]|I[y+A]}return o[p+8]=d,p}function mi(s,o){s.push(0,0,0,0,0,0,0,0,o)}function _i(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function eu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const p=d[1],y=p.type;if(c=2===y?p.declTNode:1===y?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function eo(s,o,u){!function bt(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Ke)&&(c=u[Ke]),null==c&&(c=u[Ke]=Xa++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Nn(s,o,u){if(u&vt.Optional)return s;Re(o,"NodeInjector")}function cf(s,o,u,c){if(u&vt.Optional&&void 0===c&&(c=null),0==(u&(vt.Self|vt.Host))){const d=s[9],p=gn(void 0);try{return d?d.get(o,c,u&vt.Optional):Nr(o,c,u&vt.Optional)}finally{gn(p)}}return Nn(c,o,u)}function to(s,o,u,c=vt.Default,d){if(null!==s){const p=function Nt(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ke)?s[Ke]:void 0;return"number"==typeof o?o>=0?255&o:hd:o}(u);if("function"==typeof p){if(!za(o,s,c))return c&vt.Host?Nn(d,u,c):cf(o,u,c,d);try{const y=p(c);if(null!=y||c&vt.Optional)return y;Re(u)}finally{$u()}}else if("number"==typeof p){let y=null,E=_i(s,o),I=-1,A=c&vt.Host?o[16][6]:null;for((-1===E||c&vt.SkipSelf)&&(I=-1===E?eu(s,o):o[E+8],-1!==I&&tu(c,!1)?(y=o[1],E=Qe(I),o=gi(I,o)):E=-1);-1!==E;){const M=o[1];if(xo(p,E,M.data)){const U=rs(E,o,u,y,c,A);if(U!==ve)return U}I=o[E+8],-1!==I&&tu(c,o[1].data[E+8]===A)&&xo(p,E,o)?(y=M,E=Qe(I),o=gi(I,o)):E=-1}}}return cf(o,u,c,d)}const ve={};function hd(){return new Zn(An(),Pe())}function rs(s,o,u,c,d,p){const y=o[1],E=y.data[s+8],M=ut(E,y,u,null==c?Pu(E)&&Gu:c!=y&&0!=(3&E.type),d&vt.Host&&p===E);return null!==M?is(o,y,M,E):ve}function ut(s,o,u,c,d){const p=s.providerIndexes,y=o.data,E=1048575&p,I=s.directiveStart,M=p>>20,Z=d?E+M:s.directiveEnd;for(let X=c?E:E+M;X<Z;X++){const Te=y[X];if(X<I&&u===Te||X>=I&&Te.type===u)return X}if(d){const X=y[I];if(X&&Ri(X)&&X.type===u)return I}return null}function is(s,o,u,c){let d=s[u];const p=o.data;if(function dd(s){return s instanceof ca}(d)){const y=d;y.resolving&&function We(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${s}${u}`)}(De(p[u]));const E=ns(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?gn(y.injectImpl):null;za(s,c,vt.Default);try{d=s[u]=y.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function ld(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const y=ja(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==I&&gn(I),ns(E),y.resolving=!1,$u()}}return d}function xo(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function tu(s,o){return!(s&vt.Self||s&vt.Host&&o)}class Zn{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return to(this._tNode,this._lView,o,c,u)}}function Ll(s){return qr(()=>{const o=s.prototype.constructor,u=o[Ae]||Ro(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[Ae]||Ro(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Ro(s){return xe(s)?()=>{const o=Ro(ee(s));return o&&o()}:Mi(s)}function Mo(s){return function Gi(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(ni(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(An(),s)}const ko="__parameters__";function yi(s,o,u){return qr(()=>{const c=function fr(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return E.annotation=y,E;function E(I,A,M){const U=I.hasOwnProperty(ko)?I[ko]:Object.defineProperty(I,ko,{value:[]})[ko];for(;U.length<=M;)U.push(null);return(U[M]=U[M]||[]).push(y),I}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class kn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=nn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pd=new kn("AnalyzeForEntryComponents");function Lr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Lr(c,o)):o!==s&&o.push(c)}return o}function ki(s,o){s.forEach(u=>Array.isArray(u)?ki(u,o):o(u))}function Ul(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function no(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Oo(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function Vr(s,o,u){let c=ro(s,o);return c>=0?s[1|c]=u:(c=~c,function gf(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Rs(s,o){const u=ro(s,o);if(u>=0)return s[1|u]}function ro(s,o){return function zu(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),y=s[p<<u];if(o===y)return p<<u;y>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const Qr={},Vo="__NG_DI_FLAG__",Wi="ngTempTokenPath",mf=/\n/gm,Hl="__source",$l=ge({provide:String,useValue:ge});let Uo;function b(s){const o=Uo;return Uo=s,o}function T(s,o=vt.Default){if(void 0===Uo)throw new Ve(203,"");return null===Uo?Nr(s,void 0,o):Uo.get(s,o&vt.Optional?null:void 0,o)}function x(s,o=vt.Default){return(function bn(){return Mr}()||T)(ee(s),o)}const Y=x;function te(s){const o=[];for(let u=0;u<s.length;u++){const c=ee(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Ve(900,"");let d,p=vt.Default;for(let y=0;y<c.length;y++){const E=c[y],I=ze(E);"number"==typeof I?-1===I?d=E.token:p|=I:d=E}o.push(x(d,p))}else o.push(x(c))}return o}function Me(s,o){return s[Vo]=o,s.prototype[Vo]=o,s}function ze(s){return s[Vo]}const Pt=Me(yi("Inject",s=>({token:s})),-1),_t=Me(yi("Optional"),8),ir=Me(yi("SkipSelf"),4);class su{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function as(s){return s instanceof su?s.changingThisBreaksApplicationSecurity:s}const Ig=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var sr=(()=>((sr=sr||{})[sr.NONE=0]="NONE",sr[sr.HTML=1]="HTML",sr[sr.STYLE=2]="STYLE",sr[sr.SCRIPT=3]="SCRIPT",sr[sr.URL=4]="URL",sr[sr.RESOURCE_URL=5]="RESOURCE_URL",sr))();function Td(s){const o=function Ad(){const s=Pe();return s&&s[12]}();return o?o.sanitize(sr.URL,s)||"":function $o(s,o){const u=function Ef(s){return s instanceof su&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?as(s):function ga(s){return(s=String(s)).match(Ig)||s.match(bg)?s:"unsafe:"+s}(me(s))}const py="__ngContext__";function ii(s,o){s[py]=o}function gy(s){const o=function Af(s){return s[py]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function my(s){return s.ngOriginalError}function Qw(s,...o){s.error(...o)}class Rf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function zD(s){return s&&s.ngErrorLogger||Qw}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&my(o);for(;u&&my(u);)u=my(u);return u||null}}const Mg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Zt))();function ls(s){return s instanceof Function?s():s}var Go=(()=>((Go=Go||{})[Go.Important=1]="Important",Go[Go.DashCase=2]="DashCase",Go))();function Pg(s,o){return undefined(s,o)}function Nd(s){const o=s[3];return xi(o)?o[3]:o}function Og(s){return cs(s[13])}function kd(s){return cs(s[4])}function cs(s){for(;null!==s&&!xi(s);)s=s[4];return s}function Yl(s,o,u,c,d){if(null!=c){let p,y=!1;xi(c)?p=c:Hi(c)&&(y=!0,c=c[0]);const E=vn(c);0===s&&null!==u?null==d?Lg(o,u,E):ks(o,u,E,d||null,!0):1===s&&null!==u?ks(o,u,E,d||null,!0):2===s?function Dy(s,o,u){const c=Vg(s,o);c&&function Rt(s,o,u,c){En(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function Ft(s,o,u,c,d){const p=u[7];p!==vn(u)&&Yl(o,s,c,p,d);for(let E=10;E<u.length;E++){const I=u[E];Hg(I[1],I,s,o,c,p)}}(o,s,p,u,d)}}function Nf(s,o,u){if(En(s))return s.createElement(o,u);{const c=null!==u?function Lu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function Cy(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Zs(d,-1)),u.splice(c,1)}function Ur(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&Cy(d,c),o>0&&(s[u-1][4]=c[4]);const p=no(s,10+o);!function XD(s,o){Hg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Ql(s,o){if(!(256&o[2])){const u=o[11];En(u)&&u.destroyNode&&Hg(s,o,u,3,null,null),function tT(s){let o=s[13];if(!o)return ma(s[1],s);for(;o;){let u=null;if(Hi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Hi(o)&&ma(o[1],o),o=o[3];null===o&&(o=s),Hi(o)&&ma(o[1],o),u=o&&o[4]}o=u}}(o)}}function ma(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function rT(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof ca)){const p=u[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=d[p[y]],I=p[y+1];try{I.call(E)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function Iy(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+1],E="function"==typeof y?y(o):vn(o[y]),I=c[d=u[p+2]],A=u[p+3];"boolean"==typeof A?E.removeEventListener(u[p],I,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),p+=2}else{const y=c[d=u[p+1]];u[p].call(y)}if(null!==c){for(let p=d+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&En(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&xi(o[3])){u!==o[3]&&Cy(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function Be(s,o,u){return function pr(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===Kt.None||d===Kt.Emulated)return null}return wr(c,u)}(s,o.parent,u)}function ks(s,o,u,c,d){En(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function Lg(s,o,u){En(s)?s.appendChild(o,u):o.appendChild(u)}function ct(s,o,u,c,d){null!==c?ks(s,o,u,c,d):Lg(s,o,u)}function Vg(s,o){return En(s)?s.parentNode(o):o.parentNode}function pe(s,o,u){return Br(s,o,u)}let Br=function Fe(s,o,u){return 40&s.type?wr(s,u):null};function Bg(s,o,u,c){const d=Be(s,c,o),p=o[11],E=pe(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let I=0;I<u.length;I++)ct(p,d,u[I],E,!1);else ct(p,d,u,E,!1)}function jg(s,o){if(null!==o){const u=o.type;if(3&u)return wr(o,s);if(4&u)return by(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return jg(s,c);{const d=s[o.index];return xi(d)?by(-1,d):vn(d)}}if(32&u)return Pg(o,s)()||vn(s[o.index]);{const c=uE(s,o);return null!==c?Array.isArray(c)?c[0]:jg(Nd(s[16]),c):jg(s,o.next)}}return null}function uE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function by(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return jg(c,d)}return o[7]}function Ty(s,o,u,c,d,p,y){for(;null!=u;){const E=c[u.index],I=u.type;if(y&&0===o&&(E&&ii(vn(E),c),u.flags|=4),64!=(64&u.flags))if(8&I)Ty(s,o,u.child,c,d,p,!1),Yl(o,s,d,E,p);else if(32&I){const A=Pg(u,c);let M;for(;M=A();)Yl(o,s,d,M,p);Yl(o,s,d,E,p)}else 16&I?Sy(s,o,c,u,d,p):Yl(o,s,d,E,p);u=y?u.projectionNext:u.next}}function Hg(s,o,u,c,d,p){Ty(u,c,s.firstChild,o,d,p,!1)}function Sy(s,o,u,c,d,p){const y=u[16],I=y[6].projection[c.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Yl(o,s,d,I[A],p);else Ty(s,o,I,y[3],d,p,!0)}function Ay(s,o,u){En(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Un(s,o,u){En(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function At(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}const cn="ng-template";function sT(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==At(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function or(s){return 4===s.type&&s.value!==cn}function Xe(s,o,u){return o===(4!==s.type||u?s.value:cn)}function Gg(s,o,u){let c=4;const d=s.attrs||[],p=function oT(s){for(let o=0;o<s.length;o++)if(ni(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!Xe(s,I,u)||""===I&&1===o.length){if(Ps(c))return!1;y=!0}}else{const A=8&c?I:o[++E];if(8&c&&null!==s.attrs){if(!sT(s.attrs,A,u)){if(Ps(c))return!1;y=!0}continue}const U=Jl(8&c?"class":I,d,or(s),u);if(-1===U){if(Ps(c))return!1;y=!0;continue}if(""!==A){let Z;Z=U>p?"":d[U+1].toLowerCase();const X=8&c?Z:null;if(X&&-1!==At(X,A,0)||2&c&&A!==Z){if(Ps(c))return!1;y=!0}}}}else{if(!y&&!Ps(c)&&!Ps(I))return!1;if(y&&Ps(I))continue;y=!1,c=I|1&c}}return Ps(c)||y}function Ps(s){return 0==(1&s)}function Jl(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function kf(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function lE(s,o,u=!1){for(let c=0;c<o.length;c++)if(Gg(s,o[c],u))return!0;return!1}function cE(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let d=0;d<s.length;d++)if(s[d]!==c[d])continue e;return!0}}return!1}function xy(s,o){return s?":not("+o.trim()+")":o}function Os(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Ps(y)&&(o+=xy(p,d),d=""),c=y,p=p||!Ps(c);u++}return""!==d&&(o+=xy(p,d)),o}const Lt={};function lu(s){qg(Wt(),Pe(),kr()+s,!1)}function qg(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Za(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Ya(o,p,0,u)}Qs(u)}function Xl(s,o){return s<<17|o<<2}function Dr(s){return s>>17&32767}function _a(s){return 2|s}function cu(s){return(131068&s)>>2}function du(s,o){return-131069&s|o<<2}function Of(s){return 1|s}function yE(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],p=u[c+1];if(-1!==p){const y=s.data[p];sd(d),y.contentQueries(2,o[p],p)}}}function Vd(s,o,u,c,d,p,y,E,I,A){const M=o.blueprint.slice();return M[0]=d,M[2]=140|c,Ks(M),M[3]=M[15]=s,M[8]=u,M[10]=y||s&&s[10],M[11]=E||s&&s[11],M[12]=I||s&&s[12]||null,M[9]=A||s&&s[9]||null,M[6]=p,M[16]=2==o.type?s[16]:M,M}function gr(s,o,u,c,d){let p=s.data[o];if(null===p)p=function Xg(s,o,u,c,d){const p=ed(),y=Ml(),I=s.data[o]=function cT(s,o,u,c,d,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=I),null!==p&&(y?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,u,c,d),function sf(){return Tt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const y=function Ss(){const s=Tt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return es(p,!0),p}function In(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Bf(s,o,u){Ka(o);try{const c=s.viewQuery;null!==c&&zd(1,c,u);const d=s.template;null!==d&&wE(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&yE(s,o),s.staticViewQueries&&zd(2,s.viewQuery,u);const p=s.components;null!==p&&function vE(s,o){for(let u=0;u<o.length;u++)RE(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,fi()}}function sc(s,o,u,c){const d=o[2];if(256!=(256&d)){Ka(o);try{Ks(o),function oa(s){return Tt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&wE(s,o,u,2,c);const y=3==(3&d);if(y){const A=s.preOrderCheckHooks;null!==A&&Za(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Ya(o,A,0,null),hr(o,0)}if(function xE(s){for(let o=Og(s);null!==o;o=kd(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],p=d[3];0==(1024&d[2])&&Zs(p,1),d[2]|=1024}}}(o),function _T(s){for(let o=Og(s);null!==o;o=kd(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Xi(c)&&sc(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&yE(s,o),y){const A=s.contentCheckHooks;null!==A&&Za(o,A)}else{const A=s.contentHooks;null!==A&&Ya(o,A,1),hr(o,1)}!function _E(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Qs(~d);else{const p=d,y=u[++c],E=u[++c];rd(y,p),E(2,o[p])}}}finally{Qs(-1)}}(s,o);const E=s.components;null!==E&&function lT(s,o){for(let u=0;u<o.length;u++)qd(s,o[u])}(o,E);const I=s.viewQuery;if(null!==I&&zd(2,I,c),y){const A=s.viewCheckHooks;null!==A&&Za(o,A)}else{const A=s.viewHooks;null!==A&&Ya(o,A,2),hr(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Zs(o[3],-1))}finally{fi()}}}function oc(s,o,u,c){const d=o[10],y=ia(o);try{!y&&d.begin&&d.begin(),y&&Bf(s,o,c),sc(s,o,u,c)}finally{!y&&d.end&&d.end()}}function wE(s,o,u,c,d){const p=kr(),y=2&c;try{Qs(-1),y&&o.length>20&&qg(s,o,20,!1),u(c,d)}finally{Qs(p)}}function Ud(s,o,u){if(Hc(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,u[p],p)}}}function Bd(s,o,u){!sa()||(function Vy(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||Xs(u,o),ii(c,o);const y=u.initialInputs;for(let E=d;E<p;E++){const I=s.data[E],A=Ri(I);A&&DE(o,u,I);const M=is(o,s,E,u);ii(M,o),null!==y&&TE(0,E-d,M,I,0,y),A&&(Er(u.index,o)[8]=M)}}(s,o,u,wr(u,o)),128==(128&u.flags)&&function Gd(s,o,u){const c=u.directiveStart,d=u.directiveEnd,y=u.index,E=function qa(){return Tt.lFrame.currentDirectiveIndex}();try{Qs(y);for(let I=c;I<d;I++){const A=s.data[I],M=o[I];Nl(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Fi(A,M)}}finally{Qs(-1),Nl(E)}}(s,o,u))}function jd(s,o,u=wr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function Oy(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=jf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function jf(s,o,u,c,d,p,y,E,I,A){const M=20+c,U=M+d,Z=function Ei(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Lt);return u}(M,U),X="function"==typeof A?A():A;return Z[1]={type:s,blueprint:Z,template:u,queries:null,viewQuery:E,declTNode:o,data:Z.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:X,incompleteFirstPass:!1}}function Fy(s,o,u,c){const d=PE(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&Kd(s).push(c,d.length-1))}function IE(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function jr(s,o,u,c,d,p,y,E){const I=wr(o,u);let M,A=o.inputs;!E&&null!=A&&(M=A[c])?(lc(s,u,M,c,d),Pu(o)&&function Hd(s,o){const u=Er(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function hT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,En(p)?p.setProperty(I,c,d):Qa(c)||(I.setProperty?I.setProperty(c,d):I[c]=d))}function em(s,o,u,c){let d=!1;if(sa()){const p=function nm(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];lE(u,y.selectors,!1)&&(d||(d=[]),eo(Xs(u,o),s,y.type),Ri(y)?(Wd(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==p){d=!0,rm(u,s.data.length,p.length);for(let M=0;M<p.length;M++){const U=p[M];U.providersResolver&&U.providersResolver(U)}let E=!1,I=!1,A=In(s,o,p.length,null);for(let M=0;M<p.length;M++){const U=p[M];u.mergedAttrs=Pr(u.mergedAttrs,U.hostAttrs),By(s,u,o,A,U),Uy(A,U,y),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const Z=U.type.prototype;!E&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!I&&(Z.ngOnChanges||Z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),A++}!function dT(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,y=[];let E=null,I=null;for(let A=o.directiveStart;A<c;A++){const M=d[A],U=M.inputs,Z=null===p||or(o)?null:SE(U,p);y.push(Z),E=IE(U,A,E),I=IE(M.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=I}(s,u)}y&&function bE(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new Ve(-301,!1);c.push(o[d],p)}}}(u,c,y)}return u.mergedAttrs=Pr(u.mergedAttrs,u.attrs),d}function tm(s,o,u,c,d,p){const y=p.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~o.index;(function Ly(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=I&&E.push(I),E.push(c,d,y)}}function Fi(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Wd(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Uy(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Ri(o)&&(u[""]=s)}}function rm(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function By(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=Mi(d.type)),y=new ca(p,Ri(d),null);s.blueprint[c]=y,u[c]=y,tm(s,o,0,c,In(s,u,d.hostVars,Lt),d)}function DE(s,o,u){const c=wr(o,s),d=Oy(u),p=s[10],y=Hf(s,Vd(s,d,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=y}function Ea(s,o,u,c,d,p){const y=wr(s,o);!function im(s,o,u,c,d,p,y){if(null==p)En(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==y?me(p):y(p,c||"",d);En(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],y,p,s.value,u,c,d)}function TE(s,o,u,c,d,p){const y=p[o];if(null!==y){const E=c.setInput;for(let I=0;I<y.length;){const A=y[I++],M=y[I++],U=y[I++];null!==E?c.setInput(u,U,A,M):u[M]=U}}}function SE(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function AE(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function qd(s,o){const u=Er(o,s);if(Xi(u)){const c=u[1];80&u[2]?sc(c,u,c.template,u[8]):u[5]>0&&pu(u)}}function pu(s){for(let c=Og(s);null!==c;c=kd(c))for(let d=10;d<c.length;d++){const p=c[d];if(1024&p[2]){const y=p[1];sc(y,p,y.template,p[8])}else p[5]>0&&pu(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Er(u[c],s);Xi(d)&&d[5]>0&&pu(d)}}function RE(s,o){const u=Er(o,s),c=u[1];(function ac(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Bf(c,u,u[8])}function Hf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function sl(s){for(;s;){s[2]|=64;const o=Nd(s);if(Xh(s)&&!o)return s;s=o}return null}function NE(s){!function sm(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=gy(u),d=c[1];oc(d,c,d.template,u)}}(s[8])}function zd(s,o,u){sd(0),o(s,u)}const kE=(()=>Promise.resolve(null))();function PE(s){return s[7]||(s[7]=[])}function Kd(s){return s.cleanup||(s.cleanup=[])}function $y(s,o){const u=s[9],c=u?u.get(Rf,null):null;c&&c.handleError(o)}function lc(s,o,u,c,d){for(let p=0;p<u.length;){const y=u[p++],E=u[p++],I=o[y],A=s.data[y];null!==A.setInput?A.setInput(I,d,c,E):I[E]=d}}function Ci(s,o,u){const c=bo(o,s);!function sE(s,o,u){En(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function $f(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?d=_e(d,E):2==p&&(c=_e(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const Wf=new kn("INJECTOR",-1);class VE{get(o,u=Qr){if(u===Qr){const c=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw c.name="NullInjectorError",c}return u}}const mr=new kn("Set Injector scope."),Qt={},UE={};let om;function gu(){return void 0===om&&(om=new VE),om}function BE(s,o=null,u=null,c){const d=qi(s,o,u,c);return d._resolveInjectorDefTypes(),d}function qi(s,o=null,u=null,c){return new jE(s,u,o||gu(),c)}class jE{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&ki(u,E=>this.processProvider(E,o,u)),ki([o],E=>this.processInjectorType(E,[],p)),this.records.set(Wf,Ia(void 0,this));const y=this.records.get(mr);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:ae(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=Qr,c=vt.Default){this.assertNotDestroyed();const d=b(this),p=gn(void 0);try{if(!(c&vt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function um(s){return"function"==typeof s||"object"==typeof s&&s instanceof kn}(o)&&Mn(o);E=I&&this.injectableDefInScope(I)?Ia(cc(o),Qt):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&vt.Self?gu():this.parent).get(o,u=c&vt.Optional&&u===Qr?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Wi]=y[Wi]||[]).unshift(ae(o)),d)throw y;return function wt(s,o,u,c){const d=s[Wi];throw o[Hl]&&d.unshift(o[Hl]),s.message=function kt(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ae(o);if(Array.isArray(o))d=o.map(ae).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):ae(E)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(mf,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Wi]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{gn(p),b(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(ae(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processInjectorType(o,u,c){if(!(o=ee(o)))return!1;let d=Yi(o);const p=null==d&&o.ngModule||void 0,y=void 0===p?o:p,E=-1!==c.indexOf(y);if(void 0!==p&&(d=Yi(p)),null==d)return!1;if(null!=d.imports&&!E){let M;c.push(y);try{ki(d.imports,U=>{this.processInjectorType(U,u,c)&&(void 0===M&&(M=[]),M.push(U))})}finally{}if(void 0!==M)for(let U=0;U<M.length;U++){const{ngModule:Z,providers:X}=M[U];ki(X,Te=>this.processProvider(Te,Z,X||yt))}}this.injectorDefTypes.add(y);const I=Mi(y)||(()=>new y);this.records.set(y,Ia(I,Qt));const A=d.providers;if(null!=A&&!E){const M=o;ki(A,U=>this.processProvider(U,M,A))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let d=Zd(o=ee(o))?o:ee(o&&o.provide);const p=function Ca(s,o,u){return $E(s)?Ia(void 0,s.useValue):Ia(Gy(s),Qt)}(o);if(Zd(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=Ia(void 0,Qt,!0),y.factory=()=>te(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,p)}hydrate(o,u){return u.value===Qt&&(u.value=UE,u.value=u.factory()),"object"==typeof u.value&&u.value&&function zf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ee(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function cc(s){const o=Mn(s),u=null!==o?o.factory:Mi(s);if(null!==u)return u;if(s instanceof kn)throw new Ve(204,!1);if(s instanceof Function)return function HE(s){const o=s.length;if(o>0)throw Oo(o,"?"),new Ve(204,!1);const u=function ui(s){const o=s&&(s[Ti]||s[Bn]);if(o){const u=function Ln(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Ve(204,!1)}function Gy(s,o,u){let c;if(Zd(s)){const d=ee(s);return Mi(d)||cc(d)}if($E(s))c=()=>ee(s.useValue);else if(function $t(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...te(s.deps||[]));else if(function yT(s){return!(!s||!s.useExisting)}(s))c=()=>x(ee(s.useExisting));else{const d=ee(s&&(s.useClass||s.provide));if(!function qf(s){return!!s.deps}(s))return Mi(d)||cc(d);c=()=>new d(...te(s.deps))}return c}function Ia(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function $E(s){return null!==s&&"object"==typeof s&&$l in s}function Zd(s){return"function"==typeof s}let Wo=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return BE({name:""},c,u,"");{const p=null!==(d=u.name)&&void 0!==d?d:"";return BE({name:p},u.parent,u.providers,p)}}}return s.THROW_IF_NOT_FOUND=Qr,s.NULL=new VE,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>x(Wf)}),s.__NG_ELEMENT_ID__=-1,s})();function KE(s,o){As(gy(s)[1],An())}function Jy(s){let o=function Qy(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(Ri(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ve(903,"");d=o.\u0275dir}if(d){if(u){c.push(d);const y=s;y.inputs=Xy(s.inputs),y.declaredInputs=Xy(s.declaredInputs),y.outputs=Xy(s.outputs);const E=d.hostBindings;E&&Xd(s,E);const I=d.viewQuery,A=d.contentQueries;if(I&&IT(s,I),A&&Jd(s,A),he(s.inputs,d.inputs),he(s.declaredInputs,d.declaredInputs),he(s.outputs,d.outputs),Ri(d)&&d.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===Jy&&(u=!1)}}o=Object.getPrototypeOf(o)}!function YE(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Pr(d.hostAttrs,u=Pr(u,d.hostAttrs))}}(c)}function Xy(s){return s===_n?{}:s===yt?[]:s}function IT(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function Jd(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function Xd(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let Yf=null;function Hr(){if(!Yf){const s=Zt.Symbol;if(s&&s.iterator)Yf=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Yf=c)}}}return Yf}function eh(s){return!!th(s)&&(Array.isArray(s)||!(s instanceof Map)&&Hr()in s)}function th(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Li(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function ev(s,o,u,c){const d=Pe();return Li(d,aa(),o)&&(Wt(),Ea(Kn(),d,s,o,u,c)),ev}function rh(s,o,u,c){return Li(s,aa(),u)?o+me(u)+c:Lt}function _u(s,o,u,c,d,p,y,E){const I=Pe(),A=Wt(),M=s+20,U=A.firstCreatePass?function iv(s,o,u,c,d,p,y,E,I){const A=o.consts,M=gr(o,s,4,y||null,di(A,E));em(o,u,M,di(A,I)),As(o,M);const U=M.tViews=jf(2,M,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),U.queries=o.queries.embeddedTView(M)),M}(M,A,I,o,u,c,d,p,y):A.data[M];es(U,!1);const Z=I[11].createComment("");Bg(A,I,Z,U),ii(Z,I),Hf(I,I[M]=AE(Z,I,Z,U)),Ws(U)&&Bd(A,I,U),null!=y&&jd(I,U,E)}function tC(s){return function Ts(s,o){return s[o]}(function td(){return Tt.lFrame.contextLView}(),20+s)}function ho(s,o=vt.Default){const u=Pe();return null===u?x(s,o):to(An(),u,ee(s),o)}function mc(){throw new Error("invalid")}function Em(s,o,u){const c=Pe();return Li(c,aa(),o)&&jr(Wt(),Kn(),c,s,o,c[11],u,!1),Em}function yu(s,o,u,c,d){const y=d?"class":"style";lc(s,u,o.inputs[y],y,c)}function vu(s,o,u,c){const d=Pe(),p=Wt(),y=20+s,E=d[11],I=d[y]=Nf(E,o,function fg(){return Tt.lFrame.currentNamespace}()),A=p.firstCreatePass?function FT(s,o,u,c,d,p,y){const E=o.consts,A=gr(o,s,2,d,di(E,p));return em(o,u,A,di(E,y)),null!==A.attrs&&$f(A,A.attrs,!1),null!==A.mergedAttrs&&$f(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,p,d,0,o,u,c):p.data[y];es(A,!0);const M=A.mergedAttrs;null!==M&&pi(E,I,M);const U=A.classes;null!==U&&Un(E,I,U);const Z=A.styles;return null!==Z&&Ay(E,I,Z),64!=(64&A.flags)&&Bg(p,d,I,A),0===function Jc(){return Tt.lFrame.elementDepthCount}()&&ii(I,d),function Ga(){Tt.lFrame.elementDepthCount++}(),Ws(A)&&(Bd(p,d,A),Ud(p,A,d)),null!==c&&jd(d,A),vu}function np(){let s=An();Ml()?Wa():(s=s.parent,es(s,!1));const o=s;!function Xc(){Tt.lFrame.elementDepthCount--}();const u=Wt();return u.firstCreatePass&&(As(u,s),Hc(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function gg(s){return 0!=(16&s.flags)}(o)&&yu(u,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function lf(s){return 0!=(32&s.flags)}(o)&&yu(u,o,Pe(),o.stylesWithoutHost,!1),np}function Da(s,o,u,c){return vu(s,o,u,c),np(),Da}function Cm(s,o,u){const c=Pe(),d=Wt(),p=s+20,y=d.firstCreatePass?function VT(s,o,u,c,d){const p=o.consts,y=di(p,c),E=gr(o,s,8,"ng-container",y);return null!==y&&$f(E,y,!0),em(o,u,E,di(p,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,d,c,o,u):d.data[p];es(y,!0);const E=c[p]=c[11].createComment("");return Bg(d,c,E,y),ii(E,c),Ws(y)&&(Bd(d,c,y),Ud(d,y,c)),null!=u&&jd(c,y),Cm}function Im(){let s=An();const o=Wt();return Ml()?Wa():(s=s.parent,es(s,!1)),o.firstCreatePass&&(As(o,s),Hc(s)&&o.queries.elementEnd(s)),Im}function rp(){return Pe()}function bm(s){return!!s&&"function"==typeof s.then}function cC(s){return!!s&&"function"==typeof s.subscribe}const hv=cC;function fv(s,o,u,c){const d=Pe(),p=Wt(),y=An();return function gh(s,o,u,c,d,p,y,E){const I=Ws(c),M=s.firstCreatePass&&Kd(s),U=o[8],Z=PE(o);let X=!0;if(3&c.type||E){const Ze=wr(c,o),dt=E?E(Ze):Ze,ke=Z.length,Ct=E?qt=>E(vn(qt[c.index])):c.index;if(En(u)){let qt=null;if(!E&&I&&(qt=function _c(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===u&&d[p+1]===c){const E=o[7],I=d[p+2];return E.length>I?E[I]:null}"string"==typeof y&&(p+=2)}return null}(s,o,d,c.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=p,qt.__ngLastListenerFn__=p,X=!1;else{p=Dm(c,o,U,p,!1);const Rn=u.listen(dt,d,p);Z.push(p,Rn),M&&M.push(d,Ct,ke,ke+1)}}else p=Dm(c,o,U,p,!0),dt.addEventListener(d,p,y),Z.push(p),M&&M.push(d,Ct,ke,y)}else p=Dm(c,o,U,p,!1);const Te=c.outputs;let Ge;if(X&&null!==Te&&(Ge=Te[d])){const Ze=Ge.length;if(Ze)for(let dt=0;dt<Ze;dt+=2){const zi=o[Ge[dt]][Ge[dt+1]].subscribe(p),Ph=Z.length;Z.push(p,zi),M&&M.push(d,c.index,Ph,-(Ph+1))}}}(p,d,d[11],y,s,o,!!u,c),fv}function gv(s,o,u,c){try{return!1!==u(c)}catch(d){return $y(s,d),!1}}function Dm(s,o,u,c,d){return function p(y){if(y===Function)return c;const E=2&s.flags?Er(s.index,o):o;0==(32&o[2])&&sl(E);let I=gv(o,0,c,y),A=p.__ngNextListenerFn__;for(;A;)I=gv(o,0,A,y)&&I,A=A.__ngNextListenerFn__;return d&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function dC(s=1){return function uf(s){return(Tt.lFrame.contextLView=function Pl(s,o){for(;s>0;)o=o[15],s--;return o}(s,Tt.lFrame.contextLView))[8]}(s)}function hC(s,o){let u=null;const c=function Wg(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let d=0;d<o.length;d++){const p=o[d];if("*"!==p){if(null===c?lE(s,p,!0):cE(c,p))return d}else u=d}return u}function fC(s){const o=Pe()[16][6];if(!o.projection){const c=o.projection=Oo(s?s.length:1,null),d=c.slice();let p=o.child;for(;null!==p;){const y=s?hC(p,s):0;null!==y&&(d[y]?d[y].projectionNext=p:c[y]=p,d[y]=p),p=p.next}}}function pC(s,o=0,u){const c=Pe(),d=Wt(),p=gr(d,20+s,16,null,u||null);null===p.projection&&(p.projection=o),Wa(),64!=(64&p.flags)&&function iT(s,o,u){Sy(o[11],0,o,u,Be(s,u,o),pe(u.parent||o[6],u,o))}(d,c,p)}function ip(s,o,u){return $r(s,"",o,"",u),ip}function $r(s,o,u,c,d){const p=Pe(),y=rh(p,o,u,c);return y!==Lt&&jr(Wt(),Kn(),p,s,y,p[11],d,!1),$r}function mh(s,o,u,c,d){const p=s[u+1],y=null===o;let E=c?Dr(p):cu(p),I=!1;for(;0!==E&&(!1===I||y);){const M=s[E+1];Tm(s[E],o)&&(I=!0,s[E+1]=c?Of(M):_a(M)),E=c?Dr(M):cu(M)}I&&(s[u+1]=c?_a(p):Of(p))}function Tm(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ro(s,o)>=0}function xm(s,o){return function Ko(s,o,u,c){const d=Pe(),p=Wt(),y=function hi(s){const o=Tt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function Ev(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[kr()],y=function wv(s,o){return o>=s.expandoStartIndex}(s,u);(function Tv(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!y&&(o=!1),o=function Cv(s,o,u,c){const d=function la(s){const o=Tt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=wc(u=up(null,s,o,u,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=up(d,s,o,u,c),null===p){let I=function Rm(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==cu(c))return s[Dr(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=up(null,s,o,I[1],c),I=wc(I,o.attrs,c),function ap(s,o,u,c){s[Dr(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else p=function Mm(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=wc(c,s[p].hostAttrs,u);return wc(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function _v(s,o,u,c,d,p){let y=p?o.classBindings:o.styleBindings,E=Dr(y),I=cu(y);s[c]=u;let M,A=!1;if(Array.isArray(u)){const U=u;M=U[1],(null===M||ro(U,M)>0)&&(A=!0)}else M=u;if(d)if(0!==I){const Z=Dr(s[E+1]);s[c+1]=Xl(Z,E),0!==Z&&(s[Z+1]=du(s[Z+1],c)),s[E+1]=function Pf(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Xl(E,0),0!==E&&(s[E+1]=du(s[E+1],c)),E=c;else s[c+1]=Xl(I,0),0===E?E=c:s[I+1]=du(s[I+1],c),I=c;A&&(s[c+1]=_a(s[c+1])),mh(s,M,c,!0),mh(s,M,c,!1),function yv(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&ro(p,o)>=0&&(u[c+1]=Of(u[c+1]))}(o,M,s,c,p),y=Xl(E,I),p?o.classBindings=y:o.styleBindings=y}(d,p,o,u,y,c)}}(p,s,y,c),o!==Lt&&Li(d,y,o)&&function Dv(s,o,u,c,d,p,y,E){if(!(3&o.type))return;const I=s.data,A=I[E+1];Nm(function My(s){return 1==(1&s)}(A)?AC(I,o,u,d,cu(A),y):void 0)||(Nm(p)||function hE(s){return 2==(2&s)}(A)&&(p=AC(I,null,u,d,E,y)),function Pd(s,o,u,c,d){const p=En(s);if(o)d?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let y=-1===c.indexOf("-")?void 0:Go.DashCase;if(null==d)p?s.removeStyle(u,c,y):u.style.removeProperty(c);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),y|=Go.Important),p?s.setStyle(u,c,d,y):u.style.setProperty(c,d,E?"important":"")}}}(c,y,bo(kr(),u),d,p))}(p,p.data[kr()],d,d[11],s,d[y+1]=function GT(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ae(as(s)))),s}(o,u),c,y)}(s,o,null,!0),xm}function up(s,o,u,c,d){let p=null;const y=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<y&&(p=o[E],c=wc(c,p.hostAttrs,d),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function wc(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Vr(s,y,!!u||o[++p]))}return void 0===s?null:s}function AC(s,o,u,c,d,p){const y=null===o;let E;for(;d>0;){const I=s[d],A=Array.isArray(I),M=A?I[1]:I,U=null===M;let Z=u[d+1];Z===Lt&&(Z=U?yt:void 0);let X=U?Rs(Z,c):M===c?Z:void 0;if(A&&!Nm(X)&&(X=Rs(I,c)),Nm(X)&&(E=X,y))return E;const Te=s[d+1];d=y?Dr(Te):cu(Te)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(E=Rs(I,c))}return E}function Nm(s){return void 0!==s}function lp(s,o=""){const u=Pe(),c=Wt(),d=s+20,p=c.firstCreatePass?gr(c,d,1,o,null):c.data[d],y=u[d]=function nl(s,o){return En(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Bg(c,u,y,p),es(p,!1)}function Ec(s){return cp("",s,""),Ec}function cp(s,o,u){const c=Pe(),d=rh(c,s,o,u);return d!==Lt&&Ci(c,kr(),d),cp}const Ic=void 0;var KT=["en",[["a","p"],["AM","PM"],Ic],[["AM","PM"],Ic,Ic],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ic,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ic,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ic,"{1} 'at' {0}",Ic],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Uv(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let ul={};function pp(s){const o=function ll(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Um(o);if(u)return u;const c=o.split("-")[0];if(u=Um(c),u)return u;if("en"===c)return KT;throw new Error(`Missing locale data for the locale "${s}".`)}function Vm(s){return pp(s)[Et.PluralCase]}function Um(s){return s in ul||(ul[s]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[s]),ul[s]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Eu="en-US";let jm=Eu;function oi(s,o,u,c,d){if(s=ee(s),Array.isArray(s))for(let p=0;p<s.length;p++)oi(s[p],o,u,c,d);else{const p=Wt(),y=Pe();let E=Zd(s)?s:ee(s.provide),I=Gy(s);const A=An(),M=1048575&A.providerIndexes,U=A.directiveStart,Z=A.providerIndexes>>20;if(Zd(s)||!s.multi){const X=new ca(I,d,ho),Te=s0(E,o,d?M:M+Z,U);-1===Te?(eo(Xs(A,y),p,E),po(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(X),y.push(X)):(u[Te]=X,y[Te]=X)}else{const X=s0(E,o,M+Z,U),Te=s0(E,o,M,M+Z),Ge=X>=0&&u[X],Ze=Te>=0&&u[Te];if(d&&!Ze||!d&&!Ge){eo(Xs(A,y),p,E);const dt=function mI(s,o,u,c,d){const p=new ca(s,u,ho);return p.multi=[],p.index=o,p.componentProviders=0,r0(p,d,c&&!u),p}(d?gI:Jm,u.length,d,c,I);!d&&Ze&&(u[Te].providerFactory=dt),po(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(dt),y.push(dt)}else po(p,s,X>-1?X:Te,r0(u[d?Te:X],I,!d&&c));!d&&c&&Ze&&u[Te].componentProviders++}}}function po(s,o,u,c){const d=Zd(o),p=function am(s){return!!s.useClass}(o);if(d||p){const I=(p?ee(o.useClass):o).prototype.ngOnDestroy;if(I){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const M=A.indexOf(u);-1===M?A.push(u,[c,I]):A[M+1].push(c,I)}else A.push(u,I)}}}function r0(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function s0(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function Jm(s,o,u,c){return vp(this.multi,[])}function gI(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=is(u,u[1],this.providerFactory.index,c);p=E.slice(0,y),vp(d,p);for(let I=y;I<E.length;I++)p.push(E[I])}else p=[],vp(d,p);return p}function vp(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function wp(s,o=[]){return u=>{u.providersResolver=(c,d)=>function Wn(s,o,u){const c=Wt();if(c.firstCreatePass){const d=Ri(s);oi(u,c.data,c.blueprint,d,!0),oi(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class dS{}class fS{resolveComponentFactory(o){throw function hS(s){const o=Error(`No component factory found for ${ae(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Xm=(()=>{class s{}return s.NULL=new fS,s})();function yI(){return dl(An(),Pe())}function dl(s,o){return new Ih(wr(s,o))}let Ih=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=yI,s})();function o0(s){return s instanceof Ih?s.nativeElement:s}class e_{}let t_=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function wI(){const s=Pe(),u=Er(An().index,s);return function a0(s){return s[11]}(Hi(u)?u:s)}(),s})(),n_=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class r_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const i_=new r_("13.3.11"),s_={};function bu(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(vn(p)),xi(p))for(let E=10;E<p.length;E++){const I=p[E],A=I[1].firstChild;null!==A&&bu(I[1],I,A,c)}const y=u.type;if(8&y)bu(s,o,u.child,c);else if(32&y){const E=Pg(u,o);let I;for(;I=E();)c.push(I)}else if(16&y){const E=uE(o,u);if(Array.isArray(E))c.push(...E);else{const I=Nd(o[16]);bu(I[1],I,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class Sc{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return bu(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(xi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Ur(o,c),no(u,c))}this._attachedToViewContainer=!1}Ql(this._lView[1],this._lView)}onDestroy(o){Fy(this._lView[1],this._lView,null,o)}markForCheck(){sl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function uc(s,o,u){const c=o[10];c.begin&&c.begin();try{sc(s,o,s.template,u)}catch(d){throw $y(o,d),d}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function oE(s,o){Hg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ve(902,"");this._appRef=o}}class pS extends Sc{constructor(o){super(o),this._view=o}detectChanges(){NE(this._view)}checkNoChanges(){}get context(){return null}}class EI extends Xm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=nt(o);return new o_(u,this.ngModule)}}function CI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class o_ extends dS{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Ry(s){return s.map(Os).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return CI(this.componentDef.inputs)}get outputs(){return CI(this.componentDef.outputs)}create(o,u,c,d){const p=(d=d||this.ngModule)?function gS(s,o){return{get:(u,c,d)=>{const p=s.get(u,s_,d);return p!==s_||c===s_?p:o.get(u,c,d)}}}(o,d.injector):o,y=p.get(e_,Ha),E=p.get(n_,null),I=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=c?function CE(s,o,u){if(En(s))return s.selectRootElement(o,u===Kt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):Nf(y.createRenderer(null,this.componentDef),A,function II(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),U=this.componentDef.onPush?576:528,Z=function zE(s,o){return{components:[],scheduler:s||Mg,clean:kE,playerHandler:o||null,flags:0}}(),X=jf(0,null,null,1,0,null,null,null,null,null),Te=Vd(null,X,Z,U,null,null,y,I,E,p);let Ge,Ze;Ka(Te);try{const dt=function Qd(s,o,u,c,d,p){const y=u[1];u[20]=s;const I=gr(y,20,2,"#host",null),A=I.mergedAttrs=o.hostAttrs;null!==A&&($f(I,A,!0),null!==s&&(pi(d,s,A),null!==I.classes&&Un(d,s,I.classes),null!==I.styles&&Ay(d,s,I.styles)));const M=c.createRenderer(s,o),U=Vd(u,Oy(o),null,o.onPush?64:16,u[20],I,c,M,p||null,null);return y.firstCreatePass&&(eo(Xs(I,u),y,o.type),Wd(y,I),rm(I,u.length,1)),Hf(u,U),u[20]=U}(M,this.componentDef,Te,y,I);if(M)if(c)pi(I,M,["ng-version",i_.full]);else{const{attrs:ke,classes:Ct}=function dE(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!Ps(d))break;d=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);ke&&pi(I,M,ke),Ct&&Ct.length>0&&Un(I,M,Ct.join(" "))}if(Ze=$n(X,20),void 0!==u){const ke=Ze.projection=[];for(let Ct=0;Ct<this.ngContentSelectors.length;Ct++){const qt=u[Ct];ke.push(null!=qt?Array.from(qt):null)}}Ge=function dm(s,o,u,c,d){const p=u[1],y=function $d(s,o,u){const c=An();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),By(s,c,o,In(s,o,1,null),u));const d=is(o,s,c.directiveStart,c);ii(d,o);const p=wr(c,o);return p&&ii(p,o),d}(p,u,o);if(c.components.push(y),s[8]=y,d&&d.forEach(I=>I(y,o)),o.contentQueries){const I=An();o.contentQueries(1,y,I.directiveStart)}const E=An();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Qs(E.index),tm(u[1],E,0,E.directiveStart,E.directiveEnd,o),Fi(o,y)),y}(dt,this.componentDef,Te,Z,[KE]),Bf(X,Te,null)}finally{fi()}return new _S(this.componentType,Ge,dl(Ze,Te),Te,Ze)}}class _S extends class cS{}{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new pS(d),this.componentType=o}get injector(){return new Zn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class hl{}class bI{}const bh=new Map;class DI extends hl{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new EI(this);const c=ot(o);this._bootstrapComponents=ls(c.bootstrap),this._r3Injector=qi(o,u,[{provide:hl,useValue:this},{provide:Xm,useValue:this.componentFactoryResolver}],ae(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Wo.THROW_IF_NOT_FOUND,c=vt.Default){return o===Wo||o===hl||o===Wf?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class a_ extends bI{constructor(o){super(),this.moduleType=o,null!==ot(o)&&function lM(s){const o=new Set;!function u(c){const d=ot(c,!0),p=d.id;null!==p&&(function vS(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ae(o)} vs ${ae(o.name)}`)}(p,bh.get(p),c),bh.set(p,c));const y=ls(d.imports);for(const E of y)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new DI(this.moduleType,o)}}function c0(s){return o=>{setTimeout(s,void 0,o)}}const Sa=class SS extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,p,y;let E=o,I=u||(()=>null),A=c;if(o&&"object"==typeof o){const U=o;E=null===(d=U.next)||void 0===d?void 0:d.bind(U),I=null===(p=U.error)||void 0===p?void 0:p.bind(U),A=null===(y=U.complete)||void 0===y?void 0:y.bind(U)}this.__isAsync&&(I=c0(I),E&&(E=c0(E)),A&&(A=c0(A)));const M=super.subscribe({next:E,error:I,complete:A});return o instanceof W.w0&&o.add(M),M}};function d0(){return this._results[Hr()]()}class Ip{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Hr(),c=Ip.prototype;c[u]||(c[u]=d0)}get changes(){return this._changes||(this._changes=new Sa)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Lr(o);(this._changesDetected=!function nu(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Dh=(()=>{class s{}return s.__NG_ELEMENT_ID__=NI,s})();const Rc=Dh,MI=class extends Rc{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Vd(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),Bf(u,c,o),new Sc(c)}};function NI(){return Th(An(),Pe())}function Th(s,o){return 4&s.type?new MI(o,s,dl(s,o)):null}let Sh=(()=>{class s{}return s.__NG_ELEMENT_ID__=AS,s})();function AS(){return kI(An(),Pe())}const d_=Sh,bp=class extends d_{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return dl(this._hostTNode,this._hostLView)}get injector(){return new Zn(this._hostTNode,this._hostLView)}get parentInjector(){const o=eu(this._hostTNode,this._hostLView);if(Js(o)){const u=gi(o,this._hostLView),c=Qe(o);return new Zn(u[1].data[c+8],u)}return new Zn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=h0(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,p){const y=o&&!function Ni(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const U=u||{};E=U.index,c=U.injector,d=U.projectableNodes,p=U.ngModuleRef}const I=y?o:new o_(nt(o)),A=c||this.parentInjector;if(!p&&null==I.ngModule){const Z=(y?A:this.parentInjector).get(hl,null);Z&&(p=Z)}const M=I.create(A,d,void 0,p);return this.insert(M.hostView,E),M}insert(o,u){const c=o._lView,d=c[1];if(function Rl(s){return xi(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const U=c[3],Z=new bp(U,U[6],U[3]);Z.detach(Z.indexOf(o))}}const p=this._adjustIndex(u),y=this._lContainer;!function Fg(s,o,u,c){const d=10+c,p=u.length;c>0&&(u[d-1][4]=o),c<p-10?(o[4]=u[d],Ul(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function nT(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,c,y,p);const E=by(p,y),I=c[11],A=Vg(I,y[7]);return null!==A&&function eT(s,o,u,c,d,p){c[0]=d,c[6]=o,Hg(s,c,u,1,d,p)}(d,y[6],I,c,A,E),o.attachToViewContainerRef(),Ul(Mc(y),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=h0(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Ur(this._lContainer,u);c&&(no(Mc(this._lContainer),u),Ql(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Ur(this._lContainer,u);return c&&null!=no(Mc(this._lContainer),u)?new Sc(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function h0(s){return s[8]}function Mc(s){return s[8]||(s[8]=[])}function kI(s,o){let u;const c=o[s.index];if(xi(c))u=c;else{let d;if(8&s.type)d=vn(c);else{const p=o[11];d=p.createComment("");const y=wr(s,o);ks(p,Vg(p,y),d,function tt(s,o){return En(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=u=AE(c,o,d,s),Hf(o,u)}return new bp(u,s,o)}class Aa{constructor(o){this.queryList=o,this.matches=null}clone(){return new Aa(this.queryList)}setDirty(){this.queryList.setDirty()}}class f0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const y=u.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new f0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Dp(o,u).matches&&this.queries[u].setDirty()}}class OI{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class p0{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new p0(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class g0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new g0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,FI(u,p)),this.matchTNodeWithReadOption(o,u,ut(u,o,p,!1,!1))}else c===Dh?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,ut(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Ih||d===Sh||d===Dh&&4&u.type)this.addMatch(u.index,-2);else{const p=ut(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function FI(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function RS(s,o,u,c){return-1===u?function xS(s,o){return 11&s.type?dl(s,o):4&s.type?Th(s,o):null}(o,s):-2===u?function LI(s,o,u){return u===Ih?dl(o,s):u===Dh?Th(o,s):u===Sh?kI(o,s):void 0}(s,o,c):is(s,s[1],u,o)}function VI(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,y=u.matches,E=[];for(let I=0;I<y.length;I+=2){const A=y[I];E.push(A<0?null:RS(o,p[A],y[I+1],u.metadata.read))}d.matches=E}return d.matches}function m0(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const y=VI(s,o,d,u);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)c.push(y[E/2]);else{const A=p[E+1],M=o[-I];for(let U=10;U<M.length;U++){const Z=M[U];Z[17]===Z[3]&&m0(Z[1],Z,A,c)}if(null!==M[9]){const U=M[9];for(let Z=0;Z<U.length;Z++){const X=U[Z];m0(X[1],X,A,c)}}}}}return c}function _0(s){const o=Pe(),u=Wt(),c=id();sd(c+1);const d=Dp(u,c);if(s.dirty&&ia(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?m0(u,o,c,[]):VI(u,o,d,c);s.reset(p,o0),s.notifyOnChanges()}return!0}return!1}function UI(s,o,u,c){const d=Wt();if(d.firstCreatePass){const p=An();(function w0(s,o,u){null===s.queries&&(s.queries=new p0),s.queries.track(new g0(o,u))})(d,new OI(o,u,c),p.index),function E0(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function v0(s,o,u){const c=new Ip(4==(4&u));Fy(s,o,c,c.destroy),null===o[19]&&(o[19]=new f0),o[19].queries.push(new Aa(c))}(d,Pe(),u)}function y0(){return function BI(s,o){return s[19].queries[o].queryList}(Pe(),id())}function Dp(s,o){return s.queries.getByIndex(o)}function Sp(...s){}const Nh=new kn("Application Initializer");let Ii=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Sp,this.reject=Sp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(bm(p))u.push(p);else if(hv(p)){const y=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(x(Nh,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const KI=new kn("AppId",{providedIn:"root",factory:function v_(){return`${Tu()}${Tu()}${Tu()}`}});function Tu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const w_=new kn("Platform Initializer"),Nc=new kn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ZI=new kn("appBootstrapListener");let ZS=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const xp=new kn("LocaleId",{providedIn:"root",factory:()=>Y(xp,vt.Optional|vt.SkipSelf)||function gl(){return"undefined"!=typeof $localize&&$localize.locale||Eu}()}),E_=new kn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class YS{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let YI=(()=>{class s{compileModuleSync(u){return new a_(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=ls(ot(u).declarations).reduce((y,E)=>{const I=nt(E);return I&&y.push(new o_(I)),y},[]);return new YS(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const I_=(()=>Promise.resolve(0))();function Su(s){"undefined"==typeof Zone?I_.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class go{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sa(!1),this.onMicrotaskEmpty=new Sa(!1),this.onStable=new Sa(!1),this.onError=new Sa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function N0(){let s=Zt.requestAnimationFrame,o=Zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function P0(s){const o=()=>{!function kc(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Zt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,b_(s),s.isCheckStableRunning=!0,k0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),b_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,y,E)=>{try{return D_(s),u.invokeTask(d,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),O0(s)}},onInvoke:(u,c,d,p,y,E,I)=>{try{return D_(s),u.invoke(d,p,y,E,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),O0(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,b_(s),k0(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!go.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(go.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,JI,Sp,Sp);try{return p.runTask(y,u,c)}finally{p.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const JI={};function k0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function b_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function D_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function O0(s){s._nesting--,k0(s)}class T_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sa,this.onMicrotaskEmpty=new Sa,this.onStable=new Sa,this.onError=new Sa}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let XI=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{go.assertNotInAngularZone(),Su(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Su(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(x(go))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),wM=(()=>{class s{constructor(){this._applications=new Map,eb.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return eb.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class QS{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function F0(s){eb=s}let eb=new QS,kh=null;const tb=new kn("AllowMultipleToken"),nb=new kn("PlatformOnDestroy");class IM{constructor(o,u){this.name=o,this.token=u}}function JS(s,o,u=[]){const c=`Platform: ${o}`,d=new kn(c);return(p=[])=>{let y=S_();if(!y||y.injector.get(tb,!1)){const E=[...u,...p,{provide:d,useValue:!0}];s?s(E):function bM(s){if(kh&&!kh.get(tb,!1))throw new Ve(400,"");kh=s;const o=s.get(ib),u=s.get(w_,null);u&&u.forEach(c=>c())}(function TM(s=[],o){return Wo.create({name:o,providers:[{provide:mr,useValue:"platform"},{provide:nb,useValue:()=>kh=null},...s]})}(E,c))}return function DM(s){const o=S_();if(!o)throw new Ve(401,"");return o}()}}function S_(){var s;return null!==(s=null==kh?void 0:kh.get(ib))&&void 0!==s?s:null}let ib=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function Di(s,o){let u;return u="noop"===s?new T_:("zone.js"===s?void 0:s)||new go({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:go,useValue:E}];return E.run(()=>{const A=Wo.create({providers:I,parent:this.injector,name:u.moduleType.name}),M=u.create(A),U=M.injector.get(Rf,null);if(!U)throw new Ve(402,"");return E.runOutsideAngular(()=>{const Z=E.onError.subscribe({next:X=>{U.handleError(X)}});M.onDestroy(()=>{L0(this._modules,M),Z.unsubscribe()})}),function XS(s,o,u){try{const c=u();return bm(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(U,E,()=>{const Z=M.injector.get(Ii);return Z.runInitializers(),Z.donePromise.then(()=>(function jv(s){Ut(s,"Expected localeId to be defined"),"string"==typeof s&&(jm=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(xp,Eu)||Eu),this._moduleDoBootstrap(M),M))})})}bootstrapModule(u,c=[]){const d=Rp({},c);return function EM(s,o,u){const c=new a_(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(Mp);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Ve(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(nb,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(x(Wo))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Rp(s,o){return Array.isArray(o)?o.reduce(Rp,s):Object.assign(Object.assign({},s),o)}let Mp=(()=>{class s{constructor(u,c,d,p){this._zone=u,this._injector=c,this._exceptionHandler=d,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new P.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{go.assertNotInAngularZone(),Su(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{go.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),M.unsubscribe()}});this.isStable=(0,se.T)(y,E.pipe((0,ue.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Ve(405,"");let d;d=u instanceof dS?u:this._injector.get(Xm).resolveComponentFactory(u),this.componentTypes.push(d.componentType);const p=function CM(s){return s.isBoundToModule}(d)?void 0:this._injector.get(hl),E=d.create(Wo.NULL,[],c||d.selector,p),I=E.location.nativeElement,A=E.injector.get(XI,null),M=A&&E.injector.get(wM);return A&&M&&M.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),L0(this.components,E),M&&M.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ve(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;L0(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(ZI,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(x(go),x(Wo),x(Rf),x(Ii))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function L0(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let V0=!0,ob=!1;function tA(){return ob=!0,V0}function nA(){if(ob)throw new Error("Cannot enable prod mode after platform setup.");V0=!1}let ab=(()=>{class s{}return s.__NG_ELEMENT_ID__=U0,s})();function U0(s){return function A_(s,o,u){if(Pu(s)&&!u){const c=Er(s.index,o);return new Sc(c,c)}return 47&s.type?new Sc(o[16],o):null}(An(),Pe(),16==(16&s))}class N_{constructor(){}supports(o){return eh(o)}create(o){return new oA(o)}}const H0=(s,o)=>o;class oA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||H0}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const y=!c||u&&u.currentIndex<k_(c,d,p)?u:c,E=k_(y,d,p),I=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{p||(p=[]);const A=E-d,M=I-d;if(A!=M){for(let Z=0;Z<A;Z++){const X=Z<p.length?p[Z]:p[Z]=0,Te=X+Z;M<=Te&&Te<A&&(p[Z]=X+1)}p[y.previousIndex]=M-A}}E!==I&&o(y,E,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!eh(o))throw new Ve(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,p,y,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,E),c=!0),u=u._next}else d=0,function QE(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Hr()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new $0(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new G0),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new G0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class $0{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class G0{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new fb,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function k_(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class pb{constructor(){}supports(o){return o instanceof Map||th(o)}create(){return new aA}}class aA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||th(o)))throw new Ve(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new uA(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class uA{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Lp(){return new Vp([new N_])}let Vp=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Lp()),deps:[[s,new ir,new _t]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Ve(901,"")}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Lp}),s})();function P_(){return new O_([new pb])}let O_=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||P_()),deps:[[s,new ir,new _t]]}}find(u){const c=this.factories.find(p=>p.supports(u));if(c)return c;throw new Ve(901,"")}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:P_}),s})();const dA=JS(null,"core",[]);let hA=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(x(Mp))},s.\u0275mod=H({type:s}),s.\u0275inj=Yt({}),s})()},3942:(it,Ce,V)=>{"use strict";V.d(Ce,{Z:()=>Ve});var f=V(2090),W=V(4859),P=V(9681),se=V(1877);class ue{constructor(me,De){this._delegate=me,this.firebase=De,(0,P._addComponent)(me,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(me,De=P._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const He=this._delegate.container.getProvider(me);return!He.isInitialized()&&"EXPLICIT"===(null===(We=He.getComponent())||void 0===We?void 0:We.instantiationMode)&&He.initialize(),He.getImmediate({identifier:De})}_removeServiceInstance(me,De=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(De)}_addComponent(me){(0,P._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,P._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function _e(){const je=function ae(je){const me={},De={__esModule:!0,initializeApp:function Oe(ie,ye={}){const be=P.initializeApp(ie,ye);if((0,f.r3)(me,be.name))return me[be.name];const J=new je(be,De);return me[be.name]=J,J},app:He,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Se(ie){const ye=ie.name,be=ye.replace("-compat","");if(P._registerComponent(ie)&&"PUBLIC"===ie.type){const J=(re=He())=>{if("function"!=typeof re[be])throw he.create("invalid-app-argument",{appName:ye});return re[be]()};void 0!==ie.serviceProps&&(0,f.ZB)(J,ie.serviceProps),De[be]=J,je.prototype[be]=function(...re){return this._getService.bind(this,ye).apply(this,ie.multipleInstances?re:[])}}return"PUBLIC"===ie.type?De[be]:null},removeApp:function We(ie){delete me[ie]},useAsService:function qe(ie,ye){return"serverAuth"===ye?null:ye},modularAPIs:P}};function He(ie){if(!(0,f.r3)(me,ie=ie||P._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:ie});return me[ie]}return De.default=De,Object.defineProperty(De,"apps",{get:function Re(){return Object.keys(me).map(ie=>me[ie])}}),He.App=je,De}(ue);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function me(De){(0,f.ZB)(je,De)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),je}(),$=new se.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=G;!function Ie(je){(0,P.registerVersion)("@firebase/app-compat","0.1.39",je)}()},9681:(it,Ce,V)=>{"use strict";V.r(Ce),V.d(Ce,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Ti,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>pn,_addOrOverwriteComponent:()=>nn,_apps:()=>fn,_clearComponents:()=>ei,_components:()=>Tn,_getProvider:()=>Yt,_registerComponent:()=>Ht,_removeServiceInstance:()=>Mn,deleteApp:()=>vt,getApp:()=>Bn,getApps:()=>Qi,initializeApp:()=>Si,onLog:()=>gn,registerVersion:()=>bn,setLogLevel:()=>Nr});var f=V(5861),W=V(4859),P=V(1877),se=V(2090),ue=V(8766);class ge{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function he(et){const Ae=et.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(Ke)){const Dt=Ke.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(Ke=>Ke).join(" ")}}const ae="@firebase/app",G=new P.Yd("@firebase/app"),Ut="[DEFAULT]",Ye={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fn=new Map,Tn=new Map;function pn(et,Ae){try{et.container.addComponent(Ae)}catch(Ke){G.debug(`Component ${Ae.name} failed to register with FirebaseApp ${et.name}`,Ke)}}function nn(et,Ae){et.container.addOrOverwriteComponent(Ae)}function Ht(et){const Ae=et.name;if(Tn.has(Ae))return G.debug(`There were multiple attempts to register component ${Ae}.`),!1;Tn.set(Ae,et);for(const Ke of fn.values())pn(Ke,et);return!0}function Yt(et,Ae){const Ke=et.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),et.container.getProvider(Ae)}function Mn(et,Ae,Ke=Ut){Yt(et,Ae).clearInstance(Ke)}function ei(){Tn.clear()}const Ln=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Yi{constructor(Ae,Ke,Dt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}const Ti="9.14.0";function Si(et,Ae={}){let Ke=et;"object"!=typeof Ae&&(Ae={name:Ae});const Dt=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},Ae),It=Dt.name;if("string"!=typeof It||!It)throw Ln.create("bad-app-name",{appName:String(It)});if(Ke||(Ke=(0,se.aH)()),!Ke)throw Ln.create("no-options");const rn=fn.get(It);if(rn){if((0,se.vZ)(Ke,rn.options)&&(0,se.vZ)(Dt,rn.config))return rn;throw Ln.create("duplicate-app",{appName:It})}const K=new W.H0(It);for(const Q of Tn.values())K.addComponent(Q);const q=new Yi(Ke,Dt,K);return fn.set(It,q),q}function Bn(et=Ut){const Ae=fn.get(et);if(!Ae&&et===Ut)return Si();if(!Ae)throw Ln.create("no-app",{appName:et});return Ae}function Qi(){return Array.from(fn.values())}function vt(et){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,f.Z)(function*(et){const Ae=et.name;fn.has(Ae)&&(fn.delete(Ae),yield Promise.all(et.container.getProviders().map(Ke=>Ke.delete())),et.isDeleted=!0)})).apply(this,arguments)}function bn(et,Ae,Ke){var Dt;let It=null!==(Dt=Ye[et])&&void 0!==Dt?Dt:et;Ke&&(It+=`-${Ke}`);const rn=It.match(/\s|\//),K=Ae.match(/\s|\//);if(rn||K){const q=[`Unable to register library "${It}" with version "${Ae}":`];return rn&&q.push(`library name "${It}" contains illegal characters (whitespace or "/")`),rn&&K&&q.push("and"),K&&q.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void G.warn(q.join(" "))}Ht(new W.wA(`${It}-version`,()=>({library:It,version:Ae}),"VERSION"))}function gn(et,Ae){if(null!==et&&"function"!=typeof et)throw Ln.create("invalid-log-argument");(0,P.Am)(et,Ae)}function Nr(et){(0,P.Ub)(et)}const Sn="firebase-heartbeat-store";let lr=null;function vs(){return lr||(lr=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(et,Ae)=>{0===Ae&&et.createObjectStore(Sn)}}).catch(et=>{throw Ln.create("idb-open",{originalErrorMessage:et.message})})),lr}function mt(){return(mt=(0,f.Z)(function*(et){var Ae;try{return(yield vs()).transaction(Sn).objectStore(Sn).get(zr(et))}catch(Ke){if(Ke instanceof se.ZR)G.warn(Ke.message);else{const Dt=Ln.create("idb-get",{originalErrorMessage:null===(Ae=Ke)||void 0===Ae?void 0:Ae.message});G.warn(Dt.message)}}})).apply(this,arguments)}function st(et,Ae){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,f.Z)(function*(et,Ae){var Ke;try{const It=(yield vs()).transaction(Sn,"readwrite");return yield It.objectStore(Sn).put(Ae,zr(et)),It.done}catch(Dt){if(Dt instanceof se.ZR)G.warn(Dt.message);else{const It=Ln.create("idb-set",{originalErrorMessage:null===(Ke=Dt)||void 0===Ke?void 0:Ke.message});G.warn(It.message)}}})).apply(this,arguments)}function zr(et){return`${et.name}!${et.options.appId}`}class jn{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new li(Ke),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var Ae=this;return(0,f.Z)(function*(){const Dt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=_n();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==It&&!Ae._heartbeatsCache.heartbeats.some(rn=>rn.date===It))return Ae._heartbeatsCache.heartbeats.push({date:It,agent:Dt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(rn=>{const K=new Date(rn.date).valueOf();return Date.now()-K<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,f.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const Ke=_n(),{heartbeatsToSend:Dt,unsentEntries:It}=function yt(et,Ae=1024){const Ke=[];let Dt=et.slice();for(const It of et){const rn=Ke.find(K=>K.agent===It.agent);if(rn){if(rn.dates.push(It.date),Gt(Ke)>Ae){rn.dates.pop();break}}else if(Ke.push({agent:It.agent,dates:[It.date]}),Gt(Ke)>Ae){Ke.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:Dt}}(Ae._heartbeatsCache.heartbeats),rn=(0,se.L)(JSON.stringify({version:2,heartbeats:Dt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=Ke,It.length>0?(Ae._heartbeatsCache.heartbeats=It,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),rn})()}}function _n(){return(new Date).toISOString().substring(0,10)}class li{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,f.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function Kt(et){return mt.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var Ke=this;return(0,f.Z)(function*(){var Dt;if(yield Ke._canUseIndexedDBPromise){const rn=yield Ke.read();return st(Ke.app,{lastSentHeartbeatDate:null!==(Dt=Ae.lastSentHeartbeatDate)&&void 0!==Dt?Dt:rn.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var Ke=this;return(0,f.Z)(function*(){var Dt;if(yield Ke._canUseIndexedDBPromise){const rn=yield Ke.read();return st(Ke.app,{lastSentHeartbeatDate:null!==(Dt=Ae.lastSentHeartbeatDate)&&void 0!==Dt?Dt:rn.lastSentHeartbeatDate,heartbeats:[...rn.heartbeats,...Ae.heartbeats]})}})()}}function Gt(et){return(0,se.L)(JSON.stringify({version:2,heartbeats:et})).length}!function tr(et){Ht(new W.wA("platform-logger",Ae=>new ge(Ae),"PRIVATE")),Ht(new W.wA("heartbeat",Ae=>new jn(Ae),"PRIVATE")),bn(ae,"0.8.4",et),bn(ae,"0.8.4","esm2017"),bn("fire-js","")}("")},4859:(it,Ce,V)=>{"use strict";V.d(Ce,{H0:()=>ae,wA:()=>P,zt:()=>ue});var f=V(5861),W=V(2090);class P{constructor(G,$,ee){this.name=G,this.instanceFactory=$,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const se="[DEFAULT]";class ue{constructor(G,$){this.name=G,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const $=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has($)){const ee=new W.BH;if(this.instancesDeferred.set($,ee),this.isInitialized($)||this.shouldAutoInitialize())try{const xe=this.getOrInitializeService({instanceIdentifier:$});xe&&ee.resolve(xe)}catch(xe){}}return this.instancesDeferred.get($).promise}getImmediate(G){var $;const ee=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),xe=null!==($=null==G?void 0:G.optional)&&void 0!==$&&$;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(xe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Ie){if(xe)return null;throw Ie}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function he(_e){return"EAGER"===_e.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:se})}catch($){}for(const[$,ee]of this.instancesDeferred.entries()){const xe=this.normalizeInstanceIdentifier($);try{const Ie=this.getOrInitializeService({instanceIdentifier:xe});ee.resolve(Ie)}catch(Ie){}}}}clearInstance(G=se){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,f.Z)(function*(){const $=Array.from(G.instances.values());yield Promise.all([...$.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...$.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=se){return this.instances.has(G)}getOptions(G=se){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:$={}}=G,ee=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const xe=this.getOrInitializeService({instanceIdentifier:ee,options:$});for(const[Ie,Ve]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Ie)&&Ve.resolve(xe);return xe}onInit(G,$){var ee;const xe=this.normalizeInstanceIdentifier($),Ie=null!==(ee=this.onInitCallbacks.get(xe))&&void 0!==ee?ee:new Set;Ie.add(G),this.onInitCallbacks.set(xe,Ie);const Ve=this.instances.get(xe);return Ve&&G(Ve,xe),()=>{Ie.delete(G)}}invokeOnInitCallbacks(G,$){const ee=this.onInitCallbacks.get($);if(ee)for(const xe of ee)try{xe(G,$)}catch(Ie){}}getOrInitializeService({instanceIdentifier:G,options:$={}}){let ee=this.instances.get(G);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=G,_e===se?void 0:_e),options:$}),this.instances.set(G,ee),this.instancesOptions.set(G,$),this.invokeOnInitCallbacks(ee,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,ee)}catch(xe){}var _e;return ee||null}normalizeInstanceIdentifier(G=se){return this.component?this.component.multipleInstances?G:se:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const $=this.getProvider(G.name);if($.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);$.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const $=new ue(G,this);return this.providers.set(G,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Ce,V)=>{"use strict";V.d(Ce,{Am:()=>_e,Ub:()=>ae,Yd:()=>he,in:()=>W});const f=[];var W=(()=>{return(G=W||(W={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",W;var G})();const P={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},se=W.INFO,ue={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},ge=(G,$,...ee)=>{if($<G.logLevel)return;const xe=(new Date).toISOString(),Ie=ue[$];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ie](`[${xe}]  ${G.name}:`,...ee)};class he{constructor($){this.name=$,this._logLevel=se,this._logHandler=ge,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in W))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?P[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...$),this._logHandler(this,W.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...$),this._logHandler(this,W.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,W.INFO,...$),this._logHandler(this,W.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,W.WARN,...$),this._logHandler(this,W.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...$),this._logHandler(this,W.ERROR,...$)}}function ae(G){f.forEach($=>{$.setLogLevel(G)})}function _e(G,$){for(const ee of f){let xe=null;$&&$.level&&(xe=P[$.level]),ee.userLogHandler=null===G?null:(Ie,Ve,...je)=>{const me=je.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(We){return null}}).filter(De=>De).join(" ");Ve>=(null!=xe?xe:Ie.logLevel)&&G({level:W[Ve].toLowerCase(),message:me,args:je,type:Ie.name})}}}},8766:(it,Ce,V)=>{"use strict";V.d(Ce,{Lj:()=>Oe,X3:()=>He});var f=V(5861);let P,se;const he=new WeakMap,ae=new WeakMap,_e=new WeakMap,G=new WeakMap,$=new WeakMap;let Ie={get(ye,be,J){if(ye instanceof IDBTransaction){if("done"===be)return ae.get(ye);if("objectStoreNames"===be)return ye.objectStoreNames||_e.get(ye);if("store"===be)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return De(ye[be])},set:(ye,be,J)=>(ye[be]=J,!0),has:(ye,be)=>ye instanceof IDBTransaction&&("done"===be||"store"===be)||be in ye};function me(ye){return"function"==typeof ye?function je(ye){return ye!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ye)?function(...be){return ye.apply(We(this),be),De(he.get(this))}:function(...be){return De(ye.apply(We(this),be))}:function(be,...J){const re=ye.call(We(this),be,...J);return _e.set(re,be.sort?be.sort():[be]),De(re)}}(ye):(ye instanceof IDBTransaction&&function xe(ye){if(ae.has(ye))return;const be=new Promise((J,re)=>{const oe=()=>{ye.removeEventListener("complete",we),ye.removeEventListener("error",de),ye.removeEventListener("abort",de)},we=()=>{J(),oe()},de=()=>{re(ye.error||new DOMException("AbortError","AbortError")),oe()};ye.addEventListener("complete",we),ye.addEventListener("error",de),ye.addEventListener("abort",de)});ae.set(ye,be)}(ye),((ye,be)=>be.some(J=>ye instanceof J))(ye,function ue(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ye,Ie):ye)}function De(ye){if(ye instanceof IDBRequest)return function ee(ye){const be=new Promise((J,re)=>{const oe=()=>{ye.removeEventListener("success",we),ye.removeEventListener("error",de)},we=()=>{J(De(ye.result)),oe()},de=()=>{re(ye.error),oe()};ye.addEventListener("success",we),ye.addEventListener("error",de)});return be.then(J=>{J instanceof IDBCursor&&he.set(J,ye)}).catch(()=>{}),$.set(be,ye),be}(ye);if(G.has(ye))return G.get(ye);const be=me(ye);return be!==ye&&(G.set(ye,be),$.set(be,ye)),be}const We=ye=>$.get(ye);function He(ye,be,{blocked:J,upgrade:re,blocking:oe,terminated:we}={}){const de=indexedDB.open(ye,be),Ue=De(de);return re&&de.addEventListener("upgradeneeded",gt=>{re(De(de.result),gt.oldVersion,gt.newVersion,De(de.transaction))}),J&&de.addEventListener("blocked",()=>J()),Ue.then(gt=>{we&&gt.addEventListener("close",()=>we()),oe&&gt.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Ue}function Oe(ye,{blocked:be}={}){const J=indexedDB.deleteDatabase(ye);return be&&J.addEventListener("blocked",()=>be()),De(J).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],qe=new Map;function ie(ye,be){if(!(ye instanceof IDBDatabase)||be in ye||"string"!=typeof be)return;if(qe.get(be))return qe.get(be);const J=be.replace(/FromIndex$/,""),re=be!==J,oe=Se.includes(J);if(!(J in(re?IDBIndex:IDBObjectStore).prototype)||!oe&&!Re.includes(J))return;const we=function(){var de=(0,f.Z)(function*(Ue,...gt){const tn=this.transaction(Ue,oe?"readwrite":"readonly");let Ut=tn.store;return re&&(Ut=Ut.index(gt.shift())),(yield Promise.all([Ut[J](...gt),oe&&tn.done]))[0]});return function(gt){return de.apply(this,arguments)}}();return qe.set(be,we),we}!function Ve(ye){Ie=ye(Ie)}(ye=>AF(SF({},ye),{get:(be,J,re)=>ie(be,J)||ye.get(be,J,re),has:(be,J)=>!!ie(be,J)||ye.has(be,J)}))},5861:(it,Ce,V)=>{"use strict";function f(P,se,ue,ge,he,ae,_e){try{var G=P[ae](_e),$=G.value}catch(ee){return void ue(ee)}G.done?se($):Promise.resolve($).then(ge,he)}function W(P){return function(){var se=this,ue=arguments;return new Promise(function(ge,he){var ae=P.apply(se,ue);function _e($){f(ae,ge,he,_e,G,"next",$)}function G($){f(ae,ge,he,_e,G,"throw",$)}_e(void 0)})}}V.d(Ce,{Z:()=>W})}},it=>{it(it.s=9092)}]);